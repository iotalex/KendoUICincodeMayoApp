{"version":3,"file":"kendo.editor.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoeditor","js","this","$","editorNS","Command","GenericCommand","registerTool","Tool","RestorePoint","extend","InsertHtmlCommand","InsertHtmlTool","kendo","UndoRedoStack","Observable","init","options","fn","call","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","FORMATTING_MARKS_STYLE_ID","FORMATTING_MARKS_OVERLAY_ID","FORMATTING_MARKS_OVERLAY_WRAPPER_ID","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","lines","symbols","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","lineHeight","formattingMarks","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","topPadding","leftPadding","bottomPadding","rightPadding","independentCellPaddings","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","formattingMarksRefreshDelay","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","_destroyResizings","_destroyFormattingMarksOverlay","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","_appendFormattingMarksStyles","$head","head","append","_appendFormattingMarksOverlay","_formattingMarksOverlay","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","left","top","opacity","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","_handleSpaceAndNewLines","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","refreshDelay","applyFormattingMarks","clearFormattingMarksOverlay","_toggledFormattingMarks","children","_formattingMarksTimeout","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","getKendoResizable","ignore","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","plugin","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","getTextNodes","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","minWidth","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","LineHeightCommand","LineHeightFormatTool","getKendoComboBox","prefixOptions","DOM","createMark","character","clonedRange","domRect","getBoundingClientRect","createElementNS","setAttributeNS","appendSvgMarks","overlay","FormattingMarksCommand","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResize","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","topCellPadding","leftCellPadding","bottomCellPadding","rightCellPadding","tableData","paddingTop","paddingLeft","paddingBottom","paddingRight","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","FORM_FIELD_CLASS","INVISIBLE_CLASS","DOT","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","closeHandler","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onPaddingTopChange","viewType","topCellPaddingValue","leftCellPaddingNumeric","bottomCellPaddingNumeric","rightCellPaddingNumeric","_onPaddingCheckChange","checked","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","gutter","layoutWrapper","hint","optional"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.combobox.js'), require('kendo.dropdownlist.js'), require('kendo.resizable.js'), require('kendo.window.js'), require('kendo.colorpicker.js'), require('kendo.imagebrowser.js'), require('kendo.numerictextbox.js'), require('kendo.textarea.js'), require('kendo.core.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.form.js'), require('kendo.filebrowser.js'), require('kendo.draganddrop.js'), require('kendo.html.button.js'), require('kendo.tabstrip.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.combobox', 'kendo.dropdownlist', 'kendo.resizable', 'kendo.window', 'kendo.colorpicker', 'kendo.imagebrowser', 'kendo.numerictextbox', 'kendo.textarea', 'kendo.core', 'kendo.toolbar', 'kendo.icons', 'kendo.form', 'kendo.filebrowser', 'kendo.draganddrop', 'kendo.html.button', 'kendo.tabstrip'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoeditor = global.kendoeditor || {}, global.kendoeditor.js = factory()));\n})(this, (function () {\n    (function(kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function(options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [ \"undo\", \"redo\" ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger(\"undo\", { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger(\"redo\", { command: command });\n                }\n            },\n            clear: function() {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n\n        kendo.deepExtend(kendo, {\n            util: {\n                UndoRedoStack: UndoRedoStack\n            }\n        });\n    })(kendo);\n\n    (function($,undefined$1) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Widget = kendo.ui.Widget,\n            os = kendo.support.mobileOS,\n            browser = kendo.support.browser,\n            extend = $.extend,\n            deepExtend = kendo.deepExtend,\n            keys = kendo.keys,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            NS = \".kendoEditor\";\n\n        const FORMATTING_MARKS_STYLE_ID = \"formatting-marks-style\",\n              FORMATTING_MARKS_OVERLAY_ID = \"formatting-marks-overlay\",\n              FORMATTING_MARKS_OVERLAY_WRAPPER_ID = \"formatting-marks-overlay-wrapper\";\n\n        var SELECT = \"select\";\n        var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n        var PLACEHOLDER_CLASS = \"k-placeholder\";\n        var PLACEHOLDER_TAG_ID = \"placeholder\";\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = \"en\";\n\n        var NATIVE_TOOLS = [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ];\n\n        var EditorUtils = {\n            editorWrapperTemplate: () =>\n                '<div class=\"k-editor\">' +\n                    '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                    '<div class=\"k-editable-area k-editor-content\"></div>' +\n                '</div>',\n\n            formatByName: function(name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n\n            getToolCssClass: function(name, icon) {\n                var toolCssClassNames = {\n                    superscript: \"supscript\",\n                    subscript: \"subscript\",\n                    justifyLeft: \"align-left\",\n                    justifyCenter: \"align-center\",\n                    justifyRight: \"align-right\",\n                    justifyFull: \"align-justify\",\n                    insertUnorderedList: \"list-unordered\",\n                    insertOrderedList: \"list-ordered\",\n                    insertUpperRomanList: \"list-roman-upper\",\n                    insertLowerRomanList: \"list-roman-lower\",\n                    \"import\": \"import\",\n                    indent: \"indent\",\n                    outdent: \"outdent\",\n                    createLink: \"link\",\n                    unlink: \"unlink\",\n                    insertImage: \"image\",\n                    insertFile: \"file-add\",\n                    viewHtml: \"code\",\n                    foreColor: \"foreground-color\",\n                    backColor: \"droplet\",\n                    createTable: \"table-add\",\n                    addColumnLeft: \"table-column-insert-left\",\n                    addColumnRight: \"table-column-insert-right\",\n                    addRowAbove: \"table-row-insert-above\",\n                    addRowBelow: \"table-row-insert-below\",\n                    deleteRow: \"table-row-delete\",\n                    deleteColumn: \"table-column-delete\",\n                    mergeCellsHorizontally: \"cells-merge-horizontally\",\n                    mergeCellsVertically: \"cells-merge-vertically\",\n                    splitCellHorizontally: \"cell-split-horizontally\",\n                    splitCellVertically: \"cell-split-vertically\",\n                    tableProperties: \"table-properties\",\n                    tableCellProperties: \"table-cell-properties\",\n                    tableWizardInsert: \"table-wizard\",\n                    tableAlignLeft: \"table-position-start\",\n                    tableAlignCenter: \"table-position-center\",\n                    tableAlignRight: \"table-position-end\",\n                    cleanFormatting: \"clear-css\",\n                    copyFormat: \"copy-format\",\n                    applyFormat: \"apply-format\",\n                    pdf: \"file-pdf\"\n                };\n\n                var cssClass = toolCssClassNames[name];\n\n                if (cssClass) {\n                    return cssClass;\n                }\n\n                if (icon) {\n                    return icon;\n                }\n\n                return EditorUtils.nameToKebab(name);\n            },\n\n            nameToKebab: function(name) {\n                return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                    .replace(/[\\s_]+/g, '-')\n                    .toLowerCase();\n            },\n\n            registerTool: function(toolName, tool) {\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n\n                if (!tool.options.ui) {\n                    tool.options.ui = {};\n                }\n\n                tool.options.ui.command = toolName;\n\n                Editor.defaultTools[toolName] = tool;\n            },\n\n            registerFormat: function(formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n\n            cacheComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], \"{\" + index + \"}\");\n                }\n                return content;\n            },\n\n            retrieveComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(\"{\" + index + \"}\", comments[index]);\n                }\n                return content;\n            }\n        };\n\n        var messages = {\n            auto: \"Auto\",\n            bold: \"Bold\",\n            italic: \"Italic\",\n            underline: \"Underline\",\n            strikethrough: \"Strikethrough\",\n            superscript: \"Superscript\",\n            subscript: \"Subscript\",\n            fitToCell: \"Fit to cell\",\n            justifyCenter: \"Center text\",\n            justifyLeft: \"Align text left\",\n            justifyRight: \"Align text right\",\n            justifyFull: \"Justify\",\n            insertUnorderedList: \"Insert unordered list\",\n            insertOrderedList: \"Insert ordered list\",\n            lineHeight: \"Set line height\",\n            formattingMarks: \"Toggle formatting marks\",\n            indent: \"Indent\",\n            outdent: \"Outdent\",\n            createLink: \"Insert hyperlink\",\n            unlink: \"Remove hyperlink\",\n            insertImage: \"Insert image\",\n            insertFile: \"Insert file\",\n            insertHtml: \"Insert HTML\",\n            viewHtml: \"View HTML\",\n            fontName: \"Select font family\",\n            fontNameInherit: \"(inherited font)\",\n            fontSize: \"Select font size\",\n            fontSizeInherit: \"(inherited size)\",\n            formatBlock: \"Format\",\n            formatting: \"Format\",\n            foreColor: \"Color\",\n            backColor: \"Background color\",\n            style: \"Styles\",\n            emptyFolder: \"Empty Folder\",\n            editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n            uploadFile: \"Upload\",\n            overflowAnchor: \"More tools\",\n            orderBy: \"Arrange by:\",\n            orderBySize: \"Size\",\n            orderByName: \"Name\",\n            invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: \"A directory with this name was not found.\",\n            imageWebAddress: \"Web address\",\n            imageAltText: \"Alternate text\",\n            imageWidth: \"Width (px)\",\n            imageHeight: \"Height (px)\",\n            fileWebAddress: \"Web address\",\n            fileTitle: \"Title\",\n            fileText: \"Text\",\n            linkWebAddress: \"Web address\",\n            linkText: \"Text\",\n            linkToolTip: \"ToolTip\",\n            linkOpenInNewWindow: \"Open link in new window\",\n            dialogUpdate: \"Update\",\n            dialogInsert: \"Insert\",\n            dialogOk: \"Confirm\",\n            dialogCancel: \"Cancel\",\n            cleanFormatting: \"Clean formatting\",\n            createTable: \"Create a table\",\n            createTableHint: \"Create a {0} x {1} table\",\n            addColumnLeft: \"Add column on the left\",\n            addColumnRight: \"Add column on the right\",\n            addRowAbove: \"Add row above\",\n            addRowBelow: \"Add row below\",\n            deleteRow: \"Delete row\",\n            deleteColumn: \"Delete column\",\n            mergeCellsHorizontally: \"Merge cells horizontally\",\n            mergeCellsVertically: \"Merge cells vertically\",\n            splitCellHorizontally: \"Split cells horizontally\",\n            splitCellVertically: \"Split cells vertically\",\n            tableAlignLeft: \"Table Align Left\",\n            tableAlignCenter: \"Table Align Center\",\n            tableAlignRight: \"Table Align Right\",\n            tableWizard: \"Table Wizard\",\n            tableProperties: \"Table Properties\",\n            tableCellProperties: \"Cell Properties\",\n            tableTab: \"General\",\n            cellTab: \"Cell\",\n            accessibilityTab: \"Advanced\",\n            caption: \"Caption\",\n            summary: \"Summary\",\n            width: \"Width\",\n            height: \"Height\",\n            units: \"Units\",\n            cellSpacing: \"Cell Spacing\",\n            cellPadding: \"Cell Padding\",\n            topPadding: \"Top\",\n            leftPadding: \"Left\",\n            bottomPadding: \"Bottom\",\n            rightPadding: \"Right\",\n            independentCellPaddings: \"Independent Cell Paddings\",\n            cellMargin: \"Cell Margin\",\n            alignment: \"Alignment\",\n            captionAlignment: \"Caption alignment\",\n            position: \"Position\",\n            background: \"Background\",\n            tableBackground: \"Table background\",\n            cssClass: \"CSS Class\",\n            id: \"ID\",\n            border: \"Border\",\n            borderStyle: \"Border Style\",\n            borderWidth: \"Border Width\",\n            borderColor: \"Border Color\",\n            collapseBorders: \"Collapse borders\",\n            wrapText: \"Wrap text\",\n            associateCellsWithHeaders: \"Associate headers\",\n            alignLeft: \"Align Left\",\n            alignCenter: \"Align Center\",\n            alignRight: \"Align Right\",\n            alignLeftTop: \"Align Left Top\",\n            alignCenterTop: \"Align Center Top\",\n            alignRightTop: \"Align Right Top\",\n            alignLeftMiddle: \"Align Left Middle\",\n            alignCenterMiddle: \"Align Center Middle\",\n            alignRightMiddle: \"Align Right Middle\",\n            alignLeftBottom: \"Align Left Bottom\",\n            alignCenterBottom: \"Align Center Bottom\",\n            alignRightBottom: \"Align Right Bottom\",\n            alignRemove: \"Remove Alignment\",\n            columns: \"Columns\",\n            rows: \"Rows\",\n            selectAllCells: \"Apply to all cells\",\n            applyToColumn: \"apply to column\",\n            applyToRow: \"apply to row\",\n            exportAs: \"Export As\",\n            \"import\": \"Import\",\n            print: \"Print\",\n            headerRows: \"Header Rows\",\n            headerColumns: \"Header Cols\",\n            tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n            associateNone: \"None\",\n            associateScope: \"Associate using 'scope' attribute\",\n            associateIds: \"Associate using Ids\",\n            copyFormat: \"Copy format\",\n            applyFormat: \"Apply format\",\n            borderNone: \"None\",\n            undo: \"Undo\",\n            redo: \"Redo\"\n        };\n\n        var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n        var toolGroups = {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            lines: [\"lineHeight\"],\n            symbols: [\"formattingMarks\"],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n            dent: [\"indent\", \"outdent\"],\n            tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        };\n\n        var Editor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    toolbarContainer,\n                    type, domElement;\n\n                /* suppress initialization in devices w/o proper contenteditable support */\n                if (!supportedContentEditable) {\n                    return;\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.options = deepExtend({}, that.options, options);\n\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n\n                this._registerHandler(\n                    element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n                );\n\n                toolbarContainer = that._setupType(element);\n\n                that._initToolbar(toolbarContainer);\n                that._setupHeight(type);\n                that._resizable();\n                that._initializeContentElement(that);\n                that._setupKeyboard();\n\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n                that._populateValue(options, domElement);\n\n                that._registerHandler(document, {\n                    \"mousedown\": function() { that._endTyping(); },\n                    \"mouseup\": function(e) { that._mouseup(e); }\n                });\n\n                that._initializeImmutables();\n\n                if (type == \"textarea\") {\n                    that._ariaLabel(that.wrapper.find(\"iframe\"));\n                }\n\n                that.toolbar.resize();\n\n                kendo.notify(that);\n\n                if (that._showWatermarkOverlay) {\n                    that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n                }\n            },\n\n            events: [\n                \"select\",\n                \"change\",\n                \"execute\",\n                \"error\",\n                \"paste\",\n                \"keydown\",\n                \"keyup\"\n            ],\n\n            options: {\n                name: \"Editor\",\n                messages: messages,\n                placeholder: \"\",\n                nonce: \"\",\n                unsafeInline: true,\n                formats: {},\n                encoded: true,\n                formattingMarksRefreshDelay: 250,\n                domain: null,\n                resizable: false,\n                deserialization: {\n                    custom: null\n                },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false,\n                    optimizeTags: false,\n                    keepEOL: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true, resizable: false, draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                navigateOnTab: false,\n                fontName: [\n                    { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                    { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                    { text: \"Georgia\", value: \"Georgia, serif\" },\n                    { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                    { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                    { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                    { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                    { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                    { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n                ],\n                fontSize: [\n                    { text: \"1 (8pt)\", value: \"xx-small\" },\n                    { text: \"2 (10pt)\", value: \"x-small\" },\n                    { text: \"3 (12pt)\", value: \"small\" },\n                    { text: \"4 (14pt)\", value: \"medium\" },\n                    { text: \"5 (18pt)\", value: \"large\" },\n                    { text: \"6 (24pt)\", value: \"x-large\" },\n                    { text: \"7 (36pt)\", value: \"xx-large\" }\n                ],\n                formatBlock: [\n                    { text: \"Paragraph\", value: \"p\" },\n                    { text: \"Quotation\", value: \"blockquote\" },\n                    { text: \"Heading 1\", value: \"h1\" },\n                    { text: \"Heading 2\", value: \"h2\" },\n                    { text: \"Heading 3\", value: \"h3\" },\n                    { text: \"Heading 4\", value: \"h4\" },\n                    { text: \"Heading 5\", value: \"h5\" },\n                    { text: \"Heading 6\", value: \"h6\" }\n                ],\n                tools: [\n                    \"formatting\",\n                    \"bold\",\n                    \"italic\",\n                    \"underline\",\n                    \"undo\",\n                    \"redo\",\n                    \"justifyLeft\",\n                    \"justifyCenter\",\n                    \"justifyRight\",\n                    \"copyFormat\",\n                    \"applyFormat\",\n                    \"insertUnorderedList\",\n                    \"insertOrderedList\",\n                    \"indent\",\n                    \"outdent\",\n                    \"createLink\",\n                    \"unlink\",\n                    \"insertImage\",\n                    \"tableProperties\",\n                    \"tableCellProperties\",\n                    \"createTable\",\n                    \"addRowAbove\",\n                    \"addRowBelow\",\n                    \"addColumnLeft\",\n                    \"addColumnRight\",\n                    \"deleteRow\",\n                    \"deleteColumn\",\n                    \"mergeCellsHorizontally\",\n                    \"mergeCellsVertically\",\n                    \"splitCellHorizontally\",\n                    \"splitCellVertically\",\n                    \"tableAlignLeft\",\n                    \"tableAlignCenter\",\n                    \"tableAlignRight\"\n                ]\n            },\n\n            destroy: function() {\n                var editor = this;\n\n                Widget.fn.destroy.call(this);\n\n                this._endTyping(true);\n\n                this._deregisterHandlers();\n\n                clearTimeout(this._spellCorrectTimeout);\n\n                this._focusOutside();\n\n                this.toolbar.destroy();\n\n                if (this.windowInstance) {\n                    this.windowInstance.destroy();\n                }\n                if (this.tablePopup) {\n                    this.tablePopup.destroy();\n                }\n\n                editor._destroyUploadWidget();\n\n                editor._destroyResizings();\n\n                editor._destroyFormattingMarksOverlay();\n\n                kendo.destroy(this.wrapper);\n            },\n\n            setOptions: function(options) {\n                var editor = this;\n\n                Widget.fn.setOptions.call(editor, options);\n\n                if (options.tools) {\n                    this._setOptionsTools(options.tools);\n                }\n\n                this._initializePlaceholder();\n            },\n\n            createRange: function(document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n\n            encodedValue: function() {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n\n            exec: function(name, params) {\n                var that = this;\n                var command = null;\n                var defaultTools = kendo.ui.Editor.defaultTools;\n                var range, tool, prevented;\n\n                if (!name) {\n                    throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n                }\n\n                if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                    name !== \"print\" &&\n                    name !== \"pdf\" &&\n                    name !== \"exportAs\") {\n                    return false;\n                }\n\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n\n                tool = that.tools[name] || defaultTools[name];\n\n                if (!tool) {\n                    Object.keys(defaultTools).map(key => {\n                        if (key.toLowerCase() === name) {\n                            tool = defaultTools[key];\n                        }\n                    });\n                }\n\n                if (tool) {\n                    range = that.getRange();\n\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                    }\n\n                    prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                    if (prevented) {\n                        return;\n                    }\n\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n\n                        if (command.async) {\n                            command.change = that._selectionChange.bind(that);\n                            return;\n                        }\n                    }\n\n                    that._selectionChange();\n                }\n            },\n\n            execCommand: function(command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n\n                command.editor = this;\n                command.exec();\n            },\n\n            focus: function() {\n                this.restoreSelection();\n            },\n\n            getRange: function() {\n                var selection = this.getSelection(),\n                    range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                    doc = this.document;\n\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n\n                return range;\n            },\n\n            getSelection: function() {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n\n            paste: function(html, options) {\n                this.focus();\n\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n\n                command.editor = this;\n\n                command.exec();\n            },\n\n            refresh: function() {\n                var that = this;\n\n                if (that.textarea) {\n                    that._destroyResizings();\n                    // preserve updated value before re-initializing\n                    // don't use update() to prevent the editor from encoding the content too early\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find(\"iframe\").remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n\n            restoreSelection: function() {\n                this._focusBody();\n\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n\n            saveSelection: function(range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer,\n                    body = this.body;\n\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n\n            selectedHtml: function() {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n\n            selectRange: function(range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n\n            state: function(toolName) {\n                var tool = kendo.ui.Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n\n                if (finder) {\n                    range = this.getRange();\n\n                    textNodes = RangeUtils.textNodes(range);\n\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n\n                return false;\n            },\n\n            update: function(value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n\n            value: function(html) {\n                var body = this.body,\n                    editorNS = kendo.ui.editor,\n                    options = this.options,\n                    currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n                if (html === undefined$1) {\n                    return currentHtml;\n                }\n\n                if (html == currentHtml) {\n                    return;\n                }\n\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n                this.selectionRestorePoint = null;\n                this.update();\n                this._refreshTools();\n            },\n\n            _bindTools: function() {\n                var that = this,\n                    defaultTools = this.tools;\n\n                that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                    .each((i, el) => {\n                        var toolName = el.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName];\n\n                        if (tool && tool.initialize) {\n                            tool.initialize($(el), that);\n                        }\n                    });\n\n                that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n            },\n\n            _blur: function() {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n\n                this.update();\n\n                if (textarea) {\n                    textarea.trigger(\"blur\");\n                }\n\n                if (value != old) {\n                    this.trigger(\"change\");\n                    if (textarea) {\n                        textarea.trigger(\"change\");\n                    }\n                }\n            },\n\n            _containsRange: function(range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                    dom.isAncestorOrSelf(body, range.endContainer);\n            },\n\n            _createContentElement: function(stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = \"\";\n                var src = 'javascript:\"\"';\n                var lang = \"\";\n\n                textarea.hide();\n\n                iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n                $(iframe)\n                    .css(\"display\", \"\")\n                    .addClass(\"k-content k-iframe\")\n                    .attr(\"tabindex\", textarea[0].tabIndex)\n                    .insertBefore(textarea);\n\n                // automatically relax same-origin policy if document.domain != location.hostname,\n                // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n                if (specifiedDomain || domain != location.hostname) {\n                    // relax same-origin policy\n                    domainScript = `<script ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>document.domain=\"${domain}\"</script>`;\n                    src = \"javascript:document.write('\" + domainScript + \"')\";\n                    iframe.src = src;\n                }\n\n                if (!iframe.src) {\n                    iframe.src = \"\";\n                }\n\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n\n                $(iframe).one(\"load\", function() {\n                    editor._decorateFormatting(doc.body);\n                });\n\n                lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n                doc.open();\n                doc.write(\n                    \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                    \"<meta charset='utf-8' />\" +\n                    \"<title>Kendo UI Editor content</title>\" +\n                    `<style ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>` +\n                        \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                        \"body{padding:0;margin:0;}\" +\n                        \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                        \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                        (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                        (os.ios ? \"word-break:keep-all;\" : \"\") +\n                        (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                        \"}\" +\n                        \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                        \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                        \"ul,ol{padding-left:2.5em}\" +\n                        \"span{-ms-high-contrast-adjust:none;}\" +\n                        \"a{color:#00a}\" +\n                        \"code{font-size:1.23em}\" +\n                        \"telerik\\\\3Ascript{display: none;}\" +\n                        \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                        \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                        \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                        \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                        \".k-table p{margin:0;padding:0;}\" +\n                        \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                        \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                        \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                        \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                        \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                        \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                        \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                        \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                        \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                        \".k-table.k-element-resizing{opacity:0.6;}\" +\n                        \".k-placeholder{color:grey}\" +\n                        \"k\\\\:script{display:none;}\" +\n                    \"</style>\" +\n                    domainScript +\n                    $.map(stylesheets, function(href) {\n                        return `<link rel='stylesheet' href='${href}' ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>`;\n                    }).join(\"\") +\n                    \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n                );\n                doc.close();\n\n                return wnd;\n            },\n\n            _deleteSavedRange: function() {\n                if (\"_range\" in this) {\n                    delete this._range;\n                }\n            },\n\n            _decorateFormatting: function(body) {\n                var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                    dom = kendo.ui.editor.Dom,\n                    component, dataSource, items, i, tag, className, style;\n\n                if (formattingElement.length) {\n                    component = formattingElement.getKendoDropDownList();\n                    if (!component) {\n                        return;\n                    }\n                    dataSource = component.dataSource;\n                    items = dataSource.data();\n\n                    if (body) {\n                        component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                    }\n\n                    if (this.options.unsafeInline !== false) {\n\n                        for (i = 0; i < items.length; i++) {\n                            tag = items[i].tag || \"span\";\n                            className = items[i].className;\n\n                            style = dom.inlineStyle(body, tag, { className: className });\n                            style = style.replace(/\"/g, \"'\");\n\n                            items[i].style = style + \";display:inline-block\";\n                        }\n                    }\n\n                    dataSource.trigger(\"change\");\n                }\n            },\n\n            _appendFormattingMarksStyles: function() {\n                const that = this;\n\n                let style, $head;\n\n                style = `<style id='${FORMATTING_MARKS_STYLE_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >\n                p::after,li::after{content: '\\\\00B6'; color: #6098f2;}\n                #${FORMATTING_MARKS_OVERLAY_WRAPPER_ID} {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    z-index: 9999;\n                    pointer-events: none;\n                }\n                #${FORMATTING_MARKS_OVERLAY_ID} {\n                    width: 100%;\n                    height: 100%;\n                    overflow: visible;\n                  }\n            </style>`;\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + FORMATTING_MARKS_STYLE_ID).remove();\n                $head.append(style);\n            },\n\n            _appendFormattingMarksOverlay: function() {\n                const that = this;\n\n                that._formattingMarksOverlay = $(that.document)\n                .find(\"html\")\n                .append(`<div id='${FORMATTING_MARKS_OVERLAY_WRAPPER_ID}'><svg id='${FORMATTING_MARKS_OVERLAY_ID}'></svg><div>`)\n                .find(\"#\" + FORMATTING_MARKS_OVERLAY_ID);\n            },\n\n            _destroyFormattingMarksOverlay: function() {\n                const that = this;\n\n                $(that.document).find(\"#\" + FORMATTING_MARKS_OVERLAY_ID).remove();\n                $(that.document.head).find(\"#\" + FORMATTING_MARKS_STYLE_ID).remove();\n            },\n\n            _deregisterHandlers: function() {\n                var handlers = this._handlers;\n\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n\n                this._handlers = [];\n            },\n\n            _destroyUploadWidget: function() {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n\n            _endTyping: function() {\n                var keyboard = this.keyboard;\n\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) { }\n            },\n\n            _focusBody: function() {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n\n\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n\n            _focusOutside: function() {\n                // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $(\"<input />\")\n                        .css({\n                            position: \"fixed\",\n                            left: \"1px\",\n                            top: \"1px\",\n                            width: \"1px\",\n                            height: \"1px\",\n                            \"font-size\": \"0\",\n                            border: \"0\",\n                            opacity: \"0\"\n                    })\n                    .appendTo(document.body).trigger(\"focus\");\n                    tempInput.trigger(\"blur\").remove();\n                }\n            },\n\n            _handleToolbarClick: function(e) {\n                var toolName = e.target.data(\"command\");\n\n                if (toolName && toolName !== \"createTable\") {\n                    this.exec(toolName);\n                }\n            },\n\n            _immutablesContext: function(range) {\n                var editorNS = kendo.ui.editor;\n\n                if (this.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n\n            _initializeContentElement: function() {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                    // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                    // https://github.com/telerik/kendo-ui-core/issues/3515\n                    if (!doc.body) {\n                        var body = doc.createElement(\"body\");\n                        body.setAttribute(\"contenteditable\", \"true\");\n                        body.setAttribute(\"autocorrect\", \"off\");\n                        doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                        var interval = setInterval(function() {\n                            if ($(editor.document).find(\"body\").length > 1) {\n                                $(editor.document).find(\"body\").last().remove();\n                                window.clearInterval(interval);\n                            }\n                        },10);\n                    }\n\n                    editor.body = doc.body;\n\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n\n                    this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n\n                    setTimeout(() => {\n                        editor._decorateFormatting(editor.body);\n                    });\n                }\n\n                this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n                editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n                try {\n                    doc.execCommand(\"enableInlineTableEditing\", null, false);\n                } catch (e) { }\n\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        \"keydown\": function() {\n                            // necessary in iOS when touch events are bound to the page\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n\n                this._initializePlaceholder();\n\n                this._spellCorrect(editor);\n\n                this._registerHandler(editor.document, {\n                    \"mouseover dragenter\": function(e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                            editor._cachedHeight = \"\" + editor.body.style.height;\n                            editor.body.style.height = \"100%\";\n                        }\n                    },\n                    \"mouseout dragleave drop contextmenu\": function(e) {\n                        var restoreHeight = function() {\n                            if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n\n                        if (e.type === \"contextmenu\") {\n                            setTimeout(function() {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n\n                    }\n                });\n\n                this._registerHandler(editor.body, {\n                    \"keydown\": function(e) {\n                        var range;\n\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                            return false;\n                        }\n\n                        if (e.keyCode === keys.F10) {\n                            editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            // skip bom nodes when navigating with arrows\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? \"startContainer\" : \"endContainer\"];\n                            var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                            var direction = left ? -1 : 1;\n\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n\n                        var tools = editor.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n\n                            editor.trigger(\"keydown\", e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n\n                            return false;\n                        }\n\n                        editor.keyboard.clearTimeout();\n\n                        editor.keyboard.keydown(e);\n                    },\n                    \"keypress\": function(e) {\n                        setTimeout(function() {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    \"keyup\": function(e) {\n                        var selectionCodes = [\n                           keys.BACKSPACE,\n                           keys.TAB,\n                           keys.PAGEUP,\n                           keys.PAGEDOWN,\n                           keys.END,\n                           keys.HOME,\n                           keys.LEFT,\n                           keys.UP,\n                           keys.RIGHT,\n                           keys.DOWN,\n                           keys.INSERT,\n                           keys.DELETE\n                        ];\n\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function() {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n\n                        if (e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) {\n                            editor._handleSpaceAndNewLines();\n                        }\n\n                        editor.keyboard.keyup(e);\n                    },\n                    \"click\": function(e) {\n                        var dom = kendo.ui.editor.Dom, range;\n\n                        if (dom.name(e.target) === \"img\") {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    \"cut copy paste drop dragover\": function(e) {\n                        editor.clipboard[\"on\" + e.type](e);\n                    },\n                    \"focusin\": function() {\n                        if (editor.body.hasAttribute(\"contenteditable\")) {\n                            $(this).addClass(\"k-active\");\n                            // To be moved to the Editor\n                            editor._showWindow();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    \"focusout\": function() {\n                        setTimeout(function() {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            // All below to be moved to the Editor\n                            var toolbar = editor.toolbar;\n\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = editor.windowInstance.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n\n                            if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                                $(body).removeClass(\"k-active\");\n                                editor._hideWindow();\n                            }\n\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n\n            _initializeImmutables: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n\n            _initializePlaceholder: function() {\n                var that = this,\n                    placeholder = that.options.placeholder,\n                    style, $head;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                style = `<style id='${PLACEHOLDER_TAG_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >.` +\n                            PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                        \"</style>\";\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n\n                that._togglePlaceholder(!that.value().trim());\n            },\n\n            _initToolbar: function(toolbarContainer) {\n                var that = this,\n                    tools, defaults, toolbarOptions;\n\n                that.tools = [];\n                [tools, defaults] = that._processToolbarItems(that.options.tools);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this),\n                    navigateOnTab: that.options.navigateOnTab,\n                    evaluateTemplates: true\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n                that.bind(\"select\", that._refreshTools.bind(that));\n\n                toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                    if (!$(e.target).is(\"input\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!that.textarea) {\n                    that._initToolbarWindow(toolbarContainer);\n                }\n            },\n\n            _initToolbarWindow: function(toolbarEl) {\n                var that = this;\n\n                this.windowInstance = toolbarEl\n                    .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                    .parent()\n                    .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                    .kendoWindow({\n                        title: false,\n                        resizable: false,\n                        draggable: {\n                            dragHandle: \".k-editortoolbar-dragHandle\"\n                        },\n                        animation: {\n                            open: { effects: \"fade:in\" },\n                            close: { effects: \"fade:out\" }\n                        },\n                        minHeight: 42,\n                        visible: false,\n                        autoFocus: false,\n                        actions: [],\n                        dragend: function() {\n                            this._moved = true;\n                        }\n                    })\n                    .on(\"mousedown\", function(e) {\n                        if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                            that.toolbar.preventPopupHide = true;\n                        }\n                    })\n                    .on(\"focusout\", function() {\n                        that.element.focusout();\n                    })\n                    .data(\"kendoWindow\");\n            },\n\n            _mousedown: function(e) {\n                var editor = this;\n                editor._selectionStarted = true;\n\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n\n                // handle middle-click and ctrl-click on links\n                if (browser.gecko) {\n                    return;\n                }\n\n                var target = $(e.target).closest(\"a[href]\");\n\n                if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                    window.open(target.attr(\"href\"), \"_new\");\n                }\n\n                if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                    setTimeout(function() {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n\n            _mouseup: function(e) {\n                var that = this;\n\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n\n                if (that._selectionStarted) {\n                    setTimeout(function() {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n\n            _populateValue: function(options, domElement) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    value, comments;\n\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    // indented HTML introduces problematic ranges in IE\n                    value = domElement.value;\n\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n\n                    // revert encoding of value when content is fetched from cache\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n\n                that.value(value || '\\ufeff');\n            },\n\n            _resetGroups: function(current) {\n                var result = {};\n\n                Object.keys(current).map(key => {\n                    result[key + \"_\"] = current[key];\n                });\n\n                return result;\n            },\n\n            _processToolbarItems: function(optionsTools) {\n                var flatDefaultTools = {},\n                    processedObject = {},\n                    tools = [],\n                    currentGroups = $.extend(true, {}, toolGroups),\n                    i, j, t, name, guidGroupName;\n\n                for (i = 0; i < optionsTools.length; i++) {\n                    t = optionsTools[i];\n\n                    if (Array.isArray(t)) {\n                        guidGroupName = kendo.guid();\n\n                        for (j = 0; j < t.length; j++) {\n                            [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                            if (!name) {\n                                continue;\n                            }\n\n                            flatDefaultTools[name].gr = guidGroupName;\n                        }\n                    } else {\n                        [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        } else if (name === \"separator\") {\n                            currentGroups = this._resetGroups(currentGroups);\n                        }\n\n                        Object.keys(currentGroups).map(key => {\n                            var group = currentGroups[key];\n\n                            if (group.includes(name)) {\n                                flatDefaultTools[name].gr = key;\n                            }\n                        });\n                    }\n                }\n\n                Object.values(flatDefaultTools).map((tool) => {\n                    var group = tool.gr;\n\n                    delete tool.gr;\n\n                    if (group === undefined$1) {\n                        processedObject[tool.name] = tool;\n                    } else {\n                        if (!processedObject[group]) {\n                            processedObject[group] = [];\n                        }\n\n                        processedObject[group].push(tool);\n                    }\n                });\n\n                tools = Object.values(processedObject).map((g) => {\n                    var result;\n\n                    if (g.length) {\n                        result = g.map((to) => to.name);\n                    } else {\n                        result = g.name;\n                    }\n\n                    if (result.length === 1) {\n                        result = result[0];\n                    }\n\n                    return result;\n                });\n\n                return [tools, flatDefaultTools];\n            },\n\n            _processDefaultTool: function(tool, defaultTools) {\n                var name = tool.name,\n                    result = {},\n                    options;\n\n                if ($.isPlainObject(tool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result = extend({}, defaultTools[name]);\n                        extend(result.options, tool);\n                    } else {\n                        // custom tool\n                        options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        result = {\n                            options: options\n                        };\n\n                        name = options.name;\n                    }\n                } else if (defaultTools[tool]) {\n                    name = tool;\n                    result = defaultTools[name];\n                } else {\n                    return null;\n                }\n\n                this.tools[name] = result;\n\n                return result;\n            },\n\n            _processToolOptions: function(t, flatDefaultTools) {\n                var that = this,\n                    defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n                tool = this._processDefaultTool(t, defaultTools);\n\n                if (!tool) {\n                    return [flatDefaultTools, null];\n                }\n\n                options = tool.options;\n                name = options.name;\n                uiOptions = options.ui || {};\n                icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n                // We want to preserve any custom properties from the original tool object.\n                originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n                delete originalOptions.items;\n\n                toolOptions = $.extend({\n                    name: options.name,\n                    command: options.command,\n                    template: options.template,\n                    type: \"button\",\n                    icon: icon,\n                    showText: \"overflow\",\n                    showIcon: \"both\"\n                }, uiOptions, originalOptions);\n\n                if (options.tooltip) {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes.title = options.tooltip;\n                }\n                if (options.exec) {\n                    toolOptions.click = options.exec.bind(that);\n                    delete toolOptions.exec;\n                }\n\n                if (toolOptions.component === \"ColorPicker\") {\n                    if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                        palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                        view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                        toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                        toolOptions.componentOptions.views = [view];\n                        toolOptions.componentOptions.preview = view === \"gradient\";\n                        toolOptions.componentOptions.input = view === \"gradient\";\n                        toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                        if (view === \"gradient\") {\n                            delete toolOptions.componentOptions.columns;\n                        }\n                    }\n                    if (view === \"palette\" && options.columns) {\n                        toolOptions.componentOptions.columns = options.columns;\n                    }\n                }\n\n                if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                    if (!toolOptions.componentOptions) {\n                        toolOptions.componentOptions = {};\n                    }\n\n                    if (!toolOptions.componentOptions.dataSource) {\n                        if (that.options[name] && Array.isArray(that.options[name])) {\n                            toolOptions.componentOptions.dataSource = that.options[name];\n                        } else {\n                            toolOptions.componentOptions.dataSource = options.items;\n                        }\n                    }\n                }\n                if (toolOptions.template) {\n                    delete toolOptions.type;\n                }\n\n                shortcuts = this._shortcutSequence(name);\n\n                if (shortcuts !== \"\") {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n                }\n\n                flatDefaultTools[name] = toolOptions;\n\n                return [flatDefaultTools, name];\n            },\n\n            _refreshTools: function() {\n                var that = this,\n                    range = that.getRange(),\n                    editorNS = kendo.ui.editor,\n                    rangeUtils = editorNS.RangeUtils,\n                    nodes = rangeUtils.textNodes(range),\n                    immutables = that.options.immutables,\n                    immutablesContext = that._immutablesContext(range),\n                    defaultTools = that.tools;\n\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                    .each(function() {\n                        var toolName = this.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName],\n                            ui;\n\n                        if (tool) {\n                            ui = $(this);\n\n                            if (tool.update) {\n                                tool.update(ui, nodes, that.undoRedoStack);\n                            }\n\n                            if (immutables) {\n                                that._updateImmutablesState(tool, ui, immutablesContext);\n                            }\n                        }\n                    });\n            },\n\n            _registerHandler: function(element, type, handler) {\n                var editor = this;\n                var NS = \".kendoEditor\";\n                var eventNames;\n                var i;\n\n                element = $(element);\n\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        //map the original event to handle interaction on mobile platforms\n                        eventNames = kendo.applyEventMap(type).split(\" \");\n\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n\n            _runPostContentKeyCommands: function(e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n\n                this._handleSpaceAndNewLines();\n            },\n\n            _handleSpaceAndNewLines: function() {\n                const that = this,\n                    refreshDelay = that.options.formattingMarksRefreshDelay,\n                    editorNS = kendo.ui.editor,\n                    applyFormattingMarks = editorNS.applyFormattingMarks,\n                    clearFormattingMarksOverlay = editorNS.clearFormattingMarksOverlay;\n\n                if (that._toggledFormattingMarks) {\n                    if (that._formattingMarksOverlay.children().length) {\n                        clearFormattingMarksOverlay(that);\n                    }\n\n                    if (refreshDelay) {\n                        clearTimeout(that._formattingMarksTimeout);\n                        that._formattingMarksTimeout = setTimeout(() => applyFormattingMarks(that), refreshDelay);\n                    } else {\n                        applyFormattingMarks(that);\n                    }\n\n                }\n            },\n\n            _selectionChange: function() {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger(\"select\", {});\n            },\n\n            _setOptionsTools: function(optionsTools) {\n                var that = this,\n                    toolbar = that.toolbar,\n                    toolbarContainer = toolbar.element,\n                    tools, defaults, toolbarOptions;\n\n                toolbar.destroy();\n                toolbarContainer.empty();\n\n                that.tools = [];\n                [tools, defaults] = that._processToolbarItems(optionsTools);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this)\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n            },\n\n            _setNativeTools: function() {\n                var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    i;\n\n                for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                    if (!this.tools[NATIVE_TOOLS[i]]) {\n                        this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                    }\n                }\n            },\n\n            _setupHeight: function(type) {\n                var that = this;\n\n                if (type == \"textarea\") {\n                    setTimeout(function() {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n            },\n\n            _setupKeyboard: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n            },\n\n            _setupType: function(element) {\n                var domElement = element[0],\n                    type = kendo.ui.editor.Dom.name(domElement),\n                    id = domElement.id,\n                    toolbarContainer;\n\n                if (type == \"textarea\") {\n                    this._wrapTextarea();\n\n                    toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                    if (!id) {\n                        id = kendo.guid();\n                        domElement.setAttribute(\"id\", id);\n                    }\n\n                    toolbarContainer.attr(\"aria-controls\", id);\n                } else {\n                    this.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n                    toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n                }\n\n                return toolbarContainer;\n            },\n\n            _shortcutSequence: function(name) {\n                var tool = kendo.ui.Editor.defaultTools[name],\n                    res = \"\",\n                    options;\n\n                if (!tool || !tool.options) {\n                    return res;\n                }\n\n                options = tool.options;\n\n                if (options.ctrl) {\n                    res += \"Ctrl+\";\n                }\n\n                if (options.shift) {\n                    res += \"Shift+\";\n                }\n\n                if (options.alt) {\n                    res += \"Alt+\";\n                }\n\n                if (options.key) {\n                    res += options.key;\n                }\n\n                return res;\n            },\n\n            _spellCorrect: function(editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n\n                this._registerHandler(editor.body, {\n                    \"contextmenu\": function() {\n                        editor.one(\"select\", function() {\n                            beforeCorrection = null;\n                        });\n\n                        editor._spellCorrectTimeout = setTimeout(function() {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    \"input\": function() {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n\n            _togglePlaceholder: function(show) {\n                var that = this,\n                    body = that.body,\n                    $body = $(body),\n                    placeholder = that.options.placeholder;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                $body.attr('aria-label', function() {\n                    return show ? placeholder : \"\";\n                });\n\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n\n            _toolbarFocused: function() {\n                var active = kendo._activeElement(),\n                    popup = this.windowInstance,\n                    overflowPopup = this.overflowPopup;\n\n                return (popup && $(active).closest(popup.wrapper).length) ||\n                    (overflowPopup && overflowPopup.visible());\n            },\n\n            _updateImmutablesState: function(tool, ui, immutablesContext) {\n                var toolbar = this.toolbar,\n                    name = tool.name,\n                    uiElement = ui.closest(\".k-toolbar-tool\"),\n                    trackImmutables = tool.options.trackImmutables,\n                    editorNS = kendo.ui.editor;\n\n                if (trackImmutables === undefined$1) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n\n                if (trackImmutables) {\n                    if (immutablesContext) {\n                        toolbar.hide(uiElement);\n                    } else {\n                        toolbar.show(uiElement);\n                    }\n                }\n            },\n\n            _wrapTextarea: function() {\n                var that = this,\n                    textarea = that.element,\n                    w = textarea[0].style.width,\n                    h = textarea[0].style.height,\n                    template = EditorUtils.editorWrapperTemplate(),\n                    editorWrap = $(template).insertBefore(textarea),\n                    editArea = editorWrap.find(\".k-editable-area\");\n\n                editorWrap.css({\n                    \"width\": w,\n                    \"height\": h\n                });\n\n                textarea.attr(\"autocomplete\", \"off\")\n                    .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n\n            // Resizing methods\n            _resizable: function() {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n                if (isResizable && this.textarea) {\n                    var draggableElement = $(\"<div class='k-resize-handle'>\" + kendo.ui.icon(\"caret-br\") + \"</div>\")\n                        .insertAfter(this.textarea);\n\n                    this.wrapper.addClass('k-resizable');\n\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function(e) {\n                            var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                            this.initialSize = editor.height();\n                            editor.find(\".k-editable-area\").last().append(\"<div class='k-overlay' />\");\n                        },\n                        resize: function(e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n\n                            newSize = Math.min(max, Math.max(min, newSize));\n\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function() {\n                            this.editor.find(\".k-overlay\").remove();\n                            this.editor = null;\n                        }\n                    }));\n\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n\n            _destroyResizings: function() {\n                var editor = this;\n\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n\n            _initializeElementResizing: function() {\n                var editor = this;\n\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n                editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n\n            _destroyElementResizing: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n\n            _showElementResizeHandles: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n\n            _initializeColumnResizing: function() {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n\n            _destroyColumnResizing: function() {\n                var editor = this;\n\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n\n            _initializeRowResizing: function() {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n\n            _destroyRowResizing: function() {\n                var editor = this;\n\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n\n            // ToolBar Window methods\n            _getWindowWidth: function() {\n                var that = this,\n                    wrapper = that.windowInstance.wrapper,\n                    editorElement = that.element;\n\n                return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n            },\n\n            _hideWindow: function() {\n                if (this.windowInstance) {\n                    this.windowInstance.close();\n                }\n            },\n\n            _overlapsWindow: function(box) {\n                var toolbarWrapper = this.windowInstance.wrapper,\n                    toolbarWrapperOffset = toolbarWrapper.offset(),\n                    toolbarWrapperLeft = toolbarWrapperOffset.left,\n                    toolbarWrapperTop = toolbarWrapperOffset.top,\n                    boxOffset = box.offset(),\n                    boxOffsetLeft = boxOffset.left,\n                    boxOffsetTop = boxOffset.top;\n\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                        boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                        boxOffsetTop + box.height() < toolbarWrapperTop ||\n                        boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n\n            _showWindow: function() {\n                var that = this,\n                    windowInstance = that.windowInstance,\n                    wrapper, editorElement, editorOffset,\n                    browser = kendo.support.browser;\n\n                if (windowInstance) {\n                    wrapper = windowInstance.wrapper;\n                    editorElement = that.element;\n\n                    if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n\n                        // track content position when other parts of page change\n                        if (!windowInstance._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n\n                        if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                            setTimeout(function() {\n                                windowInstance.open();\n                            }, 0);\n                        } else {\n                            windowInstance.open();\n                        }\n                    }\n                }\n            }\n        });\n\n        Editor.defaultTools = {};\n\n        kendo.ui.plugin(Editor);\n\n        var Tool = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            command: function(commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n\n            update: $.noop\n        });\n\n        Tool.exec = function(editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function(ui, nodes, undoRedoStack) {\n                var that = this,\n                    name = that.options.name,\n                    toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n                switch (name) {\n                    case \"undo\":\n                        toolbar.enable(ui, undoRedoStack.canUndo());\n                        break;\n                    case \"redo\":\n                        toolbar.enable(ui, undoRedoStack.canRedo());\n                        break;\n                    default:\n                        break;\n                }\n\n                ui.removeAttr(\"disabled\");\n            }\n        });\n\n        EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n        EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n        EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n        // Exports ================================================================\n\n        var emptyElementContent = '\\ufeff';\n        var emptyTableCellContent = emptyElementContent;\n\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n        }\n\n        extend(kendo.ui, {\n            editor: {\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function() {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function() {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n\n                if (this.trigger(\"pdfExport\", args)) {\n                    return;\n                }\n\n                var options = this.options.pdf;\n\n                this._drawPDF(progress)\n                .then(function(root) {\n                    return kendo.drawing.exportPDF(root, options);\n                })\n                .done(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                })\n                .fail(function(err) {\n                    progress.reject(err);\n                });\n\n                return promise;\n            };\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        map = $.map,\n        extend = $.extend,\n        browser = kendo.support.browser,\n        STYLE = \"style\",\n        FLOAT = \"float\",\n        CSSFLOAT = \"cssFloat\",\n        STYLEFLOAT = \"styleFloat\",\n        CLASS = \"class\",\n        KMARKER = \"k-marker\";\n\n    function makeMap(items) {\n        var obj = {},\n            i, len;\n\n        for (i = 0, len = items.length; i < len; i++) {\n            obj[items[i]] = true;\n        }\n        return obj;\n    }\n\n    var empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n        nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n        blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n        block = makeMap(blockElements),\n        selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n        inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n        inline = makeMap(inlineElements),\n        fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n        nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\n    var normalize = function(node) {\n        if (node.nodeType == 1) {\n            node.normalize();\n        }\n    };\n\n    if (browser.msie && browser.version >= 8) {\n        normalize = function(parent) {\n            if (parent.nodeType == 1 && parent.firstChild) {\n                var prev = parent.firstChild,\n                    node = prev;\n\n                normalize(node);\n\n                while (true) {\n                    node = node.nextSibling;\n\n                    if (!node) {\n                        break;\n                    }\n\n                    normalize(node);\n\n                    if (node.nodeType == 3 && prev.nodeType == 3) {\n                        node.nodeValue = prev.nodeValue + node.nodeValue;\n                        Dom.remove(prev);\n                    }\n\n                    prev = node;\n                }\n            }\n        };\n    }\n\n    var whitespace = /^\\s+$/,\n        emptyspace = /^[\\n\\r\\t]+$/,\n        rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n        bom = /\\ufeff/g,\n        whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n        persistedScrollTop,\n        cssAttributes =\n               (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n                \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n                \"border-top-style,border-top-width,border-top-color,\" +\n                \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n                \"border-left-style,border-left-width,border-left-color,\" +\n                \"border-right-style,border-right-width,border-right-color,\" +\n                \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n               ).split(\",\"),\n        htmlRe = /[<>\\&]/g,\n        entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n        entityTable = {\n                34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n                160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n                165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n                170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n                175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n                180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n                185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n                190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n                195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n                200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n                205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n                210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n                215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n                220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n                225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n                230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n                235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n                240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n                245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n                250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n                255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n                916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n                921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n                926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n                932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n                937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n                949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n                954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n                959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n                964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n                969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n                8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n                8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n                8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n                8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n                8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n                8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n                8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n                8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n                8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n                8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n                8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n                8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n                8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n                9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n                338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n                710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n                8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n                8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n                8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n                8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n            };\n\n    var Dom = {\n        block: block,\n        inline: inline,\n\n        findNodeIndex: function(node, skipText) {\n            var i = 0;\n\n            if (!node) {\n                return -1;\n            }\n\n            while (true) {\n                node = node.previousSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                if (!(skipText && node.nodeType == 3)) {\n                    i++;\n                }\n            }\n\n            return i;\n        },\n\n        isDataNode: function(node) {\n            return node && node.nodeValue !== null && node.data !== null;\n        },\n\n        isAncestorOf: function(parent, node) {\n            try {\n                return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isAncestorOrSelf: function(root, node) {\n            return Dom.isAncestorOf(root, node) || root == node;\n        },\n\n        findClosestAncestor: function(root, node) {\n            if (Dom.isAncestorOf(root, node)) {\n                while (node && node.parentNode != root) {\n                    node = node.parentNode;\n                }\n            }\n\n            return node;\n        },\n\n        getAllComments: function(rootElem) {\n            var comments = [];\n            // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n            var iterator = document.createNodeIterator(rootElem,\n                NodeFilter.SHOW_COMMENT,\n                function() {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n\n            var curNode = iterator.nextNode();\n            while (curNode) {\n                comments.push(curNode.nodeValue);\n                curNode = iterator.nextNode();\n            }\n            return comments;\n        },\n\n        getNodeLength: function(node) {\n            return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n        },\n\n        splitDataNode: function(node, offset) {\n            var newNode = node.cloneNode(false);\n            var denormalizedText = \"\";\n            var iterator = node.nextSibling;\n            var temp;\n\n            while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                denormalizedText += iterator.nodeValue;\n                temp = iterator;\n                iterator = iterator.nextSibling;\n                Dom.remove(temp);\n            }\n\n            node.deleteData(offset, node.length);\n            newNode.deleteData(0, offset);\n            newNode.nodeValue += denormalizedText;\n            Dom.insertAfter(newNode, node);\n        },\n\n        attrEquals: function(node, attributes) {\n            for (var key in attributes) {\n                var value = node[key];\n\n                if (key == FLOAT) {\n                    value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                }\n\n                if (typeof value == \"object\") {\n                    if (!Dom.attrEquals(value, attributes[key])) {\n                        return false;\n                    }\n                } else if (value != attributes[key]) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        blockParentOrBody: function(node) {\n            return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n        },\n\n        blockParents: function(nodes) {\n            var blocks = [],\n                i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                if (block && $.inArray(block, blocks) < 0) {\n                    blocks.push(block);\n                }\n            }\n\n            return blocks;\n        },\n\n        windowFromDocument: function(document) {\n            return document.defaultView || document.parentWindow;\n        },\n\n        normalize: normalize,\n        blockElements: blockElements,\n        nonListBlockElements: nonListBlockElements,\n        inlineElements: inlineElements,\n        empty: empty,\n        fillAttrs: fillAttrs,\n        nodeTypes: {\n            ELEMENT_NODE: 1,\n            ATTRIBUTE_NODE: 2,\n            TEXT_NODE: 3,\n            CDATA_SECTION_NODE: 4,\n            ENTITY_REFERENCE_NODE: 5,\n            ENTITY_NODE: 6,\n            PROCESSING_INSTRUCTION_NODE: 7,\n            COMMENT_NODE: 8,\n            DOCUMENT_NODE: 9,\n            DOCUMENT_TYPE_NODE: 10,\n            DOCUMENT_FRAGMENT_NODE: 11,\n            NOTATION_NODE: 12\n        },\n\n        toHex: function(color) {\n            var matches = rgb.exec(color);\n\n            if (!matches) {\n                return color;\n            }\n\n            return \"#\" + map(matches.slice(1), function(x) {\n                x = parseInt(x, 10).toString(16);\n                return x.length > 1 ? x : \"0\" + x;\n            }).join(\"\");\n        },\n\n        encode: function(value, options) {\n            var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n            return value.replace(encodableChars, function(c) {\n                var charCode = c.charCodeAt(0);\n                var entity = entityTable[charCode];\n                return entity ? '&' + entity + ';' : c;\n            });\n        },\n        isBom: function(node) {\n            return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n        },\n        stripBom: function(text) {\n            return (text || \"\").replace(bom, \"\");\n        },\n\n        stripBomNode: function(node) {\n            if (Dom.isBom(node)) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        insignificant: function(node) {\n            var attr = node.attributes;\n\n            return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n        },\n        tableCell: function(node) {\n            return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n        },\n        significantNodes: function(nodes) {\n            return $.grep(nodes, function(child) {\n                var name = Dom.name(child);\n\n                if (name == 'br') {\n                    return false;\n                } else if (Dom.insignificant(child)) {\n                    return false;\n                } else if (Dom.emptyTextNode(child)) {\n                    return false;\n                } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        emptyTextNode: function(node) {\n            return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n        },\n\n        emptyNode: function(node) {\n            return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n        },\n\n        name: function(node) {\n            return node.nodeName.toLowerCase();\n        },\n\n        significantChildNodes: function(node) {\n            return $.grep(node.childNodes, function(child) {\n                return child.nodeType != 3 || !Dom.isWhitespace(child);\n            });\n        },\n\n        getTextNodes: function(body, nodes) {\n            const childNodes = body.childNodes;\n            nodes = nodes || [];\n\n            for (const node of childNodes) {\n                if (node.nodeType === this.nodeTypes.TEXT_NODE &&\n                    (blockElements.includes(Dom.name(node.parentNode)) ||\n                    inlineElements.includes(Dom.name(node.parentNode)))) {\n                    nodes.push(node);\n                } else if (node.nodeType === this.nodeTypes.ELEMENT_NODE) {\n                    this.getTextNodes(node, nodes);\n                }\n            }\n\n            return nodes;\n        },\n\n        lastTextNode: function(node) {\n            var result = null;\n\n            if (node.nodeType == 3) {\n                return node;\n            }\n\n            for (var child = node.lastChild; child; child = child.previousSibling) {\n                result = Dom.lastTextNode(child);\n\n                if (result) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        is: function(node, nodeName) {\n            return node && Dom.name(node) == nodeName;\n        },\n\n        isMarker: function(node) {\n            return node.className == KMARKER;\n        },\n\n        isWhitespace: function(node) {\n            return whitespace.test(node.nodeValue);\n        },\n\n        allowsTextContent: function(node) {\n            var result = true;\n\n            nonEmptyNonTextContentElements.every(function(name) {\n                if (Dom.is(node, name)) {\n                    result = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        allWhitespaceContent: function(node) {\n            var child = node.firstChild;\n            while (child && Dom.isWhitespace(child)) {\n                child = child.nextSibling;\n            }\n\n            return !child;\n        },\n\n        isEmptyspace: function(node) {\n            return emptyspace.test(node.nodeValue);\n        },\n\n        htmlIndentSpace: function(node) {\n            if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                return false;\n            }\n\n            if (emptyspace.test(node.nodeValue)) {\n                return true;\n            }\n\n            var sibling = function(el, direction) {\n                while (el[direction]) {\n                    el = el[direction];\n                    if (Dom.significantNodes([el]).length > 0) {\n                        return el;\n                    }\n                }\n            };\n\n            var parent = node.parentNode;\n            var prev = sibling(node, \"previousSibling\");\n            var next = sibling(node, \"nextSibling\");\n\n            if (bom.test(node.nodeValue)) {\n                return !!(prev || next);\n            }\n\n            if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n                return true;\n            }\n\n            if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n                var isPrevBlock = prev && Dom.isBlock(prev);\n                var isNextBlock = next && Dom.isBlock(next);\n                if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        isBlock: function(node) {\n            return block[Dom.name(node)];\n        },\n\n        isSelfClosing: function(node) {\n            return selfClosing[Dom.name(node)];\n        },\n\n        isEmpty: function(node) {\n            return empty[Dom.name(node)];\n        },\n\n        isInline: function(node) {\n            return inline[Dom.name(node)];\n        },\n\n        isImg: function(node) {\n            return Dom.name(node) == \"img\";\n        },\n\n        isBr: function(node) {\n            return Dom.name(node) == \"br\";\n        },\n\n        list: function(node) {\n            var name = node ? Dom.name(node) : \"\";\n            return name == \"ul\" || name == \"ol\" || name == \"dl\";\n        },\n\n        scrollContainer: function(doc) {\n            var wnd = Dom.windowFromDocument(doc),\n                scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n            if (scrollContainer.compatMode == 'BackCompat') {\n                scrollContainer = scrollContainer.body;\n            } else {\n                scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n            }\n\n            return scrollContainer;\n        },\n\n        scrollTo: function(node, toStart) {\n            var doc = node.ownerDocument;\n            var wnd = Dom.windowFromDocument(doc);\n            var windowHeight = wnd.innerHeight;\n            var scrollContainer = Dom.scrollContainer(doc);\n            var element, elementTop, elementHeight, marker;\n\n            if (Dom.isDataNode(node)) {\n                if (toStart) {\n                    marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                    Dom.insertBefore(marker, node);\n                    element = $(marker);\n                } else {\n                    element = $(node.parentNode);\n                }\n            } else {\n                element = $(node);\n            }\n\n            elementTop = element.offset().top;\n            elementHeight = element[0].offsetHeight;\n\n            if (toStart || !elementHeight) {\n                elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                                Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                                15;\n            }\n\n            if (marker) {\n                Dom.remove(marker);\n            }\n\n            if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n            }\n        },\n\n        persistScrollTop: function(doc) {\n            persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n        },\n\n        offset: function(target, offsetParent) {\n            var result = { top: target.offsetTop, left: target.offsetLeft };\n            var parent = target.offsetParent;\n\n            while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        },\n\n        restoreScrollTop: function(doc) {\n            if (typeof persistedScrollTop == \"number\") {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                persistedScrollTop = undefined;\n            }\n        },\n\n        insertAt: function(parent, newElement, position) {\n            parent.insertBefore(newElement, parent.childNodes[position] || null);\n        },\n\n        insertBefore: function(newElement, referenceElement) {\n            if (referenceElement.parentNode) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n            } else {\n                return referenceElement;\n            }\n        },\n\n        insertAfter: function(newElement, referenceElement) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n        },\n\n        remove: function(node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        removeChildren: function(node) {\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n        },\n\n        removeTextSiblings: function(node) {\n            var parentNode = node.parentNode;\n\n            while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                parentNode.removeChild(node.nextSibling);\n            }\n\n            while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                parentNode.removeChild(node.previousSibling);\n            }\n        },\n\n        trim: function(parent) {\n            for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                var node = parent.childNodes[i];\n                if (Dom.isDataNode(node)) {\n                    if (!Dom.stripBom(node.nodeValue).length) {\n                        Dom.remove(node);\n                    }\n                } else if (node.className != KMARKER) {\n                    Dom.trim(node);\n\n                    if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                        (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                        Dom.remove(node);\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        closest: function(node, tags) {\n            if (typeof tags === \"string\") {\n                tags = [tags];\n            }\n\n            while (node && tags.indexOf(Dom.name(node)) < 0) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        closestBy: function(node, condition, rootCondition) {\n            while (node && !condition(node)) {\n                if (rootCondition && rootCondition(node)) {\n                    return null;\n                }\n                node = node.parentNode;\n            }\n            return node;\n        },\n\n        sibling: function(node, direction) {\n            do {\n                node = node[direction];\n            } while (node && node.nodeType != 1);\n\n            return node;\n        },\n\n        next: function(node) {\n            return Dom.sibling(node, \"nextSibling\");\n        },\n\n        prev: function(node) {\n            return Dom.sibling(node, \"previousSibling\");\n        },\n\n        parentOfType: function(node, tags) {\n            do {\n                node = node.parentNode;\n            } while (node && !(Dom.ofType(node, tags)));\n\n            return node;\n        },\n\n        ofType: function(node, tags) {\n            return $.inArray(Dom.name(node), tags) >= 0;\n        },\n\n        changeTag: function(referenceElement, tagName, skipAttributes) {\n            var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n                attributes = referenceElement.attributes,\n                i, len, name, value, attribute;\n\n            if (!skipAttributes) {\n                for (i = 0, len = attributes.length; i < len; i++) {\n                    attribute = attributes[i];\n                    if (attribute.specified) {\n                        // IE < 8 cannot set class or style via setAttribute\n                        name = attribute.nodeName;\n                        value = attribute.nodeValue;\n                        if (name == CLASS) {\n                            newElement.className = value;\n                        } else if (name == STYLE) {\n                            newElement.style.cssText = referenceElement.style.cssText;\n                        } else {\n                            newElement.setAttribute(name, value);\n                        }\n                    }\n                }\n            }\n\n            while (referenceElement.firstChild) {\n                newElement.appendChild(referenceElement.firstChild);\n            }\n\n            Dom.insertBefore(newElement, referenceElement);\n            Dom.remove(referenceElement);\n            return newElement;\n        },\n\n        editableParent: function(node) {\n            while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        wrap: function(node, wrapper) {\n            Dom.insertBefore(wrapper, node);\n            wrapper.appendChild(node);\n            return wrapper;\n        },\n\n        unwrap: function(node) {\n            var parent = node.parentNode;\n            while (node.firstChild) {\n                parent.insertBefore(node.firstChild, node);\n            }\n\n            parent.removeChild(node);\n        },\n\n        wrapper: function(node) {\n            var wrapper = Dom.closestBy(node, function(el) {\n                return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n            });\n\n            return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n        },\n\n        isChildOfBaseContainer: function(node) {\n            return $(node).parent().is(\"body,.k-editor\");\n        },\n\n        create: function(document, tagName, attributes) {\n            return Dom.attr(document.createElement(tagName), attributes);\n        },\n\n        createEmptyNode: function(document, tagName, attributes) {\n            var node = Dom.attr(document.createElement(tagName), attributes);\n            node.innerHTML = \"\\ufeff\";\n            return node;\n        },\n\n        attr: function(element, attributes) {\n            attributes = extend({}, attributes);\n\n            if (attributes && STYLE in attributes) {\n                Dom.style(element, attributes.style);\n                delete attributes.style;\n            }\n\n            for (var attr in attributes) {\n                if (attributes[attr] === null) {\n                    element.removeAttribute(attr);\n                    delete attributes[attr];\n                } else if (attr == \"className\") {\n                    element[attr] = attributes[attr];\n                }\n            }\n\n            return extend(element, attributes);\n        },\n\n        mergeAttributes: function(origin, target, traverseCss) {\n            if (!origin.attributes.length) {\n                return;\n            }\n\n            $.each(origin.attributes, function() {\n                if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                    $(target).attr(this.name, this.value);\n                }\n\n                if (traverseCss && this.name === STYLE) {\n                    $.each(origin.style, function() {\n                        target.style[this] = origin.style[this];\n                    });\n                }\n            });\n        },\n\n        style: function(node, value) {\n            $(node).css(value || {});\n        },\n\n        unstyle: function(node, value) {\n            for (var key in value) {\n                if (key == FLOAT) {\n                    key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                }\n\n                node.style[key] = \"\";\n            }\n\n            if (node.style.cssText === \"\") {\n                node.removeAttribute(STYLE);\n            }\n        },\n\n        inlineStyle: function(body, name, attributes) {\n            var span = $(Dom.create(body.ownerDocument, name, attributes)),\n                style;\n\n            body.appendChild(span[0]);\n\n            style = map(cssAttributes, function(value) {\n                if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                    return \"line-height:1.5\";\n                } else {\n                    return value + \":\" + span.css(value);\n                }\n            }).join(\";\");\n\n            span.remove();\n\n            return style;\n        },\n\n        getEffectiveBackground: function(element) {\n            var backgroundStyle = element.css(\"background-color\") || \"\";\n\n            if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n                return backgroundStyle;\n            } else if (element[0].tagName.toLowerCase() === \"html\") {\n                return \"Window\";\n            } else {\n                return Dom.getEffectiveBackground(element.parent());\n            }\n        },\n\n        innerText: function(node) {\n            var text = node.innerHTML;\n            text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n            text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n            return text;\n        },\n\n        removeClass: function(node, classNames) {\n            var className = \" \" + node.className + \" \",\n                classes = classNames.split(\" \"),\n                i, len;\n\n            for (i = 0, len = classes.length; i < len; i++) {\n                className = className.replace(\" \" + classes[i] + \" \", \" \");\n            }\n\n            className = kendo.trim(className);\n\n            if (className.length) {\n                node.className = className;\n            } else {\n                node.removeAttribute(CLASS);\n            }\n        },\n\n        commonAncestor: function() {\n            var count = arguments.length,\n                paths = [],\n                minPathLength = Infinity,\n                output = null,\n                i, ancestors, node, first, j;\n\n            if (!count) {\n                return null;\n            }\n\n            if (count == 1) {\n                return arguments[0];\n            }\n\n            for (i = 0; i < count; i++) {\n                ancestors = [];\n                node = arguments[i];\n                while (node) {\n                    ancestors.push(node);\n                    node = node.parentNode;\n                }\n                paths.push(ancestors.reverse());\n                minPathLength = Math.min(minPathLength, ancestors.length);\n            }\n\n            if (count == 1) {\n                return paths[0][0];\n            }\n\n            for (i = 0; i < minPathLength; i++) {\n                first = paths[0][i];\n\n                for (j = 1; j < count; j++) {\n                    if (first != paths[j][i]) {\n                        return output;\n                    }\n                }\n\n                output = first;\n            }\n            return output;\n        },\n\n        closestSplittableParent: function(nodes) {\n            var result;\n\n            if (nodes.length == 1) {\n                result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n            } else {\n                result = Dom.commonAncestor.apply(null, nodes);\n            }\n\n            if (!result) {\n                result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n            }\n\n            if (Dom.isInline(result)) {\n                result = Dom.blockParentOrBody(result);\n            }\n\n            var editableParents = map(nodes, Dom.editableParent);\n            var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n            if ($.contains(result, editableAncestor)) {\n                result = editableAncestor;\n            }\n\n            return result;\n        },\n\n        closestEditable: function(node, types) {\n            var closest;\n            var editable = Dom.editableParent(node);\n\n            if (Dom.ofType(node, types)) {\n                closest = node;\n            } else {\n                closest = Dom.parentOfType(node, types);\n            }\n\n            if (closest && editable && $.contains(closest, editable)) {\n                closest = editable;\n            } else if (!closest && editable) {\n                closest = editable;\n            }\n\n            return closest;\n        },\n\n        closestEditableOfType: function(node, types) {\n            var editable = Dom.closestEditable(node, types);\n\n            if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n                return editable;\n            }\n        },\n\n        filter: function(tagName, nodes, invert) {\n            var filterFn = function(node) {\n                return Dom.name(node) == tagName;\n            };\n\n            return Dom.filterBy(nodes, filterFn, invert);\n        },\n\n        filterBy: function(nodes, condition, invert) {\n            var i = 0;\n            var len = nodes.length;\n            var result = [];\n            var match;\n\n            for (; i < len; i++) {\n                match = condition(nodes[i]);\n                if ((match && !invert) || (!match && invert)) {\n                    result.push(nodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        ensureTrailingBreaks: function(node) {\n            var elements = $(node).find(\"p,td,th\");\n            var length = elements.length;\n            var i = 0;\n\n            if (length) {\n                for (; i < length; i++) {\n                    Dom.ensureTrailingBreak(elements[i]);\n                }\n            } else {\n                Dom.ensureTrailingBreak(node);\n            }\n        },\n\n        removeTrailingBreak: function(node) {\n            $(node).find(\"br[type=_moz],.k-br\").remove();\n        },\n\n        ensureTrailingBreak: function(node) {\n            Dom.removeTrailingBreak(node);\n\n            var lastChild = node.lastChild;\n            var name = lastChild && Dom.name(lastChild);\n            var br;\n\n            if (!name ||\n                (name != \"br\" && name != \"img\") ||\n                (name == \"br\" && lastChild.className != \"k-br\")) {\n                br = node.ownerDocument.createElement(\"br\");\n                br.className = \"k-br\";\n                node.appendChild(br);\n            }\n        },\n\n        // Start: Table Utilities\n\n        reMapTableColumns: function(table, colAttr) {\n            Dom._mapColIndices(table, colAttr);\n        },\n\n        clearTableMappings: function(table, colAttr) {\n            $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n        },\n\n        _mapColIndices: function(table, colAttr) {\n            var registeredColumns = {};\n\n            for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                var cells = table.rows[rowIndex].cells;\n                var colIndex = 0;\n                for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                    var cell = cells[cellIndex];\n\n                    if (cell.rowSpan > 1) {\n                        this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][colIndex]) {\n                            colIndex++;\n                        }\n                    }\n\n                    cell.setAttribute(colAttr, colIndex);\n\n                    if (cell.colSpan > 1) {\n                        colIndex = colIndex + cell.colSpan - 1;\n                    }\n                }\n            }\n        },\n\n        _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n            var rowSpan = cell.rowSpan,\n                colSpan = cell.colSpan,\n                index;\n\n            for (var ci = 0; ci < colSpan; ci++) {\n                index = colIndex + ci;\n\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n\n        },\n\n        associateWithIds: function(table) {\n            var that = this;\n            var numberOfTheadRows = 0;\n            var tableRows = table.rows;\n            var numberOfTableRows = tableRows.length;\n            var theadMatrix = [];\n            var tbodyMatrix = [];\n            var theadRows, i;\n\n            if (table.tHead) {\n                theadRows = table.tHead.rows;\n                numberOfTheadRows = theadRows.length;\n            } else {\n                numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                theadRows = [];\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadRows.push(tableRows[i]);\n                }\n            }\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadMatrix.push([]);\n            }\n            for (i = 0; i < numberOfTableRows; i++) {\n                tbodyMatrix.push([]);\n            }\n\n            that._generateIdsForColumns(theadMatrix, theadRows);\n            that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        },\n\n        _generateIdsForColumns: function(theadMatrix, theadRows) {\n            var timestamp = new Date().getTime();\n            var numberOfTheadRows = theadRows ? theadRows.length : 0;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n            for (i = 0; i < numberOfTheadRows; i++) {\n                row = theadRows[i];\n                cells = row.cells;\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (theadMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            theadMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n                }\n            }\n        },\n\n        _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var timestamp = new Date().getTime();\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"th\");\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (tbodyMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            tbodyMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = [];\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, i, j, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"td\");\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = tbodyMatrix[i].slice();\n\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _getNumberOfColumns: function(table) {\n            var cells = $(table).find(\"th, td\");\n            var numberOfCols = 0;\n            var cell, i, currentIndex;\n\n            for (i = 0; i < cells.length; i++) {\n                cell = cells[i];\n                currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                if (currentIndex > numberOfCols) {\n                    numberOfCols = currentIndex;\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n            var rows = table.rows;\n            var numberOfCols = 0;\n            var currentIndex, row, i, j, cell;\n\n            for (i = numberOfHeaderRows; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (this.is(cell, \"th\")) {\n                        currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                        if (currentIndex > numberOfCols) {\n                            numberOfCols = currentIndex;\n                        }\n                    }\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderRows: function(table) {\n            var rows = table.rows;\n            var thead = table.tHead;\n            var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n            var j, row, cell, length;\n\n            if (number === 0) {\n                row = rows[0];\n                length = row.cells && row.cells.length;\n\n                while (row && length && this.is(row.cells[0], \"th\")) {\n                    for (j = 0; j < length; j++) {\n                        cell = row ? row.cells[j] : null;\n\n                        if (!this.is(cell, \"th\")) {\n                            row = null;\n                        }\n                    }\n\n                    if (row) {\n                        number += 1;\n                        row = this.next(row);\n                        length = row && row.cells && row.cells.length;\n                    }\n                }\n            }\n\n            return number;\n        },\n\n        // End: Table Utilities\n\n        _onlyUnique: function(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n    };\n\n    kendo.ui.editor.Dom = Dom;\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo;\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var extend = $.extend;\n\n    var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n    var quoteRe = /\"/g; //\"\n    var brRe = /<br[^>]*>/i;\n    var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n    var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n    var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n    var sizzleAttr = /^sizzle-\\d+/i;\n    var scriptAttr = /^k-script-/i;\n    var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n    var br = '<br class=\"k-br\">';\n    var bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\n    var div = document.createElement(\"div\");\n    div.innerHTML = \" <hr>\";\n    var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n    div = null;\n    var isFunction = kendo.isFunction;\n\n    var TD = \"td\";\n\n    var Serializer = {\n        toEditableHtml: function(html) {\n            return (html || \"\")\n                .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n                .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n                .replace(/<img([^>]*)>/ig, function(match) {\n                    return match.replace(onerrorRe, \"\");\n                })\n                .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n                .replace(/^<(table|blockquote)/i, br + '<$1')\n                .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n                .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n        },\n\n        _toEditableImmutables: function(body) {\n            var immutable = Editor.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        _fillEmptyElements: function(body) {\n            // fills empty elements to allow them to be focused\n            $(body).find(\"p,td\").each(function() {\n                var p = $(this);\n                if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                    var node = this;\n                    while (node.children[0] && node.children[0].nodeType != 3) {\n                        node = node.children[0];\n                    }\n\n                    if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                        if (dom.is(node, \"td\")) {\n                            node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                        }\n                        else {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                }\n            });\n        },\n\n        _removeSystemElements: function(body) {\n            // removes persisted system elements\n            $(\".k-paste-container\", body).remove();\n        },\n\n        _resetOrderedLists: function(root) {\n            // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n            var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n            for (i = 0; i < ols.length; i++) {\n                ol = ols[i];\n                originalStart = ol.getAttribute(\"start\");\n\n                ol.setAttribute(\"start\", 1);\n\n                if (originalStart) {\n                    ol.setAttribute(\"start\", originalStart);\n                } else {\n                    ol.removeAttribute(originalStart);\n                }\n            }\n        },\n\n        _preventScriptExecution: function(root) {\n            $(root).find(\"*\").each(function() {\n                var attributes = this.attributes;\n                var attribute, i, l, name;\n                var attributesToRemove = [];\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n\n                    if (attribute.specified && /^on/i.test(name)) {\n                        this.setAttribute(\"k-script-\" + name, attribute.value);\n                        attributesToRemove.push(name);\n                    }\n                }\n\n                for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                    this.removeAttribute(attributesToRemove[i]);\n                }\n            });\n        },\n\n        htmlToDom: function(html, root, options) {\n            var browser = kendo.support.browser;\n            var msie = browser.msie;\n            var o = options || {};\n            var immutables = o.immutables;\n\n            html = Serializer.toEditableHtml(html);\n\n            if (isFunction(o.custom)) {\n                html = o.custom(html) || html;\n            }\n            root.innerHTML = html;\n\n            if (immutables) {\n                immutables.deserialize(root);\n            }\n\n            if (msie) {\n                // unicode characters denormalize the DOM tree in IE9\n                dom.normalize(root);\n\n                Serializer._resetOrderedLists(root);\n            }\n\n            Serializer._preventScriptExecution(root);\n\n            Serializer._fillEmptyElements(root);\n\n            Serializer._removeSystemElements(root);\n\n            Serializer._toEditableImmutables(root);\n\n            // add k-table class to all tables\n            $(\"table\", root).addClass(\"k-table\");\n\n            return root;\n        },\n\n        domToXhtml: function(root, options) {\n            var result = [];\n            var immutables = options && options.immutables;\n\n            function semanticFilter(attributes) {\n                return $.grep(attributes, function(attr) {\n                    return attr.name != \"style\";\n                });\n            }\n\n            function mapStart(node, tag) {\n                result.push('<' + tag);\n                attr(node);\n                result.push('>');\n            }\n\n            var tagMap = {\n                iframe: {\n                    start: function(node) { mapStart(node, \"iframe\"); },\n                    end: function() { result.push('</iframe>'); }\n                },\n                'k:script': {\n                    start: function(node) { mapStart(node, \"script\"); },\n                    end: function() { result.push('</script>'); },\n                    skipEncoding: true\n                },\n                span: {\n                    canOptimize: true,\n                    semantic: true,\n                    start: function(node) {\n                        var style = node.style;\n\n                        var attributes = specifiedAttributes(node);\n                        var semanticAttributes = semanticFilter(attributes);\n\n                        if (semanticAttributes.length) {\n                            result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"<u>\");\n                        }\n\n                        var font = [];\n                        if (style.color) {\n                            font.push('color=\"' + dom.toHex(style.color) + '\"');\n                        }\n\n                        if (style.fontFamily) {\n                            font.push('face=\"' + style.fontFamily + '\"');\n                        }\n\n                        if (style.fontSize) {\n                            var size = $.inArray(style.fontSize, fontSizeMappings);\n                            font.push('size=\"' + size + '\"');\n                        }\n\n                        // Apply the rest of the inline styles back\n                        var inlineStyles = [];\n                        var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                        for (let i = 0; i < style.length; i++) {\n                            var inlineStyle = style[i];\n\n                            if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                                inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                            }\n                        }\n\n                        if (inlineStyles.length) {\n                            font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                        }\n\n                        if (font.length) {\n                            result.push(\"<font \" + font.join(\" \") + \">\");\n                        }\n                    },\n                    end: function(node) {\n                        var style = node.style;\n\n                        if (style.color || style.fontFamily || style.fontSize) {\n                            result.push(\"</font>\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"</u>\");\n                        }\n\n                        if (semanticFilter(specifiedAttributes(node)).length) {\n                            result.push(\"</span>\");\n                        }\n                    }\n                },\n                strong: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"b\"); },\n                    end: function() { result.push('</b>'); }\n                },\n                em: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"i\"); },\n                    end: function() { result.push('</i>'); }\n                },\n                b: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"strong\"); },\n                    end: function() { result.push('</strong>'); }\n                },\n                i: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"em\"); },\n                    end: function() { result.push('</em>'); }\n                },\n                u: {\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span');\n\n                        var attributes = specifiedAttributes(node);\n                        var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                        var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                        if (style) {\n                            styleObj.value = style.value;\n                            if (!/text-decoration/i.test(styleObj.value)) {\n                                styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                            }\n                            attributes.splice($.inArray(style, attributes), 1);\n                        }\n                        attributes.push(styleObj);\n\n                        attr(node, attributes);\n                        result.push('>');\n                    },\n                    end: function() { result.push('</span>'); }\n                },\n                font: {\n                    canOptimize: true,\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span style=\"');\n\n                        var color = node.getAttribute('color');\n                        var size = fontSizeMappings[node.getAttribute('size')];\n                        var face = node.getAttribute('face');\n\n                        if (color) {\n                            result.push('color:');\n                            result.push(dom.toHex(color));\n                            result.push(';');\n                        }\n\n                        if (face) {\n                            result.push('font-family:');\n                            result.push(face);\n                            result.push(';');\n                        }\n\n                        if (size) {\n                            result.push('font-size:');\n                            result.push(size);\n                            result.push(';');\n                        }\n\n                        result.push('\">');\n                    },\n                    end: function() {\n                        result.push('</span>');\n                    }\n                }\n            };\n\n            tagMap.script = tagMap[\"k:script\"];\n\n            options = options || {};\n\n            if (typeof options.semantic == \"undefined\") {\n                options.semantic = true;\n            }\n\n            function cssProperties(cssText) {\n                var trim = kendo.trim;\n                var css = trim(cssText);\n                var match;\n                var property, value;\n                var properties = [];\n\n                cssDeclaration.lastIndex = 0;\n\n                while (true) {\n                    match = cssDeclaration.exec(css);\n\n                    if (!match) {\n                        break;\n                    }\n\n                    property = trim(match[1].toLowerCase());\n                    value = trim(match[2]);\n\n                    if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                        continue;\n                    }\n\n                    if (property.indexOf('color') >= 0) {\n                        value = dom.toHex(value);\n                    } else if (property.indexOf('font') >= 0) {\n                        value = value.replace(quoteRe, \"'\");\n                    } else if (/\\burl\\(/g.test(value)) {\n                        value = value.replace(quoteRe, \"\");\n                    }\n\n                    properties.push({ property: property, value: value });\n                }\n\n                return properties;\n            }\n\n            function styleAttr(cssText) {\n                var properties = cssProperties(cssText);\n                var i;\n\n                for (i = 0; i < properties.length; i++) {\n                    result.push(properties[i].property);\n                    result.push(':');\n                    result.push(properties[i].value);\n                    result.push(';');\n                }\n            }\n\n            function specifiedAttributes(node) {\n                var result = [];\n                var attributes = node.attributes;\n                var attribute, i, l;\n                var name, value, specified;\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n\n                    name = attribute.nodeName;\n                    value = attribute.value;\n                    specified = attribute.specified;\n\n                    // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                    if (name == 'value' && 'value' in node && node.value) {\n                        specified = true;\n                    } else if (name == 'type' && value == 'text') {\n                        specified = true;\n                    } else if (name == \"class\" && !value) {\n                        specified = false;\n                    } else if (sizzleAttr.test(name)) {\n                        specified = false;\n                    } else if (name == 'complete') {\n                        specified = false;\n                    } else if (name == 'altHtml') {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ul\")) {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                        specified = false;\n                    } else if (name.indexOf('_moz') >= 0) {\n                        specified = false;\n                    } else if (scriptAttr.test(name)) {\n                        specified = !!options.scripts;\n                    } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                        specified = false;\n                    }\n\n                    if (specified) {\n                        result.push(attribute);\n                    }\n                }\n\n                return result;\n            }\n\n            function attr(node, attributes) {\n                var i, l, attribute, name, value;\n\n                attributes = attributes || specifiedAttributes(node);\n\n                if (dom.is(node, 'img')) {\n                    var width = node.style.width,\n                        height = node.style.height,\n                        $node = $(node);\n\n                    if (width && pixelRe.test(width)) {\n                        $node.attr('width', parseInt(width, 10));\n                        dom.unstyle(node, { width: undefined$1 });\n                    }\n\n                    if (height && pixelRe.test(height)) {\n                        $node.attr('height', parseInt(height, 10));\n                        dom.unstyle(node, { height: undefined$1 });\n                    }\n                }\n\n                if (!attributes.length) {\n                    return;\n                }\n\n                // Remove the following if everything seems to be in order.\n                // https://github.com/telerik/kendo-ui-core/issues/3639\n                // attributes.sort(function (a, b) {\n                //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                // });\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    value = attribute.value;\n\n                    if (name == \"class\" && value == \"k-table\") {\n                        continue;\n                    }\n\n                    name = name.replace(scriptAttr, \"\");\n\n                    result.push(' ');\n                    result.push(name);\n                    result.push('=\"');\n\n                    if (name == 'style') {\n                        styleAttr(value || node.style.cssText);\n                    } else if (name == 'src' || name == 'href') {\n                        result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                    } else {\n                        result.push(dom.fillAttrs[name] ? name : value);\n                    }\n\n                    result.push('\"');\n                }\n            }\n\n            function children(node, skip, skipEncoding) {\n                for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                    child(childNode, skip, skipEncoding);\n                }\n            }\n\n            function text(node) {\n                return node.nodeValue.replace(/\\ufeff/g, \"\");\n            }\n\n            function isEmptyBomNode(node) {\n                if (dom.isBom(node)) {\n                    do {\n                        node = node.parentNode;\n\n                        if (dom.is(node, TD) && node.childNodes.length === 1) {\n                            return true;\n                        }\n\n                        if (node.childNodes.length !== 1) {\n                            return false;\n                        }\n                    } while (!dom.isBlock(node));\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            function child(node, skip, skipEncoding) {\n                var nodeType = node.nodeType,\n                    tagName, mapper,\n                    parent, value, previous, jqNode;\n\n                if (immutables && Editor.Immutables.immutable(node)) {\n                    result.push(immutables.serialize(node));\n                } else if (nodeType == 1) {\n                    tagName = dom.name(node);\n                    jqNode = $(node);\n\n                    if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                        return;\n                    }\n\n                    if (!tagName || dom.insignificant(node)) {\n                        return;\n                    }\n\n                    if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                        return;\n                    }\n\n                    mapper = tagMap[tagName];\n\n                    if (mapper) {\n                        if (mapper.canOptimize &&\n                            options.optimizeTags &&\n                            shouldOptimize(node)) {\n                                children(node, false, mapper.skipEncoding);\n                            return;\n                        }\n\n                        if (typeof mapper.semantic == \"undefined\" ||\n                            (options.semantic ^ mapper.semantic)) {\n                            mapper.start(node);\n                            children(node, false, mapper.skipEncoding);\n                            mapper.end(node);\n                            return;\n                        }\n                    }\n\n                    result.push('<');\n                    result.push(tagName);\n\n                    attr(node);\n\n                    if (dom.empty[tagName]) {\n                        result.push(' />');\n                    } else {\n                        result.push('>');\n                        children(node, skip || dom.is(node, 'pre'));\n                        result.push('</');\n                        result.push(tagName);\n                        result.push('>');\n                    }\n                } else if (nodeType == 3) {\n                    if (isEmptyBomNode(node)) {\n                        result.push('&nbsp;');\n                        return;\n                    }\n\n                    value = text(node);\n\n                    if (!skip && supportsLeadingWhitespace) {\n                        parent = node.parentNode;\n                        previous = node.previousSibling;\n\n                        if (!previous) {\n                             previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                        }\n\n                        if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                            if (options.keepEOL) {\n                                value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                            } else {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                        }\n\n                        value = value.replace(/ +/, ' ');\n                    }\n\n                    result.push(skipEncoding ? value : dom.encode(value, options));\n\n                } else if (nodeType == 4) {\n                    result.push('<![CDATA[');\n                    result.push(node.data);\n                    result.push(']]>');\n                } else if (nodeType == 8) {\n                    if (node.data.indexOf('[CDATA[') < 0) {\n                        result.push('<!--');\n                        result.push(node.data);\n                        result.push('-->');\n                    } else {\n                        result.push('<!');\n                        result.push(node.data);\n                        result.push('>');\n                    }\n                }\n            }\n\n            function shouldOptimize(node) {\n                return node.attributes.length === 0;\n            }\n\n            function textOnly(root) {\n                var childrenCount = root.childNodes.length;\n                var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n                return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n            }\n\n            function runCustom() {\n                if (kendo.isFunction(options.custom)) {\n                    result = options.custom(result) || result;\n                }\n            }\n\n            if (textOnly(root)) {\n                result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                runCustom();\n\n                return result;\n            }\n\n            children(root);\n            result = result.join('');\n            runCustom();\n\n            // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n            if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n                return \"\";\n            }\n\n            return result;\n        }\n\n    };\n\n    extend(Editor, {\n        Serializer: Serializer\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            browser = kendo.support.browser,\n            dom = Editor.Dom,\n            findNodeIndex = dom.findNodeIndex,\n            isDataNode = dom.isDataNode,\n            findClosestAncestor = dom.findClosestAncestor,\n            getNodeLength = dom.getNodeLength,\n            normalize = dom.normalize;\n\n    var SelectionUtils = {\n        selectionFromWindow: function(window) {\n            if (!window) {\n                return;\n            }\n\n            if (!(\"getSelection\" in window)) {\n                return new W3CSelection(window.document);\n            }\n\n            return window.getSelection();\n        },\n\n        selectionFromRange: function(range) {\n            var rangeDocument = RangeUtils.documentFromRange(range);\n            return SelectionUtils.selectionFromDocument(rangeDocument);\n        },\n\n        selectionFromDocument: function(document) {\n            return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n        }\n    };\n\n    var W3CRange = Class.extend({\n        init: function(doc) {\n            $.extend(this, {\n                ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n                startContainer: doc,\n                endContainer: doc,\n                commonAncestorContainer: doc,\n                startOffset: 0,\n                endOffset: 0,\n                collapsed: true\n            });\n        },\n\n        // Positioning Methods\n        setStart: function(node, offset) {\n            this.startContainer = node;\n            this.startOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, true);\n        },\n\n        setEnd: function(node, offset) {\n            this.endContainer = node;\n            this.endOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, false);\n        },\n\n        setStartBefore: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node));\n        },\n\n        setStartAfter: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        setEndBefore: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node));\n        },\n\n        setEndAfter: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        selectNode: function(node) {\n            this.setStartBefore(node);\n            this.setEndAfter(node);\n        },\n\n        selectNodeContents: function(node) {\n            this.setStart(node, 0);\n            this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n        },\n\n        collapse: function(toStart) {\n            var that = this;\n\n            if (toStart) {\n                that.setEnd(that.startContainer, that.startOffset);\n            } else {\n                that.setStart(that.endContainer, that.endOffset);\n            }\n        },\n\n        // Editing Methods\n\n        deleteContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            (function deleteSubtree(iterator) {\n                while (iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        deleteSubtree(iterator.getSubtreeIterator());\n                    } else {\n                        iterator.remove();\n                    }\n                }\n            })(new RangeIterator(range));\n        },\n\n        cloneContents: function() {\n            // clone subtree\n            var document = RangeUtils.documentFromRange(this);\n            return (function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n\n                        frag.appendChild(node);\n                    }\n\n                    return frag;\n            })(new RangeIterator(this));\n        },\n\n        extractContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            var document = RangeUtils.documentFromRange(that);\n\n            return (function extractSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        node = node.cloneNode(false);\n                        node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                    } else {\n                        iterator.remove(that.originalRange);\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n            })(new RangeIterator(range));\n        },\n\n        insertNode: function(node) {\n            var that = this;\n\n            if (isDataNode(that.startContainer)) {\n                if (that.startOffset != that.startContainer.nodeValue.length) {\n                    dom.splitDataNode(that.startContainer, that.startOffset);\n                }\n\n                dom.insertAfter(node, that.startContainer);\n            } else {\n                dom.insertAt(that.startContainer, node, that.startOffset);\n            }\n\n            that.setStart(that.startContainer, that.startOffset);\n        },\n\n        cloneRange: function() {\n            // fast copy\n            return $.extend(new W3CRange(this.ownerDocument), {\n                startContainer: this.startContainer,\n                endContainer: this.endContainer,\n                commonAncestorContainer: this.commonAncestorContainer,\n                startOffset: this.startOffset,\n                endOffset: this.endOffset,\n                collapsed: this.collapsed,\n\n                originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n            });\n        },\n\n        // used for debug purposes\n        toString: function() {\n            var startNodeName = this.startContainer.nodeName,\n                endNodeName = this.endContainer.nodeName;\n\n            return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                    endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n        }\n    });\n\n    W3CRange.fromNode = function(node) {\n        return new W3CRange(node.ownerDocument);\n    };\n\n    /* can be used in Range.compareBoundaryPoints if we need it one day */\n    function compareBoundaries(start, end, startOffset, endOffset) {\n        if (start == end) {\n            return endOffset - startOffset;\n        }\n\n        // end is child of start\n        var container = end;\n        while (container && container.parentNode != start) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return findNodeIndex(container) - startOffset;\n        }\n\n        // start is child of end\n        container = start;\n        while (container && container.parentNode != end) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return endOffset - findNodeIndex(container) - 1;\n        }\n\n        // deep traversal\n        var root = dom.commonAncestor(start, end);\n        var startAncestor = start;\n\n        while (startAncestor && startAncestor.parentNode != root) {\n            startAncestor = startAncestor.parentNode;\n        }\n\n        if (!startAncestor) {\n            startAncestor = root;\n        }\n\n        var endAncestor = end;\n        while (endAncestor && endAncestor.parentNode != root) {\n            endAncestor = endAncestor.parentNode;\n        }\n\n        if (!endAncestor) {\n            endAncestor = root;\n        }\n\n        if (startAncestor == endAncestor) {\n            return 0;\n        }\n\n        return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n    }\n\n    function fixIvalidRange(range, toStart) {\n        function isInvalidRange(range) {\n            try {\n                return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n            } catch (ex) {\n                // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n                return true;\n            }\n        }\n\n        if (isInvalidRange(range)) {\n            if (toStart) {\n                range.commonAncestorContainer = range.endContainer = range.startContainer;\n                range.endOffset = range.startOffset;\n            } else {\n                range.commonAncestorContainer = range.startContainer = range.endContainer;\n                range.startOffset = range.endOffset;\n            }\n\n            range.collapsed = true;\n        }\n    }\n\n    function updateRangeProperties(range) {\n        range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n        var node = range.startContainer;\n        while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n            node = node.parentNode;\n        }\n\n        range.commonAncestorContainer = node;\n    }\n\n    var RangeIterator = Class.extend({\n        init: function(range) {\n            $.extend(this, {\n                range: range,\n                _current: null,\n                _next: null,\n                _end: null\n            });\n\n            if (range.collapsed) {\n                return;\n            }\n\n            var root = range.commonAncestorContainer;\n\n            this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n            range.startContainer.childNodes[range.startOffset] :\n            findClosestAncestor(root, range.startContainer);\n\n            this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n            range.endContainer.childNodes[range.endOffset] :\n            findClosestAncestor(root, range.endContainer).nextSibling;\n        },\n\n        hasNext: function() {\n            return !!this._next;\n        },\n\n        next: function() {\n            var that = this,\n                current = that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ?\n            that._current.nextSibling : null;\n\n            if (isDataNode(that._current)) {\n                if (that.range.endContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                }\n\n                if (that.range.startContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, that.range.startOffset);\n                }\n            }\n\n            return current;\n        },\n\n        traverse: function(callback) {\n            var that = this,\n                current;\n\n            function next() {\n                that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                return that._current;\n            }\n\n            while (current = next()) {\n                if (that.hasPartialSubtree()) {\n                    that.getSubtreeIterator().traverse(callback);\n                } else {\n                    callback(current);\n                }\n            }\n\n            return current;\n        },\n\n        remove: function(originalRange) {\n            var that = this,\n                inStartContainer = that.range.startContainer == that._current,\n                inEndContainer = that.range.endContainer == that._current,\n                start, end, delta;\n\n            if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                start = inStartContainer ? that.range.startOffset : 0;\n                end = inEndContainer ? that.range.endOffset : that._current.length;\n                delta = end - start;\n\n                if (originalRange && (inStartContainer || inEndContainer)) {\n                    if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                        originalRange.startOffset -= delta;\n                    }\n\n                    if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                        originalRange.endOffset -= delta;\n                    }\n                }\n\n                that._current.deleteData(start, delta);\n            } else {\n                var parent = that._current.parentNode;\n\n                if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                    var nodeIndex = findNodeIndex(that._current);\n\n                    if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                        originalRange.startOffset -= 1;\n                    }\n\n                    if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                        originalRange.endOffset -= 1;\n                    }\n                }\n\n                dom.remove(that._current);\n            }\n        },\n\n        hasPartialSubtree: function() {\n            return !isDataNode(this._current) &&\n            (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n                dom.isAncestorOrSelf(this._current, this.range.endContainer));\n        },\n\n        getSubtreeIterator: function() {\n            return new RangeIterator(this.getSubRange());\n        },\n\n        getSubRange: function() {\n            var that = this,\n                subRange = that.range.cloneRange();\n            subRange.selectNodeContents(that._current);\n            if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                subRange.setStart(that.range.startContainer, that.range.startOffset);\n            }\n            if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                subRange.setEnd(that.range.endContainer, that.range.endOffset);\n            }\n\n            return subRange;\n        }\n    });\n\n    var W3CSelection = Class.extend({\n        init: function(doc) {\n            this.ownerDocument = doc;\n            this.rangeCount = 1;\n        },\n\n        addRange: function(range) {\n            var textRange = this.ownerDocument.body.createTextRange();\n\n            // end container should be adopted first in order to prevent selection with negative length\n            adoptContainer(textRange, range, false);\n            adoptContainer(textRange, range, true);\n\n            textRange.select();\n        },\n\n        removeAllRanges: function() {\n            var selection = this.ownerDocument.selection;\n\n            if (selection.type != \"None\") {\n                selection.empty();\n            }\n        },\n\n        getRangeAt: function() {\n            var textRange,\n                range = new W3CRange(this.ownerDocument),\n                selection = this.ownerDocument.selection,\n                element, commonAncestor;\n\n            try {\n                textRange = selection.createRange();\n                element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                if (element.ownerDocument != this.ownerDocument) {\n                    return range;\n                }\n            } catch (ex) {\n                return range;\n            }\n\n            if (selection.type == \"Control\") {\n                range.selectNode(textRange.item(0));\n            } else {\n                commonAncestor = textRangeContainer(textRange);\n                adoptEndPoint(textRange, range, commonAncestor, true);\n                adoptEndPoint(textRange, range, commonAncestor, false);\n\n                if (range.startContainer.nodeType == 9) {\n                    range.setStart(range.endContainer, range.startOffset);\n                }\n\n                if (range.endContainer.nodeType == 9) {\n                    range.setEnd(range.startContainer, range.endOffset);\n                }\n\n                if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                    range.collapse(false);\n                }\n\n                var startContainer = range.startContainer,\n                    endContainer = range.endContainer,\n                    body = this.ownerDocument.body;\n\n                if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                    !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                    var movedStart = false,\n                        movedEnd = false;\n\n                    while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                        startContainer = startContainer.parentNode;\n                        movedStart = true;\n                    }\n\n                    while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                        endContainer = endContainer.parentNode;\n                        movedEnd = true;\n                    }\n\n                    if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                        range.setStart(startContainer, 0);\n                        range.setEnd(endContainer, getNodeLength(body));\n                    }\n                }\n            }\n\n            return range;\n        }\n    });\n\n    function textRangeContainer(textRange) {\n        var left = textRange.duplicate(),\n            right = textRange.duplicate();\n\n        left.collapse(true);\n        right.collapse(false);\n\n        return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n    }\n\n    function adoptContainer(textRange, range, start) {\n        // find anchor node and offset\n        var container = range[start ? \"startContainer\" : \"endContainer\"],\n            offset = range[start ? \"startOffset\" : \"endOffset\"],\n            textOffset = 0,\n            isData = isDataNode(container),\n            anchorNode = isData ? container : container.childNodes[offset] || null,\n            anchorParent = isData ? container.parentNode : container,\n            doc = range.ownerDocument,\n            cursor = doc.body.createTextRange(),\n            cursorNode;\n\n        // visible data nodes need a text offset\n        if (container.nodeType == 3 || container.nodeType == 4) {\n            textOffset = offset;\n        }\n\n        if (!anchorParent) {\n            anchorParent = doc.body;\n        }\n\n        if (anchorParent.nodeName.toLowerCase() == \"img\") {\n            cursor.moveToElementText(anchorParent);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        } else {\n            // create a cursor element node to position range (since we can't select text nodes)\n            cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n            cursor.moveToElementText(cursorNode);\n            dom.remove(cursorNode);\n            cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        }\n    }\n\n    function adoptEndPoint(textRange, range, commonAncestor, start) {\n        var cursorNode = dom.create(range.ownerDocument, \"a\"),\n            cursor = textRange.duplicate(),\n            comparison = start ? \"StartToStart\" : \"StartToEnd\",\n            result, parent, target,\n            previous, next,\n            args, index,\n            appended = false;\n\n        cursorNode.innerHTML = \"\\ufeff\";\n        cursor.collapse(start);\n\n        parent = cursor.parentElement();\n\n        if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n            parent = commonAncestor;\n        }\n\n        // detect range end points\n        // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n        do {\n            if (appended) {\n                parent.insertBefore(cursorNode, cursorNode.previousSibling);\n            } else {\n                parent.appendChild(cursorNode);\n                appended = true;\n            }\n            cursor.moveToElementText(cursorNode);\n        } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n        target = cursorNode.nextSibling;\n\n        if (result == -1 && isDataNode(target)) {\n            cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n            dom.remove(cursorNode);\n\n            args = [target, cursor.text.length];\n        } else {\n            previous = !start && cursorNode.previousSibling;\n            next = start && cursorNode.nextSibling;\n\n            if (isDataNode(next)) {\n                args = [next, 0];\n            } else if (isDataNode(previous)) {\n                args = [previous, previous.length];\n            } else {\n                index = findNodeIndex(cursorNode);\n\n                if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                    args = [parent.nextSibling, 0];\n                } else {\n                    args = [parent, index];\n                }\n            }\n\n            dom.remove(cursorNode);\n        }\n\n        range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n    }\n\n    var RangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n\n                function visit(node) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n\n                new RangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var ImmutablesRangeIterator = RangeIterator.extend({\n        hasPartialSubtree: function() {\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n        },\n\n        getSubtreeIterator: function() {\n            return new ImmutablesRangeIterator(this.getSubRange());\n        }\n    });\n\n    var ImmutablesRangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                function visit(node) {\n                    if (immutable && !immutable(node)) {\n                        if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                }\n\n                new ImmutablesRangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var RestorePoint = Class.extend({\n        init: function(range, body, options) {\n            var that = this;\n            that.range = range;\n            that.rootNode = RangeUtils.documentFromRange(range);\n            that.body = body || that.getEditable(range);\n            if (dom.name(that.body) != \"body\") {\n                that.rootNode = that.body;\n            }\n\n            that.startContainer = that.nodeToPath(range.startContainer);\n            that.endContainer = that.nodeToPath(range.endContainer);\n            that.startOffset = that.offset(range.startContainer, range.startOffset);\n            that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n            that.immutables = options && options.immutables;\n\n            if (that.immutables) {\n                that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n            }\n\n            that.html = that.body.innerHTML;\n\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        index: function(node) {\n            var result = 0,\n                lastType = node.nodeType;\n\n            while (node = node.previousSibling) {\n                var nodeType = node.nodeType;\n\n                if (nodeType != 3 || lastType != nodeType) {\n                    result ++;\n                }\n\n                lastType = nodeType;\n            }\n\n            return result;\n        },\n\n        getEditable: function(range) {\n            var root = range.commonAncestorContainer;\n\n            while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n                root = root.parentNode;\n            }\n\n            return root;\n        },\n\n        restoreHtml: function() {\n            var that = this;\n\n            dom.removeChildren(that.body);\n            that.body.innerHTML = that.html;\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        offset: function(node, value) {\n            if (node.nodeType == 3) {\n                while ((node = node.previousSibling) && node.nodeType == 3) {\n                    value += node.nodeValue.length;\n                }\n            }\n\n            return value;\n        },\n\n        nodeToPath: function(node) {\n            var path = [];\n\n            while (node != this.rootNode) {\n                path.push(this.index(node));\n                node = node.parentNode;\n            }\n\n            return path;\n        },\n\n        toRangePoint: function(range, start, path, denormalizedOffset) {\n            var node = this.rootNode,\n                length = path.length,\n                offset = denormalizedOffset;\n\n            while (length-- && node) {\n                node = node.childNodes[path[length]];\n            }\n\n            while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                offset -= node.nodeValue.length;\n                node = node.nextSibling;\n            }\n\n            if (node && offset >= 0) {\n                range[start ? 'setStart' : 'setEnd'](node, offset);\n            }\n        },\n\n        toRange: function() {\n            var that = this,\n                result = that.range.cloneRange();\n\n            that.toRangePoint(result, true, that.startContainer, that.startOffset);\n            that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n            return result;\n        }\n\n    });\n\n    var Marker = Class.extend({\n        init: function() {\n            this.caret = null;\n        },\n\n        addCaret: function(range) {\n            var that = this;\n            var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n            range.insertNode(caret);\n\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n\n            range.selectNode(caret);\n            return caret;\n        },\n\n        removeCaret: function(range) {\n            var that = this,\n                previous = that.caret.previousSibling,\n                startOffset = 0;\n\n            if (previous) {\n                startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n            }\n\n            var container = that.caret.parentNode;\n            var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n            dom.remove(that.caret);\n            normalize(container);\n\n            var node = container.childNodes[containerIndex];\n\n            if (isDataNode(node)) {\n                range.setStart(node, startOffset);\n            } else if (node) {\n                var textNode = dom.lastTextNode(node);\n                if (textNode) {\n                    range.setStart(textNode, textNode.nodeValue.length);\n                } else {\n                    range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                }\n            } else {\n                if (!browser.msie && !container.innerHTML) {\n                    container.innerHTML = '<br _moz_dirty=\"\" />';\n                }\n\n                range.selectNodeContents(container);\n            }\n            range.collapse(true);\n        },\n\n        add: function(range, expand) {\n            var that = this;\n\n            var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (expand && range.collapsed) {\n                that.addCaret(range);\n                range = RangeUtils.expand(range);\n            }\n\n            var rangeBoundary = range.cloneRange();\n\n            rangeBoundary.collapse(false);\n            that.end = dom.create(doc, 'span', { className: 'k-marker' });\n            rangeBoundary.insertNode(that.end);\n\n            rangeBoundary = range.cloneRange();\n            rangeBoundary.collapse(true);\n            that.start = that.end.cloneNode(true);\n            rangeBoundary.insertNode(that.start);\n\n            that._removeDeadMarkers(that.start, that.end);\n\n            if (collapsed) {\n                var bom = doc.createTextNode(\"\\ufeff\");\n                dom.insertAfter(bom.cloneNode(), that.start);\n                dom.insertBefore(bom, that.end);\n            }\n\n            normalize(range.commonAncestorContainer);\n\n            range.setStartBefore(that.start);\n            range.setEndAfter(that.end);\n\n            return range;\n        },\n\n        _removeDeadMarkers: function(start, end) {\n            if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(start.previousSibling);\n            }\n\n            if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(end.nextSibling);\n            }\n        },\n\n        _normalizedIndex: function(node) {\n            var index = findNodeIndex(node);\n            var pointer = node;\n\n            while (pointer.previousSibling) {\n                if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                    index--;\n                }\n\n                pointer = pointer.previousSibling;\n            }\n\n            return index;\n        },\n\n        remove: function(range) {\n            var that = this,\n                start = that.start,\n                end = that.end,\n                shouldNormalizeStart,\n                shouldNormalizeEnd,\n                shouldNormalize;\n\n            normalize(range.commonAncestorContainer);\n\n            while (!start.nextSibling && start.parentNode) {\n                start = start.parentNode;\n            }\n\n            while (!end.previousSibling && end.parentNode) {\n                end = end.parentNode;\n            }\n\n            // merely accessing the siblings will solve range issues in IE\n            shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                                   (start.nextSibling && start.nextSibling.nodeType == 3);\n\n            shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                                 (end.nextSibling && end.nextSibling.nodeType == 3);\n\n            shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n            start = start.nextSibling;\n            end = end.previousSibling;\n\n            var isBomSelected = start === end && dom.isBom(start);\n            if (isBomSelected && start.length > 1) {\n                start.nodeValue = start.nodeValue.charAt(0);\n            }\n\n            var collapsed = isBomSelected;\n            var collapsedToStart = false;\n            // collapsed range\n            if (start == that.end) {\n                collapsedToStart = !!that.start.previousSibling;\n                start = end = that.start.previousSibling || that.end.nextSibling;\n                collapsed = true;\n            }\n\n            dom.remove(that.start);\n            dom.remove(that.end);\n\n            if (!start || !end) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                range.collapse(true);\n                return;\n            }\n\n            var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n            var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n            if (start.nodeType == 3) {\n                while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                    start = start.previousSibling;\n                    startOffset += start.nodeValue.length;\n                }\n            }\n\n            if (end.nodeType == 3) {\n                while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                    end = end.previousSibling;\n                    endOffset += end.nodeValue.length;\n                }\n            }\n\n            var startParent = start.parentNode;\n            var endParent = end.parentNode;\n            var startIndex = this._normalizedIndex(start);\n            var endIndex = this._normalizedIndex(end);\n\n            normalize(startParent);\n            if (start.nodeType == 3) {\n                start = startParent.childNodes[startIndex];\n            }\n\n            normalize(endParent);\n            if (end.nodeType == 3) {\n                end = endParent.childNodes[endIndex];\n            }\n\n            if (collapsed) {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                }\n\n                range.collapse(true);\n\n            } else {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range.setStartBefore(start);\n                }\n\n                if (end.nodeType == 3) {\n                    range.setEnd(end, endOffset);\n                } else {\n                    range.setEndAfter(end);\n                }\n            }\n\n            if (that.caret) {\n                that.removeCaret(range);\n            }\n        }\n    });\n\n    var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\n    var RangeUtils = {\n        nodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n            return nodes;\n        },\n\n        textNodes: function(range) {\n            var allNodes = new RangeEnumerator(range).enumerate(),\n                result = allNodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n\n            return result;\n        },\n\n        editableTextNodes: function(range) {\n            var nodes = [],\n                immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n                result = [];\n\n            if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                result = nodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n            }\n\n            return result;\n        },\n\n        documentFromRange: function(range) {\n            var startContainer = range.startContainer;\n            return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n        },\n\n        createRange: function(document) {\n            return document.createRange();\n        },\n\n        selectRange: function(range) {\n            var image = RangeUtils.image(range);\n            if (image) {\n                range.setStartAfter(image);\n                range.setEndAfter(image);\n            }\n            var selection = SelectionUtils.selectionFromRange(range);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        },\n\n        stringify: function(range) {\n            return kendo.format(\n                \"{0}:{1} - {2}:{3}\",\n                dom.name(range.startContainer), range.startOffset,\n                dom.name(range.endContainer), range.endOffset\n            );\n        },\n\n        split: function(range, node, trim) {\n            function partition(start) {\n                var partitionRange = range.cloneRange();\n                partitionRange.collapse(start);\n                partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                var contents = partitionRange.extractContents();\n                if (trim) {\n                    contents = dom.trim(contents);\n                }\n                dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n            }\n            partition(true);\n            partition(false);\n        },\n\n        mapAll: function(range, map) {\n            var nodes = [];\n\n            new RangeIterator(range).traverse(function(node) {\n                var mapped = map(node);\n\n                if (mapped && $.inArray(mapped, nodes) < 0) {\n                    nodes.push(mapped);\n                }\n            });\n\n            return nodes;\n        },\n\n        getAll: function(range, predicate) {\n            var selector = predicate;\n\n            if (typeof predicate == \"string\") {\n                predicate = function(node) {\n                    return dom.is(node, selector);\n                };\n            }\n\n            return RangeUtils.mapAll(range, function(node) {\n                if (predicate(node)) {\n                    return node;\n                }\n            });\n        },\n\n        getMarkers: function(range) {\n            return RangeUtils.getAll(range, function(node) {\n                return node.className == 'k-marker';\n            });\n        },\n\n        image: function(range) {\n            var nodes = RangeUtils.getAll(range, \"img\");\n\n            if (nodes.length == 1) {\n                return nodes[0];\n            }\n        },\n\n        isStartOf: function(originalRange, node) {\n            if (originalRange.startOffset !== 0) {\n                return false;\n            }\n\n            var range = originalRange.cloneRange();\n\n            while (range.startOffset === 0 && range.startContainer != node) {\n                var index = dom.findNodeIndex(range.startContainer);\n                var parent = range.startContainer.parentNode;\n\n                while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                    index--;\n                }\n\n                range.setStart(parent, index);\n            }\n\n            return range.startOffset === 0 && range.startContainer == node;\n        },\n\n        isEndOf: function(originalRange, node) {\n            var range = originalRange.cloneRange();\n\n            range.collapse(false);\n\n            var start = range.startContainer;\n\n            if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                range.collapse(true);\n            }\n\n            range.setEnd(node, dom.getNodeLength(node));\n\n            var nodes = [];\n\n            function visit(node) {\n                if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                    nodes.push(node);\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return !nodes.length;\n        },\n\n        wrapSelectedElements: function(range) {\n            var startEditable = dom.editableParent(range.startContainer);\n            var endEditable = dom.editableParent(range.endContainer);\n\n            while (range.startOffset === 0 && range.startContainer != startEditable) {\n                range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n            }\n\n            function isEnd(offset, container) {\n                var length = dom.getNodeLength(container);\n\n                if (offset == length) {\n                    return true;\n                }\n\n                for (var i = offset; i < length; i++) {\n                    if (!dom.insignificant(container.childNodes[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n            }\n\n            return range;\n        },\n\n        expand: function(range) {\n            var result = range.cloneRange();\n\n            var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n            var endContainer = result.endContainer.childNodes[result.endOffset];\n\n            if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                return result;\n            }\n\n            var beforeCaret = startContainer.nodeValue;\n            var afterCaret = endContainer.nodeValue;\n\n            if (!beforeCaret || !afterCaret) {\n                return result;\n            }\n\n            var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            var endOffset = afterCaret.search(boundary);\n\n            if (!startOffset || !endOffset) {\n                return result;\n            }\n\n            endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n            startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n            result.setStart(startContainer, startOffset);\n            result.setEnd(endContainer, endOffset);\n\n            return result;\n        },\n\n        isExpandable: function(range) {\n            var node = range.startContainer;\n            var rangeDocument = RangeUtils.documentFromRange(range);\n\n            if (node == rangeDocument || node == rangeDocument.body) {\n                return false;\n            }\n\n            var result = range.cloneRange();\n\n            var value = node.nodeValue;\n            if (!value) {\n                return false;\n            }\n\n            var beforeCaret = value.substring(0, result.startOffset);\n            var afterCaret = value.substring(result.startOffset);\n\n            var startOffset = 0, endOffset = 0;\n\n            if (beforeCaret) {\n                startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            }\n\n            if (afterCaret) {\n                endOffset = afterCaret.search(boundary);\n            }\n\n            return startOffset && endOffset;\n        }\n    };\n\n    extend(Editor, {\n        SelectionUtils: SelectionUtils,\n        W3CRange: W3CRange,\n        RangeIterator: RangeIterator,\n        W3CSelection: W3CSelection,\n        RangeEnumerator: RangeEnumerator,\n        RestorePoint: RestorePoint,\n        Marker: Marker,\n        RangeUtils: RangeUtils\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Editor = kendo.ui.editor,\n            dom = Editor.Dom,\n            template = kendo.template,\n            RangeUtils = Editor.RangeUtils,\n            complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n            toolsToBeUpdated = [\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"strikethrough\",\n                \"superscript\",\n                \"subscript\",\n                \"forecolor\",\n                \"backcolor\",\n                \"fontname\",\n                \"fontsize\",\n                \"createlink\",\n                \"unlink\",\n                \"autolink\",\n                \"addcolumnleft\",\n                \"addcolumnright\",\n                \"addrowabove\",\n                \"addrowbelow\",\n                \"deleterow\",\n                \"deletecolumn\",\n                \"mergecells\",\n                \"formatting\",\n                \"cleanformatting\" ],\n            IMMUTABALE = \"k-immutable\",\n            IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n            IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n        var rootCondition = function(node) {\n            return $(node).is(\"body,.k-editor\");\n        };\n\n        var immutable = function(node) {\n            return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n        };\n\n        var immutableParent = function(node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n\n        var expandImmutablesIn = function(range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n\n        var immutablesContext = function(range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        var randomId = function(length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n\n        var removeImmutables = function(root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n             $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n                serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n\n            return serializedImmutables;\n        };\n\n        var restoreImmutables = function(root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr(\"style\")) {\n                    $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n                }\n            });\n        };\n\n        var deletingKey = function(keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function(tool) {\n            var options = tool ? tool.options : undefined$1;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n\n        var Immutables = Class.extend({\n            init: function(editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n                var tools = kendo.ui.Editor.defaultTools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n\n            serialize: function(node) {\n                var result = this._toHtml(node),\n                    id;\n\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n\n            _toHtml: function(node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n\n                switch (serializationType) {\n                    case \"string\":\n                        return template(serialization)(node);\n                    case \"function\":\n                        return serialization(node);\n                    default:\n                        nodeName = dom.name(node);\n                        return \"<\" + nodeName + \"></\" + nodeName + \">\";\n                }\n            },\n\n            deserialize: function(node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n\n                that.serializedImmutables = {};\n            },\n\n            randomId: function(length) {\n                return randomId(length);\n            },\n\n            keydown: function(e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                    (!isDeleting && this._cancelTyping(e, range));\n\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n\n            _cancelTyping: function(e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n\n                return range.collapsed && !keyboard.typingInProgress &&\n                    keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n\n            _cancelDeleting: function(e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, \"li\");\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n\n            nextImmutable: function(range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n\n            _removeImmutable: function(immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n\n            _nextNode: function(node, forwards) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n                var current = node, next;\n                while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n\n        Editor.Immutables = Immutables;\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            extend = $.extend;\n\n    function finishUpdate(editor, startRestorePoint) {\n        var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n        var command = new GenericCommand(startRestorePoint, endRestorePoint);\n        command.editor = editor;\n\n        editor.undoRedoStack.push(command);\n        editor._refreshTools();\n\n        return endRestorePoint;\n    }\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n            this.marker = new Marker();\n            this.formatter = options.formatter;\n        },\n\n        getRange: function() {\n            return this.restorePoint.toRange();\n        },\n\n        lockRange: function(expand) {\n            return this.marker.add(this.getRange(), expand);\n        },\n\n        releaseRange: function(range) {\n            this.marker.remove(range);\n            this.editor.selectRange(range);\n        },\n\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n            this.editor.selectRange(point.toRange());\n        },\n\n        redo: function() {\n            this.exec();\n        },\n\n        createDialog: function(content, options) {\n            var editor = this.editor;\n\n            return $(content).appendTo(document.body)\n                .kendoWindow(extend({}, editor.options.dialogOptions, options))\n                .closest(\".k-window\")\n                .addClass(\"k-editor-window\")\n                .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.formatter.editor = this.editor;\n            this.formatter.toggle(range);\n            this.releaseRange(range);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        expandImmutablesIn: function(range) {\n            if (this.immutables()) {\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                this.restorePoint = new RestorePoint(range, this.editor.body);\n            }\n        },\n\n        _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n            return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n            kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n            kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n        '</div>';\n        }\n    });\n\n    var GenericCommand = Class.extend({\n        init: function(startRestorePoint, endRestorePoint) {\n            this.body = startRestorePoint.body;\n            this.startRestorePoint = startRestorePoint;\n            this.endRestorePoint = endRestorePoint;\n        },\n\n        redo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.endRestorePoint.html;\n            this.editor.selectRange(this.endRestorePoint.toRange());\n        },\n\n        undo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.startRestorePoint.html;\n            this.editor.selectRange(this.startRestorePoint.toRange());\n        }\n    });\n\n    extend(editorNS, {\n        _finishUpdate: finishUpdate,\n        Command: Command,\n        GenericCommand: GenericCommand\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        dom = Editor.Dom;\n\n    var ViewHtmlCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.async = true;\n        },\n\n        exec: function() {\n            var that = this,\n                editor = that.editor,\n                options = editor.options,\n                messages = editor.options.messages,\n                dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n                textarea = \".k-editor-textarea > textarea\",\n                content, comments;\n\n            options.serialization.immutables = editor.immutables;\n\n            comments = dom.getAllComments(editor.body);\n\n            content = EditorUtils.cacheComments(editor.value(), comments);\n            content = ViewHtmlCommand.indent(content);\n            content = EditorUtils.retrieveComments(content, comments);\n\n            options.serialization.immutables = undefined$1;\n\n            function apply(e) {\n                options.deserialization.immutables = editor.immutables;\n                editor.value(dialog.find(textarea).val());\n                options.deserialization.immutables = undefined$1;\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                editor.trigger(\"change\");\n            }\n\n            function close(e) {\n                e.preventDefault();\n\n                dialog.data(\"kendoWindow\").destroy();\n\n                if (editor.immutables) {\n                    editor.immutables.serializedImmutables = {};\n                }\n\n                editor.focus();\n            }\n\n            let window = this.createDialog(dialog, {\n                title: messages.viewHtml,\n                _footerTemplate: ViewHtmlCommand._footerTemplate,\n                _footerMessages: messages,\n                width: 600,\n                height: 400,\n                resizable: true,\n                close: close,\n                visible: false\n            })\n                .find(textarea).val(content).end()\n                .data(\"kendoWindow\");\n\n                window.center().open();\n\n                window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n                window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n            dialog.find(textarea).trigger(\"focus\");\n        }\n    });\n\n    extend(ViewHtmlCommand, {\n        template: () =>\n        '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n            '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n        '</div>',\n        _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n        `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n            kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n            kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n        `</div>`,\n        indent: function(content) {\n            return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                          .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                          .replace(/<br \\/>/ig, \"<br />\\n\")\n                          .replace(/\\n$/, \"\");\n        }\n    });\n\n    kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\n    Editor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils;\n\n    var FormatCommand = Command.extend({\n        init: function(options) {\n            options.formatter = options.formatter();\n            var finder = options.formatter.finder;\n            if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n                finder._initOptions({ immutables: options.immutables });\n            }\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var FormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = this.options.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar && ui.getKendoToggleButton()) {\n                toolbar.toggle(ui, isFormatted);\n            }\n        }\n    });\n\n    $.extend(Editor, {\n        FormatCommand: FormatCommand,\n        FormatTool: FormatTool\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        Tool = Editor.Tool,\n        FormatTool = Editor.FormatTool,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        extend = $.extend,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\",\n        KMARKER = \"k-marker\";\n\n    var InlineFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        numberOfSiblings: function(referenceNode) {\n            var textNodesCount = 0,\n                elementNodesCount = 0,\n                markerCount = 0,\n                parentNode = referenceNode.parentNode,\n                node;\n\n            for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                if (node != referenceNode) {\n                    if (node.className == KMARKER) {\n                        markerCount++;\n                    } else if (node.nodeType == 3) {\n                        textNodesCount++;\n                    } else {\n                        elementNodesCount++;\n                    }\n                }\n            }\n\n            if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                // full node selection\n                return 0;\n            } else {\n                return elementNodesCount + textNodesCount;\n            }\n        },\n\n        findSuitable: function(sourceNode, skip) {\n            if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                return null;\n            }\n\n            var node = sourceNode.parentNode;\n            var tags = this.format[0].tags;\n\n            while (!dom.ofType(node, tags)) {\n                if (this.numberOfSiblings(node) > 0) {\n                    return null;\n                }\n\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        findFormat: function(sourceNode) {\n            var format = this.format,\n                attrEquals = dom.attrEquals,\n                i, len, node, tags, attributes;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                while (node) {\n                    node = dom.parentOfType(node, tags);\n                    if (node && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                }\n            }\n\n            return null;\n        },\n\n        isFormatted: function(nodes) {\n            var i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                if (this.findFormat(nodes[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    var InlineFormatter = Class.extend({\n        init: function(format, values) {\n            this.finder = new InlineFormatFinder(format);\n            this.attributes = extend({}, format[0].attr, values);\n            this.tag = format[0].tags[0];\n        },\n\n        wrap: function(node) {\n            return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n        },\n\n        activate: function(range, nodes) {\n            if (this.finder.isFormatted(nodes)) {\n                this.split(range);\n                this.remove(nodes);\n            } else {\n                this.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n            var nodes = textNodes(range);\n\n            if (nodes.length > 0) {\n                this.activate(range, nodes);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        apply: function(nodes) {\n            var formatNodes = [];\n            var i, l, node, formatNode;\n\n            if (nodes.length > 1) {\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.format(node, true);\n                    formatNodes.push(formatNode);\n\n                }\n            } else {\n                node = nodes[0];\n                formatNode = this.format(node, false);\n            }\n\n            this.consolidate(formatNodes);\n        },\n\n        format: function(node, outerMostInline) {\n            var formatNode = this.finder.findSuitable(node);\n            var attributes = this.attributes;\n            var styleAttr = attributes ? attributes.style || {} : {};\n\n            if (formatNode) {\n                if (dom.is(formatNode, \"font\")) {\n                    if (styleAttr.color) {\n                        formatNode.removeAttribute(\"color\");\n                    }\n                    if (styleAttr.fontName) {\n                        formatNode.removeAttribute(\"face\");\n                    }\n                    if (styleAttr.fontSize) {\n                        formatNode.removeAttribute(\"size\");\n                    }\n                }\n                dom.attr(formatNode, attributes);\n            } else {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                    node = node.parentNode;\n                }\n\n                formatNode = this.wrap(node);\n            }\n\n            return formatNode;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode;\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    if (this.attributes && this.attributes.style) {\n                        dom.unstyle(formatNode, this.attributes.style);\n                        if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                            dom.unwrap(formatNode);\n                        }\n                    } else {\n                        dom.unwrap(formatNode);\n                    }\n                }\n            }\n        },\n\n        split: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            var l = nodes.length;\n            var i, formatNode;\n\n            if (l > 0) {\n                for (i = 0; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        },\n\n        consolidate: function(nodes) {\n            var node, last;\n\n            while (nodes.length > 1) {\n                node = nodes.pop();\n                last = nodes[nodes.length - 1];\n\n                if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                    last.appendChild(node.previousSibling);\n                }\n\n                if (node.tagName == last.tagName &&\n                    node.previousSibling == last &&\n                    node.style.cssText == last.style.cssText &&\n                    node.className === last.className) {\n\n                    while (node.firstChild) {\n                        last.appendChild(node.firstChild);\n                    }\n\n                    dom.remove(node);\n                }\n            }\n        }\n    });\n\n    var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n        init: function(format, greedyProperty, fontAttr, defaultValue) {\n            this.format = format;\n            this.greedyProperty = greedyProperty;\n            this.fontAttr = fontAttr;\n            this.defaultValue = defaultValue;\n            InlineFormatFinder.fn.init.call(this, format);\n        },\n\n        getInlineCssValue: function(node) {\n            var attributes = node.attributes;\n            var trim = kendo.trim;\n            var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n            var propertyAndValue, property, value;\n\n            if (!attributes) {\n                return;\n            }\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                attributeValue = attribute.nodeValue;\n\n                if (attribute.specified && name == \"style\") {\n\n                    css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                    for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                        pair = css[cssIndex];\n                        if (pair.length) {\n                            propertyAndValue = pair.split(\":\");\n                            property = trim(propertyAndValue[0].toLowerCase());\n                            value = trim(propertyAndValue[1]);\n\n                            if (property != this.greedyProperty) {\n                                continue;\n                            }\n\n                            return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                        }\n                    }\n                }\n\n                if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                    property = attribute.nodeValue;\n                    value = attribute.nodeValue;\n\n                    return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                }\n            }\n        },\n\n        getFormatInner: function(node) {\n            var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n            var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n            var i, len, value;\n\n            for (i = 0, len = parents.length; i < len; i++) {\n                value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n                if (value) {\n                    return value;\n                }\n            }\n\n            return this.defaultValue || \"inherit\";\n        },\n\n        getFormat: function(nodes) {\n            var result = this.getFormatInner(nodes[0]), i, len;\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != this.getFormatInner(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result;\n        },\n\n        isFormatted: function(nodes) {\n            return this.getFormat(nodes) !== \"\";\n        }\n    });\n\n    var GreedyInlineFormatter = InlineFormatter.extend({\n        init: function(format, values, greedyProperty) {\n            InlineFormatter.fn.init.call(this, format, values);\n\n            this.values = values;\n            this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n            if (greedyProperty) {\n                this.greedyProperty = kendo.toCamelCase(greedyProperty);\n            }\n\n        },\n\n        activate: function(range, nodes) {\n            var greedyProperty = this.greedyProperty;\n            var action = \"apply\";\n\n            this.split(range);\n\n            if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n                action = \"remove\";\n            }\n\n            this[action](nodes);\n        }\n    });\n\n    var InlineFormatTool = FormatTool.extend({\n        init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new InlineFormatFinder(options.format),\n                formatter: function() { return new InlineFormatter(options.format); }\n            }));\n        }\n    });\n\n    var DelayedExecutionTool = Tool.extend({\n        update: function(ui, nodes) {\n            var list = ui.data(this.type);\n\n            list.close();\n            list.value(this.finder.getFormat(nodes));\n        }\n    });\n\n    var FontTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            // IE has single selection hence we are using select box instead of combobox\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"span\", \"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options,\n                toolName = options.name,\n                dataSource,\n                range,\n                widget = ui.data(\"kendoComboBox\"),\n                defaultValue = [];\n\n            if (!widget) {\n                return;\n            }\n\n            if (options.defaultValue) {\n               defaultValue = [{\n                    text: editor.options.messages[options.defaultValue[0].text],\n                    value: options.defaultValue[0].value\n               }];\n            }\n\n            dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n            widget.setDataSource(dataSource);\n\n            widget.bind(\"change\", (e) => {\n                editor._range = range;\n                if (e.sender.value() !== \"\") {\n                    Tool.exec(editor, toolName, e.sender.value());\n                }\n            });\n\n            widget.bind(\"close\", () => {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            });\n\n            widget.value(\"inherit\");\n\n            widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n                var newRange = editor.getRange();\n                range = editor._containsRange(newRange) ? newRange : range;\n            })\n            .on(KEYDOWN_NS, function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    editor._deleteSavedRange();\n                    e.preventDefault();\n                }\n            });\n        }\n\n    });\n\n    var ColorTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.format = [{ tags: [\"span\",\"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n        },\n\n        options: {\n            palette: \"websafe\",\n            columns: 18\n        },\n\n        update: function() {\n            this._widget.close();\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var that = this,\n                toolName = that.options.name,\n                component = this._widget = ui.getKendoColorPicker();\n\n            if (!component) {\n                return;\n            }\n\n            component.bind(\"change\", () => {\n                var color = component.value();\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n\n                editor.focus();\n            });\n\n            component.bind(\"open\", () => {\n                that.storedRange = editor.getRange();\n\n                component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!component._popup.element.is(\"[unselectable='on']\")) {\n                    component._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                component._popup.one(\"activate\", () => {\n                    component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            });\n\n            component.bind(\"close\", (e) => {\n                component._popup.element.off(MOUSEDOWN_NS);\n            });\n\n            component.unbind(\"activate\").bind(\"activate\", (e) => {\n                if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                component.trigger(\"change\");\n            });\n\n            component.wrapper\n                .attr({ unselectable: \"on\" })\n                .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n            component.value(\"transparent\");\n        }\n    });\n\n    extend(Editor, {\n        InlineFormatFinder: InlineFormatFinder,\n        InlineFormatter: InlineFormatter,\n        DelayedExecutionTool: DelayedExecutionTool,\n        GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n        GreedyInlineFormatter: GreedyInlineFormatter,\n        InlineFormatTool: InlineFormatTool,\n        FontTool: FontTool,\n        ColorTool: ColorTool\n    });\n\n    registerFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\n    registerTool(\"bold\", new InlineFormatTool({\n        key: \"B\",\n        ctrl: true,\n        format: formats.bold,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\n    registerTool(\"italic\", new InlineFormatTool({\n        key: \"I\",\n        ctrl: true,\n        format: formats.italic,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\n    registerTool(\"underline\", new InlineFormatTool({\n        key: \"U\",\n        ctrl: true,\n        format: formats.underline,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\n    registerTool(\"strikethrough\", new InlineFormatTool({\n        format: formats.strikethrough,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\n    registerTool(\"superscript\", new InlineFormatTool({\n        format: formats.superscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\n    registerTool(\"subscript\", new InlineFormatTool({\n        format: formats.subscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerTool(\"foreColor\", new ColorTool({\n        cssAttr: \"color\",\n        fontAttr: \"color\",\n        domAttr: \"color\",\n        name: \"foreColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"foreground-color\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"backColor\", new ColorTool({\n        cssAttr: \"background-color\",\n        domAttr: \"backgroundColor\",\n        name: \"backColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"droplet\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"fontName\", new FontTool({\n        cssAttr: \"font-family\",\n        fontAttr: \"face\",\n        domAttr: \"fontFamily\",\n        name: \"fontName\",\n        defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"fontSize\", new FontTool({\n        cssAttr: \"font-size\",\n        fontAttr: \"size\",\n        domAttr: \"fontSize\",\n        name: \"fontSize\",\n        defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        InlineFormatter = Editor.InlineFormatter,\n        InlineFormatFinder = Editor.InlineFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        editableTextNodes = RangeUtils.editableTextNodes,\n        registerTool = Editor.EditorUtils.registerTool,\n        keys = kendo.keys;\n\n    var HTTP_PROTOCOL = \"http://\";\n    var protocolRegExp = /^\\w*:\\/\\//;\n    var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\n    var LinkFormatFinder = Class.extend({\n        findSuitable: function(sourceNode) {\n            return dom.parentOfType(sourceNode, [\"a\"]);\n        }\n    });\n\n    var LinkFormatter = Class.extend({\n        init: function() {\n            this.finder = new LinkFormatFinder();\n        },\n\n        apply: function(range, attributes) {\n            var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n            var markers, doc, formatter, a, parent;\n\n            if (attributes.innerText) {\n                doc = RangeUtils.documentFromRange(range);\n                markers = RangeUtils.getMarkers(range);\n\n                range.deleteContents();\n                a = dom.create(doc, \"a\", attributes);\n                range.insertNode(a);\n\n                parent = a.parentNode;\n                if (dom.name(parent) == \"a\") {\n                    dom.insertAfter(a, parent);\n                }\n\n                if (dom.emptyNode(parent)) {\n                    dom.remove(parent);\n                }\n\n                // move range and markers after inserted link\n                var ref = a;\n                for (var i = 0; i < markers.length; i++) {\n                    dom.insertAfter(markers[i], ref);\n                    ref = markers[i];\n                }\n\n                if (markers.length) {\n                    dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    range.setStartBefore(markers[0]);\n                    range.setEndAfter(markers[markers.length - 1]);\n                }\n            } else {\n                formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n                formatter.finder = this.finder;\n                formatter.apply(nodes);\n            }\n        }\n    });\n\n    var UnlinkCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: function(range) {\n                    var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                    new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n                }\n            };\n            this.options = options;\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var LinkCommand = Command.extend({\n        init: function(options) {\n            var that;\n            this.options = options;\n            Command.fn.init.call(this, options);\n            this.formatter = new LinkFormatter();\n\n            if (!options.url) {\n                this.attributes = null;\n                this.async = true;\n            } else {\n                this.exec = function() {\n                    this.formatter.immutables = that && that.immutables();\n                    this.formatter.apply(options.range, {\n                        href: options.url,\n                        innerText: options.text || options.url,\n                        target: options.target\n                    });\n                };\n            }\n        },\n\n        exec: function() {\n            var messages = this.editor.options.messages;\n            this._initialText = \"\";\n            this._range = this.lockRange(true);\n            this.formatter.immutables = this.immutables();\n\n            var nodes = textNodes(this._range);\n            var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n            var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n            var dialog = this.createDialog(\"<div/>\", {\n                title: messages.createLink,\n                minWidth: 340,\n                close: this._close.bind(this),\n                visible: false\n            }).data(\"kendoWindow\");\n\n            this._form = this._createForm(dialog);\n\n            if (a) {\n                this._range.selectNodeContents(a);\n                nodes = textNodes(this._range);\n            }\n\n            this._initialText = this.linkText(nodes);\n\n            dialog.wrapper\n                .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n                .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n                .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n                .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n                .find(\"#k-editor-link-text\").val(this._initialText).end()\n                .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n                .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n                .find(\".k-editor-link-text-row\").toggle(!img);\n\n            this._dialog = dialog.center().open();\n\n            $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-link-url\",\n                        label: encode(messages.linkWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-text\",\n                        label: encode(messages.linkText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-title\",\n                        label: encode(messages.linkToolTip),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-target\",\n                        editorOptions: {\n                            label: encode(messages.linkOpenInNewWindow)\n                        },\n                        label: \"\",\n                        editor: \"CheckBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        },\n\n        _keydown: function(e) {\n            var keys = kendo.keys;\n\n            if (e.keyCode == keys.ENTER) {\n                this._apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                this._close(e);\n            }\n        },\n\n        _apply: function(e) {\n            var element = this._dialog.element;\n            var href = $(\"#k-editor-link-url\", element).val();\n            var title, text, target;\n            var textInput = $(\"#k-editor-link-text\", element);\n\n            if (href && href != HTTP_PROTOCOL) {\n\n                if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                    href = \"mailto:\" + href;\n                }\n\n                this.attributes = { href: href };\n\n                title = $(\"#k-editor-link-title\", element).val();\n                if (title) {\n                    this.attributes.title = title;\n                }\n\n                if (textInput.is(\":visible\")) {\n                    text = kendo.trim(textInput.val());\n                    if (!text && !this._initialText) {\n                        this.attributes.innerText = href;\n                    } else if (text && (text !== this._initialText)) {\n                        this.attributes.innerText = dom.stripBom(text);\n                    }\n                }\n\n                target = $(\"#k-editor-link-target\", element).is(\":checked\");\n                this.attributes.target = target ? \"_blank\" : null;\n\n                this.formatter.apply(this._range, this.attributes);\n            }\n\n            this._close(e);\n\n            if (this.change) {\n                this.change();\n            }\n        },\n\n        _close: function(e) {\n            e.preventDefault();\n            this._form.destroy();\n            this._dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n            this.releaseRange(this._range);\n        },\n\n        linkUrl: function(anchor) {\n            if (anchor) {\n                // IE < 8 returns absolute url if getAttribute is not used\n                return anchor.getAttribute(\"href\", 2);\n            }\n\n            return HTTP_PROTOCOL;\n        },\n\n        linkText: function(nodes) {\n            var text = \"\";\n            var i;\n\n            for (i = 0; i < nodes.length; i++) {\n                text += nodes[i].nodeValue;\n            }\n\n            return dom.stripBom(text || \"\");\n        },\n\n        redo: function() {\n            var range = this.lockRange(true);\n\n            this.formatter.apply(range, this.attributes);\n            this.releaseRange(range);\n        }\n\n    });\n\n    var AutoLinkCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.formatter = new LinkFormatter();\n        },\n\n        exec: function() {\n            var detectedLink = this.detectLink();\n            if (!detectedLink) {\n                return;\n            }\n\n            var range = this.getRange();\n            var linkMarker = new kendo.ui.editor.Marker();\n            var linkRange = range.cloneRange();\n\n            linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n            linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n            range = this.lockRange();\n            linkMarker.add(linkRange);\n\n            this.formatter.apply(linkRange, {\n                href: this._ensureWebProtocol(detectedLink.text)\n            });\n\n            linkMarker.remove(linkRange);\n            this.releaseRange(range);\n        },\n\n        detectLink: function() {\n            var range = this.getRange();\n            var startNode = range.startContainer;\n            var startOffset = range.startOffset;\n            var prev = startNode.previousSibling;\n            if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n                startNode = startNode.parentNode;\n                startOffset = 0;\n            }\n            var traverser = new LeftDomTextTraverser({\n                node: startNode,\n                offset: startOffset,\n                cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n            });\n\n            var detection = new DomTextLinkDetection(traverser);\n            return detection.detectLink();\n        },\n\n        changesContent: function() {\n            return !!this.detectLink();\n        },\n\n        _ensureWebProtocol: function(linkText) {\n            var hasProtocol = this._hasProtocolPrefix(linkText);\n            return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n        },\n\n        _hasProtocolPrefix: function(linkText) {\n            return protocolRegExp.test(linkText);\n        },\n\n        _prefixWithWebProtocol: function(linkText) {\n            return HTTP_PROTOCOL + linkText;\n        }\n    });\n\n    var UnlinkTool = Tool.extend({\n        init: function(options) {\n            this.options = options;\n            this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n            Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n        },\n\n        update: function(ui, nodes) {\n            var isLink = this.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            if (isLink) {\n                toolbar.enable(ui, true);\n            } else {\n                toolbar.enable(ui, false);\n            }\n        }\n    });\n\n    var DomTextLinkDetection = Class.extend({\n        init: function(traverser) {\n            this.traverser = traverser;\n            this.start = DomPos();\n            this.end = DomPos();\n            this.text = \"\";\n        },\n\n        detectLink: function() {\n            var node = this.traverser.node;\n            var offset = this.traverser.offset;\n            if (dom.isDataNode(node)) {\n                var text = node.data.substring(0, offset);\n                if (/\\s{2}$/.test(dom.stripBom(text))) {\n                    return;\n                }\n            } else if (offset === 0) {//heuristic for new line\n                var p = dom.closestEditableOfType(node, dom.blockElements);\n                if (p && p.previousSibling) {\n                    this.traverser.init({\n                        node: p.previousSibling\n                    });\n                }\n            }\n\n            this.traverser.traverse(this._detectEnd.bind(this));\n            if (!this.end.blank()) {\n                this.traverser = this.traverser.clone(this.end);\n                this.traverser.traverse(this._detectStart.bind(this));\n\n                if (!this._isLinkDetected()) {\n                    var puntuationOptions = this.traverser.extendOptions(this.start);\n                    var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                    puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                    if (!this._isLinkDetected()) {\n                        this.start = DomPos();\n                    }\n                }\n            }\n\n            if (this.start.blank()) {\n                return null;\n            } else {\n                return {\n                    start: this.start,\n                    end: this.end,\n                    text: this.text\n                };\n            }\n        },\n\n        _isLinkDetected: function() {\n            return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n        },\n\n        _detectEnd: function(text, node) {\n            var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n            if (i > -1) {\n                this.end.node = node;\n                this.end.offset = i + 1;\n\n                return false;\n            }\n        },\n\n        _detectStart: function(text, node) {\n            var i = lastIndexOfRegExp(text, /\\s/);\n            var ii = i + 1;\n            this.text = text.substring(ii) + this.text;\n\n            this.start.node = node;\n            this.start.offset = ii;\n\n            if (i > -1) {\n                return false;\n            }\n        },\n\n        _skipStartPuntuation: function(text, node, offset) {\n            var i = indexOfRegExp(text, /\\w/);\n            var ii = i;\n            if (i === -1) {\n                ii = text.length;\n            }\n\n            this.text = this.text.substring(ii);\n            this.start.node = node;\n            this.start.offset = ii + (offset | 0);\n\n            if (i > -1) {\n                return false;\n            }\n        }\n    });\n\n    function lastIndexOfRegExp(str, search) {\n        var i = str.length;\n        while (i-- && !search.test(str[i])) {}\n\n        return i;\n    }\n    function indexOfRegExp(str, search) {\n        var r = search.exec(str);\n\n        return r ? r.index : -1;\n    }\n\n    var DomPos = function() {\n        return {\n            node: null,\n            offset: null,\n            blank: function() {\n                return this.node === null && this.offset === null;\n            }\n        };\n    };\n\n    var DomTextTraverser = Class.extend({\n        init: function(options) {\n            this.node = options.node;\n            this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n            this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n        },\n\n        traverse: function(callback) {\n            if (!callback) {\n                return;\n            }\n            this.cancel = false;\n            this._traverse(callback, this.node, this.offset);\n        },\n\n        _traverse: function(callback, node, offset) {\n            if (!node || this.cancel) {\n                return;\n            }\n            if (node.nodeType === 3) {\n                var text = node.data;\n                if (offset !== undefined$1) {\n                    text = this.subText(text, offset);\n                }\n                this.cancel = (callback(text, node, offset) === false);\n            }\n            else {\n                var edgeNode = this.edgeNode(node);\n                this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                return this._traverse(callback, edgeNode);\n            }\n\n            var next = this.next(node);\n            if (!next) {\n                var parent = node.parentNode;\n                while (!next && dom.isInline(parent)) {\n                    next = this.next(parent);\n                    parent = parent.parentNode;\n                }\n            }\n            this.cancel = this.cancel || this.cancelAtNode(next);\n            this._traverse(callback, next);\n        },\n\n        extendOptions: function(o) {\n            return $.extend({\n                node: this.node,\n                offset: this.offset,\n                cancelAtNode: this.cancelAtNode\n            }, o || {});\n        },\n\n        edgeNode: function(node) {},\n        next: function(node) {},\n        subText: function(text, offset) {}\n\n    });\n\n    var LeftDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(0, splitIndex);\n        },\n\n        next: function(node) {\n            return node.previousSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.lastChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new LeftDomTextTraverser(o);\n        }\n    });\n\n    var RightDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(splitIndex);\n        },\n\n        next: function(node) {\n            return node.nextSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.firstChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new RightDomTextTraverser(o);\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        LinkFormatFinder: LinkFormatFinder,\n        LinkFormatter: LinkFormatter,\n        UnlinkCommand: UnlinkCommand,\n        LinkCommand: LinkCommand,\n        AutoLinkCommand: AutoLinkCommand,\n        UnlinkTool: UnlinkTool,\n        DomTextLinkDetection: DomTextLinkDetection,\n        LeftDomTextTraverser: LeftDomTextTraverser,\n        RightDomTextTraverser: RightDomTextTraverser\n    });\n\n    registerTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\n    registerTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\n    registerTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        FormatTool = Editor.FormatTool,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    var BlockFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        contains: function(node, children) {\n            var i, len, child;\n\n            for (i = 0, len = children.length; i < len; i++) {\n                child = children[i];\n                if (!child || !dom.isAncestorOrSelf(node, child)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var format = this.format,\n                suitable = [],\n                i, len, candidate;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                for (var f = format.length - 1; f >= 0; f--) {\n                    candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                    if (candidate) {\n                        break;\n                    }\n                }\n\n                if (!candidate || candidate.contentEditable === 'true') {\n                    return [];\n                }\n\n                if ($.inArray(candidate, suitable) < 0) {\n                    suitable.push(candidate);\n                }\n            }\n\n            this._resolveListsItems(suitable);\n\n            for (i = 0, len = suitable.length; i < len; i++) {\n                if (this.contains(suitable[i], suitable)) {\n                    return [suitable[i]];\n                }\n            }\n\n            return suitable;\n        },\n        _resolveListsItems: function(nodes) {\n            var i, node, wrapper;\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n                wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                if (dom.is(wrapper, \"li\")) {\n                    node = nodes[i] = wrapper;\n                }\n            }\n        },\n\n        findFormat: function(sourceNode, until) {\n            var format = this.format,\n                i, len, node, tags, attributes;\n            var editableParent = dom.editableParent(sourceNode);\n            var immutables = this.options && this.options.immutables;\n            var ImmutablesNS = Editor.Immutables;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (immutables && tags && tags[0] == \"immutable\") {\n                    var immutable = ImmutablesNS.immutableParent(node);\n                    if (immutable && dom.attrEquals(immutable, attributes)) {\n                        return node;\n                    }\n                }\n\n                while (node && dom.isAncestorOf(editableParent, node)) {\n                    if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                        return node;\n                    }\n\n                    if (until && until(node)) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            return null;\n        },\n\n        getFormat: function(nodes) {\n            var that = this,\n                findFormat = function(node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    },\n                result = findFormat(nodes[0]),\n                i, len;\n\n            if (!result) {\n                return \"\";\n            }\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != findFormat(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result.nodeName.toLowerCase();\n        },\n\n        isFormatted: function(nodes, until) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                if (!this.findFormat(nodes[i], until)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    });\n\n    var BlockFormatter = Class.extend({\n        init: function(format, values) {\n            this.format = format;\n            this.values = values;\n            this.finder = new BlockFormatFinder(format);\n        },\n\n        wrap: function(tag, attributes, nodes) {\n\n            var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n            if (dom.isInline(commonAncestor)) {\n                commonAncestor = dom.blockParentOrBody(commonAncestor);\n            }\n\n            var ancestors = dom.significantChildNodes(commonAncestor),\n                position = dom.findNodeIndex(ancestors[0]),\n                wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n                i, ancestor;\n\n            for (i = 0; i < ancestors.length; i++) {\n                ancestor = ancestors[i];\n                if (dom.isBlock(ancestor)) {\n                    dom.attr(ancestor, attributes);\n\n                    if (wrapper.childNodes.length) {\n                        dom.insertBefore(wrapper, ancestor);\n                        wrapper = wrapper.cloneNode(false);\n                    }\n\n                    position = dom.findNodeIndex(ancestor) + 1;\n\n                    continue;\n                }\n\n                wrapper.appendChild(ancestor);\n            }\n\n            if (wrapper.firstChild) {\n                dom.insertAt(commonAncestor, wrapper, position);\n            }\n        },\n\n        apply: function(nodes) {\n            var format, values = this.values;\n\n            function attributes(format) {\n                return extend({}, format && format.attr, values);\n            }\n\n            this._handleImmutables(nodes, true);\n\n            var images = dom.filter(\"img\", nodes);\n            var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n            var imageAttributes = attributes(imageFormat);\n            $.each(images, function() {\n                dom.attr(this, imageAttributes);\n            });\n\n            // only images were selected, no need to wrap\n            if (images.length == nodes.length) {\n                return;\n            }\n\n            var nonImages = dom.filter(\"img\", nodes, true);\n            var formatNodes = this.finder.findSuitable(nonImages);\n\n            if (formatNodes.length) {\n                for (var i = 0, len = formatNodes.length; i < len; i++) {\n                    format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                    dom.attr(formatNodes[i], attributes(format));\n                }\n            } else {\n                format = this.format[0];\n                this.wrap(format.tags[0], attributes(format), nonImages);\n            }\n        },\n\n        _handleImmutables: function(nodes, applyFormatting) {\n            if (!this.immutables()) {\n                return;\n            }\n            var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n            if (!immutableFormat) {\n                return;\n            }\n            var ImmutablesNS = Editor.Immutables;\n            var l = nodes.length - 1;\n            for (var i = l; i >= 0; i--) {\n                var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                if (!immutableParent) {\n                    continue;\n                }\n                if (immutableParent !== nodes[i + 1]) {\n                    if (applyFormatting) {\n                        dom.attr(immutableParent, immutableFormat.attr);\n                    } else {\n                        dom.unstyle(immutableParent, immutableFormat.attr.style);\n                    }\n                }\n                nodes.splice(i, 1);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode, namedFormat, name;\n\n            this._handleImmutables(nodes, false);\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    name = dom.name(formatNode);\n                    namedFormat = EditorUtils.formatByName(name, this.format);\n                    if (namedFormat.attr.style) {\n                        dom.unstyle(formatNode, namedFormat.attr.style);\n                    }\n                    if (namedFormat.attr.className) {\n                        dom.removeClass(formatNode, namedFormat.attr.className);\n                    }\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            if (that.finder.isFormatted(nodes)) {\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n    });\n\n    var GreedyBlockFormatter = Class.extend({\n        init: function(format, values) {\n            var that = this;\n            that.format = format;\n            that.values = values;\n            that.finder = new BlockFormatFinder(format);\n        },\n\n        apply: function(nodes) {\n            var format = this.format;\n            var blocks = dom.blockParents(nodes);\n            var formatTag = format[0].tags[0];\n            var i, len, list, formatter, range;\n            var element;\n            var tagName;\n            var block;\n            var immutalbeParent;\n\n            if (blocks.length) {\n                for (i = 0, len = blocks.length; i < len; i++) {\n                    block = blocks[i];\n                    immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                    if (!immutalbeParent) {\n                        tagName = dom.name(block);\n\n                        if (tagName == \"li\") {\n                            list = block.parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(block.childNodes);\n                        } else {\n                            element = dom.changeTag(block, formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                }\n            } else {\n                var blockFormatter = new BlockFormatter(format, this.values);\n                blockFormatter.editor = this.editor;\n                blockFormatter.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n\n            this.apply(nodes);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        }\n    });\n\n    var BlockFormatTool = FormatTool.extend({ init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new BlockFormatFinder(options.format),\n                formatter: function() {\n                    return new BlockFormatter(options.format);\n                }\n            }));\n        }\n    });\n\n    extend(Editor, {\n        BlockFormatFinder: BlockFormatFinder,\n        BlockFormatter: BlockFormatter,\n        GreedyBlockFormatter: GreedyBlockFormatter,\n        BlockFormatTool: BlockFormatTool\n    });\n\n    var listElements = [\"ul\",\"ol\",\"li\"];\n\n    registerFormat(\"justifyLeft\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyLeft\", new BlockFormatTool({\n        format: formats.justifyLeft,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyCenter\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyCenter\", new BlockFormatTool({\n        format: formats.justifyCenter,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyRight\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyRight\", new BlockFormatTool({\n        format: formats.justifyRight,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyFull\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyFull\", new BlockFormatTool({\n        format: formats.justifyFull,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        FormatTool = Editor.FormatTool,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        registerTool = Editor.EditorUtils.registerTool;\n\n    var ListFormatFinder = BlockFormatFinder.extend({\n        init: function(options) {\n            this.tag = options.tag;\n            this.attr = options.attr;\n            this.altAttr = options.altAttr;\n\n            var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n            var format = [{ tags: tags, attr: this.attr }];\n\n            if (this.altAttr) {\n                format.push({\n                    tags: tags,\n                    attr: this.altAttr\n                });\n            }\n\n            BlockFormatFinder.fn.init.call(this, format);\n        },\n\n        matchesType: function(node) {\n            return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        isFormatted: function(nodes) {\n            var formatNodes = [];\n            var formatNode, i;\n\n            for (i = 0; i < nodes.length; i++) {\n                formatNode = this.findFormat(nodes[i], this.isList);\n\n                if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                    formatNodes.push(formatNode);\n                }\n            }\n\n            if (formatNodes.length < 1) {\n                return false;\n            }\n\n            if (formatNodes.length != nodes.length) {\n                return false;\n            }\n\n            // check if sequential lists are selected\n            for (i = 0; i < formatNodes.length; i++) {\n                if (formatNodes[i].parentNode != formatNode.parentNode) {\n                    break;\n                }\n\n                if (formatNodes[i] != formatNode) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var candidate = this.findFormat(nodes[0], this.isList);\n\n            if (candidate && dom.name(candidate) == this.tag) {\n                return candidate;\n            }\n\n            return null;\n        }\n\n    });\n\n    var ListFormatter = Class.extend({\n        init: function(options, unwrapTag) {\n            var that = this;\n            options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n            that.tag = options.tag;\n            that.attr = options.attr;\n            that.finder = new ListFormatFinder(options);\n            that.unwrapTag = unwrapTag;\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        immutables: function() {\n            return this.editor && !!this.editor.options.immutables;\n        },\n\n        wrap: function(list, nodes) {\n            var li = dom.create(list.ownerDocument, \"li\"),\n                i, node,\n                isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n\n                if (dom.is(node, 'li')) {\n                    list.appendChild(node);\n                    continue;\n                }\n\n                if (this.isList(node)) {\n                    while (node.firstChild) {\n                        list.appendChild(node.firstChild);\n                    }\n                    continue;\n                }\n\n                if (dom.is(node, \"td\")) {\n                    while (node.firstChild) {\n                        li.appendChild(node.firstChild);\n                    }\n                    list.appendChild(li);\n                    node.appendChild(list);\n                    list = list.cloneNode(false);\n                    li = li.cloneNode(false);\n                    continue;\n                }\n\n                li.appendChild(node);\n\n                if (dom.isBlock(node)) {\n                    list.appendChild(li);\n                    if (!isImmutable(node)) {\n                        dom.unwrap(node);\n                    }\n                    li = li.cloneNode(false);\n                }\n            }\n\n            if (li.firstChild) {\n                list.appendChild(li);\n            }\n        },\n\n        containsAny: function(parent, nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        suitable: function(candidate, nodes) {\n            if (candidate.className == \"k-marker\") {\n                var sibling = candidate.nextSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n\n                sibling = candidate.previousSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n            }\n\n            return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n        },\n\n        _parentLists: function(node) {\n            var editable = dom.closestEditable(node);\n\n            return $(node).parentsUntil(editable, \"ul,ol\");\n        },\n\n        split: function(range) {\n            var nodes = textNodes(range);\n            var start, end, parents;\n\n            if (nodes.length) {\n                start = dom.parentOfType(nodes[0], ['li']);\n                end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                range.setStartBefore(start);\n                range.setEndAfter(end);\n\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    var formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        parents = this._parentLists(formatNode);\n                        if (parents.length) {\n                            RangeUtils.split(range, parents.last()[0], true);\n                        } else {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            }\n        },\n\n        merge: function(tag, formatNode) {\n            var prev = formatNode.previousSibling, next;\n\n            while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n                prev = prev.previousSibling;\n            }\n\n            // merge with previous list\n            if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                while (formatNode.firstChild) {\n                    prev.appendChild(formatNode.firstChild);\n                }\n                dom.remove(formatNode);\n                formatNode = prev;\n            }\n\n            next = formatNode.nextSibling;\n            while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n                next = next.nextSibling;\n            }\n\n            // merge with next list\n            if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                while (formatNode.lastChild) {\n                    next.insertBefore(formatNode.lastChild, next.firstChild);\n                }\n                dom.remove(formatNode);\n            }\n        },\n\n        breakable: function(node) {\n            return (\n                node != node.ownerDocument.body &&\n                !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n                !node.attributes.contentEditable\n            );\n        },\n\n        findSuitableNode: function(nodes) {\n            var that = this,\n                finder = that.finder,\n                tag = that.tag,\n                formatNode;\n\n            formatNode = finder.findSuitable(nodes);\n\n            if (!formatNode) {\n                // Find the opposite tag\n                finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n                formatNode = finder.findSuitable(nodes);\n            }\n\n            if (!formatNode) {\n                // Find the same tag\n                finder = new ListFormatFinder({ tag: tag });\n                formatNode = finder.findSuitable(nodes);\n                formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n            }\n\n\n            return formatNode;\n        },\n\n        applyOnSection: function(section, nodes) {\n            var tag = this.tag;\n            var attr = this.attr;\n            var commonAncestor = dom.closestSplittableParent(nodes);\n\n            var ancestors = [];\n            var formatNode = this.findSuitableNode(nodes);\n\n            var childNodes;\n\n            if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                childNodes = $.map(nodes, function(node) {\n                    return dom.parentOfType(node, [\"td\"]);\n                });\n            } else {\n                childNodes = dom.significantChildNodes(commonAncestor);\n\n                if ($.grep(childNodes, dom.isBlock).length) {\n                    childNodes = $.grep(childNodes, (function(node) {\n                        return this.containsAny(node, nodes);\n                    }).bind(this));\n                }\n\n                if (!childNodes.length) {\n                    childNodes = nodes;\n                }\n            }\n\n            function pushAncestor() {\n                ancestors.push(this);\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n                if (!suitable) {\n                    continue;\n                }\n\n                if (formatNode && this.isList(child)) {\n                    // merging lists\n                    $.each(child.children, pushAncestor);\n                    dom.remove(child);\n                } else {\n                    ancestors.push(child);\n                }\n            }\n\n            if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                ancestors = [commonAncestor];\n            }\n\n            if (!formatNode) {\n                formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                if (dom.isBlock(ancestors[0])) {\n                    dom.mergeAttributes(ancestors[0], formatNode);\n                }\n                dom.insertBefore(formatNode, ancestors[0]);\n            }\n\n            this.wrap(formatNode, ancestors);\n\n            while (dom.isBom(formatNode.nextSibling)) {\n                dom.remove(formatNode.nextSibling);\n            }\n\n            if (!this.finder.matchesType(formatNode)) {\n                formatNode.removeAttribute(\"type\");\n                formatNode.style.listStyleType = \"\";\n                dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n            }\n\n            if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n                formatNode.removeAttribute(\"type\");\n            }\n\n            if (!dom.is(formatNode, tag)) {\n                dom.changeTag(formatNode, tag);\n            }\n\n            this.merge(tag, formatNode);\n        },\n\n        apply: function(nodes) {\n            var i = 0,\n                sections = [],\n                lastSection,\n                lastNodes,\n                section,\n                node,\n                l = nodes.length,\n                immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n            function addLastSection() {\n                if (lastSection) {\n                    sections.push({\n                        section: lastSection,\n                        nodes: lastNodes\n                    });\n                }\n            }\n\n            // split nodes into sections that need to be different lists\n            for (i = 0; i < l; i++) {\n                node = immutableParent(nodes[i]) || nodes[i];\n                section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n                if (!lastSection || section != lastSection) {\n                    addLastSection();\n                    lastNodes = [node];\n                    lastSection = section;\n                } else {\n                    lastNodes.push(node);\n                }\n            }\n\n            addLastSection();\n\n            for (i = 0; i < sections.length; i++) {\n                this.applyOnSection(sections[i].section, sections[i].nodes);\n            }\n        },\n\n        unwrap: function(ul) {\n            var fragment = ul.ownerDocument.createDocumentFragment(),\n                unwrapTag = this.unwrapTag,\n                parents,\n                li,\n                p,\n                child;\n\n            for (li = ul.firstChild; li; li = li.nextSibling) {\n                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n                while (li.firstChild) {\n                    child = li.firstChild;\n\n                    if (dom.isBlock(child)) {\n\n                        if (p.firstChild) {\n                            fragment.appendChild(p);\n                            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                        }\n\n                        fragment.appendChild(child);\n                    } else {\n                        p.appendChild(child);\n                    }\n                }\n\n                if (p.firstChild) {\n                    fragment.appendChild(p);\n                }\n            }\n\n            parents = this._parentLists(ul);\n\n            if (parents[0]) {\n                dom.insertAfter(fragment, parents.last()[0]);\n                parents.last().remove();\n            } else {\n                dom.insertAfter(fragment, ul);\n            }\n\n            dom.remove(ul);\n        },\n\n        remove: function(nodes) {\n            var formatNode;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n\n                if (formatNode) {\n                    this.unwrap(formatNode);\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = textNodes(range),\n                ancestor = range.commonAncestorContainer;\n\n            if (!nodes.length) {\n                range.selectNodeContents(ancestor);\n                nodes = textNodes(range);\n                if (!nodes.length) {\n                    var text = ancestor.ownerDocument.createTextNode(\"\");\n                    range.startContainer.appendChild(text);\n                    nodes = [text];\n                    range.selectNode(text.parentNode);\n                }\n            }\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            if (that.finder.isFormatted(nodes)) {\n                that.split(range);\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n\n    });\n\n    var ListCommand = Command.extend({\n        init: function(options) {\n            options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var ListTool = FormatTool.extend({\n        init: function(options) {\n            this.options = options;\n\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new ListFormatFinder(options)\n            }));\n        },\n\n        command: function(commandArguments) {\n            return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n        }\n    });\n\n    extend(Editor, {\n        ListFormatFinder: ListFormatFinder,\n        ListFormatter: ListFormatter,\n        ListCommand: ListCommand,\n        ListTool: ListTool\n    });\n\n    registerTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        Command = Editor.Command,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n\n    var FormattingTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            var that = this;\n            Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n            that.type = \"kendoDropDownList\";\n\n            that.finder = {\n                getFormat: function() { return \"\"; }\n            };\n        },\n\n        options: {\n            items: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            width: 110\n        },\n\n        toFormattingItem: function(item) {\n            var value = item.value;\n\n            if (!value) {\n                return item;\n            }\n\n            if (item.tag || item.className) {\n                return item;\n            }\n\n            var dot = value.indexOf(\".\");\n\n            if (dot === 0) {\n                item.className = value.substring(1);\n            } else if (dot == -1) {\n                item.tag = value;\n            } else {\n                item.tag = value.substring(0, dot);\n                item.className = value.substring(dot + 1);\n            }\n\n            return item;\n        },\n\n        command: function(args) {\n            var that = this;\n            var item = args.value;\n\n            item = this.toFormattingItem(item);\n\n            return new Editor.FormatCommand({\n                range: args.range,\n                formatter: function() {\n                    var formatter,\n                        tags = (item.tag || item.context || \"span\").split(\",\"),\n                        format = [{\n                            tags: tags,\n                            attr: { className: item.className || \"\" }\n                        }];\n\n                    if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                        formatter = new Editor.GreedyInlineFormatter(format);\n                    } else {\n                        formatter = new Editor.GreedyBlockFormatter(format);\n                    }\n\n                    formatter.editor = that.editor;\n                    return formatter;\n                }\n            });\n        },\n\n        decorate: function(body) {\n            var component = this.component,\n                dataSource = component.dataSource,\n                items = dataSource.data(),\n                i, tag, className, style;\n\n            if (body) {\n                component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n            }\n\n            if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || \"span\";\n                    className = items[i].className;\n\n                    style = dom.inlineStyle(body, tag, { className: className });\n\n                    style = style.replace(/\"/g, \"'\");\n\n                    items[i].style = style + \";display:inline-block\";\n                }\n            }\n\n            dataSource.trigger(\"change\");\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options;\n            var toolName = options.name;\n            var that = this;\n            var component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            that.editor = editor;\n            that.component = component;\n\n            // must be moved to themes\n            ui.closest(\".k-dropdownlist\").width(options.width);\n\n            component.setOptions({\n                optionLabel: editor.options.messages.formatting,\n                change: () => {\n                    var dataItem = component.dataItem();\n\n                    if (dataItem) {\n                        Tool.exec(editor, toolName, dataItem.toJSON());\n                    }\n                },\n                dataBound: function() {\n                    var i, items = component.dataSource.data(),\n                        optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                    for (i = 0; i < items.length; i++) {\n                        items[i] = that.toFormattingItem(items[i]);\n                    }\n\n                    if (optionLabel.length) {\n                        optionLabel.remove();\n                    }\n                }\n            });\n        },\n\n        getFormattingValue: function(items, nodes) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var tag = item.tag || item.context || \"\";\n                var className = item.className ? \".\" + item.className : \"\";\n                var selector = tag + className;\n\n                var element = $(nodes[0]).closest(selector)[0];\n\n                if (!element) {\n                    continue;\n                }\n\n                if (nodes.length == 1) {\n                    return item.value;\n                }\n\n                for (var n = 1; n < nodes.length; n++) {\n                    if (!$(nodes[n]).closest(selector)[0]) {\n                        break;\n                    } else if (n == nodes.length - 1) {\n                        return item.value;\n                    }\n                }\n            }\n\n            return \"\";\n        },\n\n        update: function(ui, nodes) {\n            var selectBox = $(ui).data(this.type);\n            // necessary until formatBlock is deleted\n            if (!selectBox) {\n                return;\n            }\n\n            var dataSource = selectBox.dataSource,\n                items = dataSource.data(),\n                i, context,\n                ancestor = dom.commonAncestor.apply(null, nodes);\n\n            if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                return;\n            } else {\n                this._ancestor = ancestor;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                context = items[i].context;\n\n                items[i].visible = !context || !!$(ancestor).closest(context).length;\n            }\n\n            dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n            DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n            selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n            selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    var CleanFormatCommand = Command.extend({\n        exec: function() {\n            var range = this.lockRange(true);\n            this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n            RangeUtils.wrapSelectedElements(range);\n\n            var nodes = RangeUtils.mapAll(range, function(node) {\n                return node;\n            });\n\n\n            for (var c = nodes.length - 1; c >= 0; c--) {\n                var node = nodes[c];\n                if (!this.immutableParent(node)) {\n                    this.clean(node);\n                }\n            }\n\n            this.releaseRange(range);\n        },\n\n        clean: function(node) {\n            if (!node || dom.isMarker(node)) {\n                return;\n            }\n\n            var name = dom.name(node);\n\n            if (name == \"ul\" || name == \"ol\") {\n                var listFormatter = new Editor.ListFormatter(name);\n                var prev = node.previousSibling;\n                var next = node.nextSibling;\n\n                listFormatter.unwrap(node);\n\n                // clean contents\n                for (; prev && prev != next; prev = prev.nextSibling) {\n                    this.clean(prev);\n                }\n            } else if (name == \"blockquote\") {\n                dom.changeTag(node, \"p\");\n            } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                    this.clean(node.childNodes[i]);\n                }\n\n                node.removeAttribute(\"style\");\n                node.removeAttribute(\"class\");\n            } else {\n                unwrapListItem(node);\n            }\n\n            if ($.inArray(name, this.tagsToClean) > -1) {\n                dom.unwrap(node);\n            }\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n\n    function unwrapListItem(node) {\n        var li = dom.closestEditableOfType(node, [\"li\"]);\n        if (li) {\n            var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n            var range = kendo.ui.editor.W3CRange.fromNode(node);\n            range.selectNode(li);\n            listFormatter.toggle(range);\n        }\n    }\n\n    $.extend(Editor, {\n        FormattingTool: FormattingTool,\n        CleanFormatCommand: CleanFormatCommand\n    });\n\n    registerTool(\"formatting\", new FormattingTool({\n        ui: {\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                highlightFirst: false,\n                autoWidth: true,\n                template: kendo.template(\n                    (data) => `<span unselectable=\"on\" ${data.style ? `class=\"k-d-block\" style=\"display:block;${data.style || \"\"}` : \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n                )\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        keys = kendo.keys,\n        KEDITORIMAGEURL = \"#k-editor-image-url\",\n        KEDITORIMAGETITLE = \"#k-editor-image-title\",\n        KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n        KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\n    var ImageCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertImage: function(img, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.src && attributes.src != \"http://\") {\n\n                var removeIEAttributes = function() {\n                    setTimeout(function() {\n                        if (!attributes.width) {\n                            img.removeAttribute(\"width\");\n                        }\n\n                        if (!attributes.height) {\n                            img.removeAttribute(\"height\");\n                        }\n\n                        img.removeAttribute(\"complete\");\n                    });\n                };\n\n                if (!img) {\n                    img = dom.create(doc, \"img\", attributes);\n                    img.onload = img.onerror = removeIEAttributes;\n\n                    range.deleteContents();\n                    range.insertNode(img);\n\n                    if (!img.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                    }\n\n                    removeIEAttributes();\n\n                    range.setStartAfter(img);\n                    range.setEndAfter(img);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    img.onload = img.onerror = removeIEAttributes;\n                    dom.attr(img, attributes);\n                    removeIEAttributes();\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            if (!that.insertImage(RangeUtils.image(range), range)) {\n                that.releaseRange(range);\n            }\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                applied = false,\n                img = RangeUtils.image(range),\n                imageWidth = img && img.getAttribute(\"width\") || \"\",\n                imageHeight = img && img.getAttribute(\"height\") || \"\",\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                imageBrowser = options.imageBrowser,\n                showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertImage,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                    h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n                that.attributes = {\n                    src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                    alt: element.find(KEDITORIMAGETITLE).val()\n                };\n\n                that.attributes.width = null;\n                that.attributes.height = null;\n\n                if (!isNaN(w) && w > 0) {\n                    that.attributes.width = w;\n                }\n\n                if (!isNaN(h) && h > 0) {\n                    that.attributes.height = h;\n                }\n\n                applied = that.insertImage(img, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                this._imageBrowser = new kendo.ui.ImageBrowser(\n                    element.find(\".k-imagebrowser\"),\n                    extend({}, imageBrowser)\n                );\n\n                this._imageBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORIMAGEURL).val(this.value());\n                    }\n                });\n\n                this._imageBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-image-url\",\n                        label: encode(messages.imageWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-title\",\n                        label: encode(messages.imageAltText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-width\",\n                        label: encode(messages.imageWidth),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-height\",\n                        label: encode(messages.imageHeight),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.ImageCommand = ImageCommand;\n\n    registerTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\n    var ImportCommand = Command.extend({\n        exec: function() {\n            (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n        },\n\n        _initializeUploadWidget: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var importOptions = editor.options[\"import\"];\n            var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                success: cmd._onUploadSuccess.bind(cmd),\n                progress: cmd._onUploadProgress.bind(cmd),\n                select: cmd._onUploadSelect.bind(cmd),\n                error: cmd._onUploadError.bind(cmd),\n                complete: cmd._onUploadComplete.bind(cmd),\n                showFileList: false,\n                multiple: false,\n                async: {\n                    saveUrl: importOptions.proxyURL,\n                    autoUpload: true,\n                    saveField: \"file\"\n                },\n                validation: {\n                    allowedExtensions: importOptions.allowedExtensions,\n                    maxFileSize: importOptions.maxFileSize\n                }\n            }).getKendoUpload();\n\n            editor._uploadWidget = upload;\n\n            return upload;\n        },\n        _onUploadComplete: function(ev) {\n            this._trigger(\"complete\", ev);\n            ev.sender.clearAllFiles();\n\n            this._removeLoadingOverlay();\n        },\n        _onUploadSuccess: function(ev) {\n            this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n            this._trigger(\"success\", ev);\n        },\n        _onUploadProgress: function(ev) {\n            this._trigger(\"progress\", ev);\n        },\n        _onUploadSelect: function(ev) {\n            this._trigger(\"select\", ev);\n            if (!ev.files[0].validationErrors) {\n                this._initLoadingOverlay();\n            }\n        },\n        _onUploadError: function(ev) {\n            this._trigger(\"error\", ev);\n        },\n\n        _trigger: function(eventType, uploadEvent) {\n            var editor = this.editor;\n            var importOptions = editor.options[\"import\"];\n            if (typeof importOptions[eventType] === \"function\") {\n                importOptions[eventType].call(editor, uploadEvent);\n            }\n        },\n\n        _initLoadingOverlay: function() {\n            var editable = this.editor.body;\n            if (Editor.Dom.is(editable, \"body\")) {\n                this._iframeWrapper = this._container =\n                    this.editor.wrapper.find(\"iframe\").parent()\n                    .css({ position: \"relative\" }).append(loadingOverlay);\n            } else {\n                this._container = $(editable).append(loadingOverlay);\n            }\n\n            kendo.ui.progress(this._container, true);\n        },\n\n        _removeLoadingOverlay: function() {\n            kendo.ui.progress(this._container, false);\n            $(this._iframeWrapper).css({\n                position: \"\"\n            });\n\n            delete this._container;\n            delete this._iframeWrapper;\n        }\n    });\n\n    extend(Editor, {\n        ImportCommand: ImportCommand\n    });\n\n    registerTool(\"import\", new Tool({\n        command: ImportCommand,\n        ui: {\n            showText: \"both\"\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            GenericCommand = editorNS.GenericCommand,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            RestorePoint = editorNS.RestorePoint,\n            extend = $.extend;\n\n    var InsertHtmlCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n            var options = this.options;\n            var range = options.range;\n            var body = editor.body;\n            var startRestorePoint = new RestorePoint(range, body);\n            var html = options.html || options.value || '';\n\n            editor.selectRange(range);\n\n            editor.clipboard.paste(html, options);\n\n            if (options.postProcess) {\n                options.postProcess(editor, editor.getRange());\n            }\n\n            var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n            genericCommand.editor = editor;\n            editor.undoRedoStack.push(genericCommand);\n\n            editor.focus();\n        }\n    });\n\n    var InsertHtmlTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var options = this.options,\n                dataSource = options.items ? options.items : editor.options.insertHtml,\n                component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            component.one(\"open\", () => {\n                var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            });\n\n            component.setOptions({\n                dataSource: dataSource,\n                optionLabel: editor.options.messages.insertHtml\n            });\n            component.bind(\"change\", () => {\n                Tool.exec(editor, 'insertHtml', component.value());\n            });\n        },\n\n        command: function(commandArguments) {\n            return new InsertHtmlCommand(commandArguments);\n        },\n\n        update: function(ui) {\n            var component = ui.data(\"kendoDropDownList\");\n            component.close();\n            component.value(null);\n        }\n    });\n\n    extend(editorNS, {\n        InsertHtmlCommand: InsertHtmlCommand,\n        InsertHtmlTool: InsertHtmlTool\n    });\n\n    registerTool(\"insertHtml\", new InsertHtmlTool({\n        ui: {\n            initialValue: \"Insert HTML\",\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                autoSize: true,\n                highlightFirst: false\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        defaultExportAsItems = [\n            { text: 'Docx', value: 'docx' },\n            { text: 'Rtf', value: 'rtf' },\n            { text: 'Pdf', value: 'pdf' },\n            { text: 'Html', value: 'html' },\n            { text: 'Plain Text', value: 'txt' }\n        ];\n\n    var ExportAsCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.exportType = options.exportType;\n        },\n\n        exec: function() {\n            var cmd = this;\n            var range = this.lockRange(true);\n            cmd.postToProxy();\n            cmd.releaseRange(range);\n        },\n\n        postToProxy: function() {\n            this.generateForm().appendTo('body').submit().remove();\n        },\n\n        generateForm: function() {\n            var cmd = this;\n            var exportAsOptions = cmd.editor.options.exportAs;\n            var form = $('<form>').attr({\n                action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n                method: 'POST'\n            });\n\n            form.append([\n                cmd.valueInput(),\n                cmd.exportTypeInput(),\n                cmd.fileNameInput(),\n                cmd.antiForgeryInput()\n            ]);\n\n            return form;\n        },\n\n        valueInput: function() {\n            var editor = this.editor;\n            return $('<input>').attr({\n                value: editor.encodedValue(),\n                name: 'value',\n                type: 'hidden'\n            });\n        },\n\n        exportTypeInput: function() {\n            var cmd = this;\n            return $('<input>').attr({\n                value: cmd.exportType,\n                name: 'exportType',\n                type: 'hidden'\n            });\n\n        },\n\n        fileNameInput: function() {\n            var editor = this.editor;\n            var exportAsOptions = editor.options.exportAs;\n            var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n            return $('<input>').attr({\n                value: fileName,\n                name: 'fileName',\n                type: 'hidden'\n            });\n        },\n\n        antiForgeryInput: function() {\n            var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n            return $(\"input[name^='__RequestVerificationToken']\").clone()\n                        .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n        }\n    });\n\n    var ExportAsTool = Tool.extend({\n        init: function(options) {\n            var tool = this;\n            Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n            tool.type = 'kendoDropDownList';\n        },\n\n        options: {\n            items: defaultExportAsItems\n        },\n\n        command: function(args) {\n            var value = args.value;\n            return new Editor.ExportAsCommand({\n                range: args.range,\n                exportType: value.exportType\n            });\n        },\n\n        initialize: function(ui, editor) {\n            var tool = this,\n                component = ui.getKendoDropDownList();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            this._exec(e.sender.value());\n            e.sender.value(null);\n            e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        update: function(ui, editor) {\n            var component = ui.data(\"kendoDropDownList\");\n\n            component.close();\n            component.value(null);\n            ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { exportType: value } );\n            }\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    extend(Editor, {\n        ExportAsTool: ExportAsTool,\n        ExportAsCommand: ExportAsCommand\n    });\n\n    registerTool('exportAs', new ExportAsTool({\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                valuePrimitive: true,\n                value: null,\n                width: \"140px\",\n                highlightFirst: false,\n                autoWidth: true,\n                itemTemplate: (data) => `<span class=\\\"k-link k-menu-link\\\" data-value=\\\"${data.value}\\\">${data.text}</strong></span>`,\n                icon: \"export\",\n                valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n            }\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        RangeUtils = Editor.RangeUtils,\n        blockElements = dom.blockElements,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatter = Editor.BlockFormatter;\n\n    function indent(node, value) {\n        var isRtl = $(node).css(\"direction\") == \"rtl\",\n            indentDirection = isRtl ? \"Right\" : \"Left\",\n            property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n        if (value === undefined$1) {\n            return node.style[property] || 0;\n        } else {\n            if (value > 0) {\n                node.style[property] = value + \"px\";\n            } else {\n                node.style[property] = \"\";\n\n                if (!node.style.cssText) {\n                    node.removeAttribute(\"style\");\n                }\n            }\n        }\n    }\n\n    var IndentFormatter = Class.extend({\n        init: function() {\n            this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n        },\n\n        apply: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targets = [],\n                i, len, formatNode, parentList, sibling;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            if (formatNodes.length) {\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    if (dom.is(formatNodes[i], \"li\")) {\n                        if (!$(formatNodes[i]).index()) {\n                            targets.push(formatNodes[i].parentNode);\n                        } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                            targets.push(formatNodes[i]);\n                        }\n                    } else {\n                        targets.push(formatNodes[i]);\n                    }\n                }\n\n                while (targets.length) {\n                    formatNode = targets.shift();\n                    if (dom.is(formatNode, \"li\")) {\n                        parentList = formatNode.parentNode;\n                        sibling = $(formatNode).prev(\"li\");\n                        var siblingList = sibling.find(\"ul,ol\").last();\n\n                        var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                        if (nestedList && sibling[0]) {\n                            if (siblingList[0]) {\n                               siblingList.append(formatNode);\n                               siblingList.append($(nestedList).children());\n                               dom.remove(nestedList);\n                            } else {\n                                sibling.append(nestedList);\n                                nestedList.insertBefore(formatNode, nestedList.firstChild);\n                            }\n                        } else {\n                            nestedList = sibling.children(\"ul,ol\")[0];\n                            if (!nestedList) {\n                                nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                sibling.append(nestedList);\n                            }\n\n                            while (formatNode && formatNode.parentNode == parentList) {\n                                nestedList.appendChild(formatNode);\n                                formatNode = targets.shift();\n                            }\n                        }\n                    } else {\n                        var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                        indent(formatNode, marginLeft);\n\n                        for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                            if ($.contains(formatNode, targets[targetIndex])) {\n                                targets.splice(targetIndex, 1);\n                            }\n                        }\n                    }\n                }\n            } else {\n                var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n                formatter.apply(nodes);\n            }\n        },\n\n        getListTypeAttr: function(list) {\n            var type = list.getAttribute(\"type\");\n            var styleType = list.style.listStyleType;\n\n            return type ? { type: type } : { style: { listStyleType: styleType } };\n        },\n\n        mapImmutables: function(nodes) {\n            if (!this.immutables) {\n                return nodes;\n            } else {\n                var immutables = [];\n                return $.map(nodes, function(node) {\n                    var immutable = Editor.Immutables.immutableParent(node);\n                    if (immutable) {\n                        if ($.inArray(immutable, immutables) === -1) {\n                            immutables.push(immutable);\n                        } else {\n                            return null;\n                        }\n                    }\n                    return immutable || node;\n                });\n            }\n        },\n\n        remove: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targetNode, i, len, list, listParent, siblings,\n                formatNode, marginLeft;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                formatNode = $(formatNodes[i]);\n\n                if (formatNode.is(\"li\")) {\n                    list = formatNode.parent();\n                    listParent = list.parent();\n                    // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                    if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                        // skip already processed nodes\n                        if (targetNode && $.contains(targetNode, listParent[0])) {\n                            continue;\n                        }\n\n                        siblings = formatNode.nextAll(\"li\");\n                        if (siblings.length) {\n                            $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                        }\n\n                        if (listParent.is(\"li\")) {\n                            formatNode.insertAfter(listParent);\n                        } else {\n                            formatNode.appendTo(listParent);\n                        }\n\n                        if (!list.children(\"li\").length) {\n                            list.remove();\n                        }\n\n                        continue;\n                    } else {\n                        if (targetNode == list[0]) {\n                            // removing format on sibling LI elements\n                            continue;\n                        }\n                        targetNode = list[0];\n                    }\n                } else {\n                    targetNode = formatNodes[i];\n                }\n\n                marginLeft = parseInt(indent(targetNode), 10) - 30;\n                indent(targetNode, marginLeft);\n            }\n        }\n\n    });\n\n    var IndentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.apply(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.remove(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n        },\n\n        initialize: function(ui, editor) {\n            $.extend(this.options, {\n                immutables: editor && editor.options.immutables\n            });\n        },\n\n        update: function(ui, nodes) {\n            var suitableNodes = this.finder.findSuitable(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n                isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n            for (i = 0, len = suitableNodes.length; i < len; i++) {\n                suitable = suitableNodes[i];\n\n                if (this.options.immutables) {\n                    immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                    if (immutableParent) {\n                        suitable = immutableParent;\n                    }\n                }\n\n                isOutdentable = indent(suitable);\n\n                if (!isOutdentable) {\n                    listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                    isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                    (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n                }\n\n                if (isOutdentable) {\n                    toolbar.enable(ui, true);\n                    return;\n                }\n            }\n\n            toolbar.enable(ui, false);\n        }\n    });\n\n    extend(Editor, {\n        IndentFormatter: IndentFormatter,\n        IndentCommand: IndentCommand,\n        OutdentCommand: OutdentCommand,\n        OutdentTool: OutdentTool\n    });\n\n    registerTool(\"indent\", new Tool({ command: IndentCommand }));\n    registerTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        extend = $.extend,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        Command = editorNS.Command,\n        Tool = editorNS.Tool,\n        BlockFormatter = editorNS.BlockFormatter,\n        normalize = dom.normalize,\n        RangeUtils = editorNS.RangeUtils,\n        registerTool = editorNS.EditorUtils.registerTool;\n\n    var ParagraphCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        _insertMarker: function(doc, range) {\n            var marker = dom.create(doc, 'a'), container;\n            marker.className = \"k-marker\";\n\n            range.insertNode(marker);\n\n            if (!marker.parentNode) {\n                // inserting paragraph in Firefox full body range\n                container = range.commonAncestorContainer;\n                container.innerHTML = \"\";\n                container.appendChild(marker);\n            }\n\n            normalize(marker.parentNode);\n\n            return marker;\n        },\n\n        _moveFocus: function(range, candidate) {\n            if (dom.isEmpty(candidate)) {\n                range.setStartBefore(candidate);\n            } else {\n                range.selectNodeContents(candidate);\n\n                var focusNode = RangeUtils.textNodes(range)[0];\n\n                if (!focusNode) {\n                    while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                        candidate = candidate.firstChild;\n                    }\n\n                    focusNode = candidate;\n                }\n\n                if (dom.isEmpty(focusNode)) {\n                    range.setStartBefore(focusNode);\n                } else {\n                    if (dom.emptyNode(focusNode)) {\n                        focusNode.innerHTML = \"\\ufeff\";\n                    }\n                    var startNode = focusNode.firstChild || focusNode;\n                    if (dom.isDataNode(startNode)) {\n                        range.setStart(startNode, 0);\n                    } else {\n                        range.setStartBefore(startNode);\n                    }\n                }\n            }\n        },\n\n        shouldTrim: function(range) {\n            var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n                startInBlock = dom.parentOfType(range.startContainer, blocks),\n                endInBlock = dom.parentOfType(range.endContainer, blocks);\n            return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n        },\n\n        _blankAfter: function(node) {\n            while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n                node = node.nextSibling;\n            }\n\n            return !node;\n        },\n\n        exec: function() {\n            var range = this.getRange(),\n                doc = RangeUtils.documentFromRange(range),\n                parent, previous, next,\n                emptyParagraphContent = editorNS.emptyElementContent,\n                paragraph, marker, li, heading, tableNode, rng,\n                shouldTrim;\n\n            this.expandImmutablesIn(range);\n\n            shouldTrim = this.shouldTrim(range);\n\n            range.deleteContents();\n            marker = this._insertMarker(doc, range);\n\n            dom.stripBomNode(marker.previousSibling);\n            dom.stripBomNode(marker.nextSibling);\n\n            li = dom.closestEditableOfType(marker, ['li']);\n            heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n            tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n            if (li) {\n                // hitting 'enter' in empty li\n                if (dom.emptyNode(li)) {\n                    paragraph = dom.create(doc, 'p');\n\n                    if (dom.next(li)) {\n                        rng = range.cloneRange();\n                        rng.selectNode(li);\n\n                        RangeUtils.split(rng, li.parentNode);\n                    }\n\n                    var br = $(\"br\", li);\n                    if (br.length == 1) {\n                        br.remove();\n                    }\n\n                    var parentNode = li.parentNode;\n                    var parentChildrenLength = li.parentNode.children.length;\n                    var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                    dom.insertAfter(paragraph, parentNode);\n                    dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                    if (firstChild && firstChild !== marker) {\n                        paragraph.appendChild(firstChild);\n                        paragraph.appendChild(marker);\n                    } else {\n                        paragraph.innerHTML = emptyParagraphContent;\n                    }\n                    next = paragraph;\n                }\n            } else if (heading && this._blankAfter(marker)) {\n                paragraph = this._insertParagraphAfter(heading);\n                dom.remove(marker);\n                next = paragraph;\n            } else if (tableNode) {\n                paragraph = this._insertParagraphAfter(tableNode);\n                dom.remove(marker);\n                next = paragraph;\n            }\n\n            if (!next) {\n                if (!(li || heading)) {\n                    new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                }\n\n                range.selectNode(marker);\n\n                parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n                RangeUtils.split(range, parent, shouldTrim);\n\n                previous = parent.previousSibling;\n\n                if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                    previous = previous.firstChild;\n                }\n\n                next = parent.nextSibling;\n\n                this.clean(previous, { links: true });\n                this.clean(next, { links: true });\n\n                if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                    next = next.firstChild;\n                }\n\n                dom.remove(parent);\n\n                // normalize updates the caret display in Gecko\n                normalize(previous);\n            }\n\n            normalize(next);\n\n            this._moveFocus(range, next);\n\n            range.collapse(true);\n\n            dom.scrollTo(next, true);\n\n            RangeUtils.selectRange(range);\n        },\n\n        _insertParagraphAfter: function(node) {\n            var range = this.getRange();\n            var doc = RangeUtils.documentFromRange(range);\n            var emptyElementContent = editorNS.emptyElementContent;\n            var paragraph = dom.create(doc, 'p');\n\n            dom.insertAfter(paragraph, node);\n            paragraph.innerHTML = emptyElementContent;\n\n            return paragraph;\n        },\n\n        clean: function(node, options) {\n            var root = node;\n\n            if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                dom.remove(node.firstChild);\n            }\n\n            if (dom.isDataNode(node) && !node.nodeValue) {\n                node = node.parentNode;\n            }\n\n            if (node) {\n                var siblings = false;\n                while (node.firstChild && node.firstChild.nodeType == 1) {\n                    siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                    node = node.firstChild;\n                }\n\n                if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                    $(root).find(\".k-br\").remove();\n                    node.innerHTML = editorNS.emptyElementContent;\n                }\n\n                if (options && options.links) {\n                    while (node != root) {\n                        if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                            dom.unwrap(node);\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n            }\n        }\n    });\n\n    var NewLineCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.getRange();\n            this.expandImmutablesIn(range);\n\n            var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n            var node = range.startContainer;\n            var filler;\n            var browser = kendo.support.browser;\n            var oldIE = browser.msie && browser.version < 11;\n            var tableNode = dom.is(node, 'table') && node;\n            var kbrParent;\n\n            range.deleteContents();\n            if (tableNode) {\n                dom.insertAfter(br, tableNode);\n            } else {\n                kbrParent = $(node).closest('.k-br');\n                range.insertNode(br);\n\n                if (kbrParent.length) {\n                    // pressing enter in an k-br node\n                    dom.unwrap(kbrParent[0]);\n                }\n            }\n\n            normalize(br.parentNode);\n\n            if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                // Gecko and WebKit cannot put the caret after only one br.\n                if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                    $(br.nextSibling).remove();\n                }\n                filler = br.cloneNode(true);\n                filler.className = 'k-br';\n                dom.insertAfter(filler, br);\n            }\n\n            range.setStartAfter(br);\n            range.collapse(true);\n\n            dom.scrollTo(br.nextSibling || br, true);\n\n            RangeUtils.selectRange(range);\n        }\n    });\n\n    extend(editorNS, {\n        ParagraphCommand: ParagraphCommand,\n        NewLineCommand: NewLineCommand\n    });\n\n    registerTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\n    registerTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        LinkFormatter = Editor.LinkFormatter,\n        textNodes = RangeUtils.textNodes,\n        keys = kendo.keys,\n        KEDITORFILEURL = \"#k-editor-file-url\",\n        KEDITORFILETEXT = \"#k-editor-file-text\",\n        KEDITORFILETITLE = \"#k-editor-file-title\";\n\n    var FileCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.formatter = new LinkFormatter();\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertFile: function(file, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.href && attributes.href != \"http://\") {\n\n                if (!file) {\n                    file = dom.create(doc, \"a\", { href: attributes.href });\n                    file.innerHTML = attributes.innerHTML;\n                    file.title = attributes.title;\n\n                    range.deleteContents();\n                    range.insertNode(file);\n\n                    if (!file.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                    }\n\n                    range.setStartAfter(file);\n                    range.setEndAfter(file);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    dom.attr(file, attributes);\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            this.formatter.apply(range, this.attributes);\n            that.releaseRange(range);\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                nodes = textNodes(range),\n                applied = false,\n                file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                fileBrowser = options.fileBrowser,\n                showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertFile,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                    innerHTML = element.find(KEDITORFILETEXT).val(),\n                    title = element.find(KEDITORFILETITLE).val();\n\n                that.attributes = {\n                    href: href,\n                    innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                    title: title\n                };\n\n                applied = that.insertFile(file, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                that._fileBrowser = new kendo.ui.FileBrowser(\n                    element.find(\".k-filebrowser\"),\n                    extend({}, fileBrowser)\n                );\n\n                that._fileBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORFILEURL).val(this.value());\n                    }\n                } );\n\n                that._fileBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORFILEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-file-url\",\n                        label: encode(messages.fileWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-text\",\n                        label: encode(messages.fileText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-title\",\n                        label: encode(messages.fileTitle),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.FileCommand = FileCommand;\n\n    registerTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n\n        NS = \"kendoEditor\",\n        ACTIVESTATE = \"k-active\",\n        SELECTEDSTATE = \"k-selected\",\n        SCOPE = \"scope\",\n        ROW = \"row\",\n        COL = \"col\",\n        ROWGROUP = \"rowgroup\",\n        COLGROUP = \"colgroup\",\n        COLSPAN = \"colspan\",\n        ROWSPAN = \"rowspan\",\n        TABLE = \"table\",\n        THEAD = \"thead\",\n        TBODY = \"tbody\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n\n        Tool = Editor.Tool,\n        InsertHtmlCommand = Editor.InsertHtmlCommand,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatTool = Editor.BlockFormatTool,\n        FormatCommand = Editor.FormatCommand,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        formats = kendo.ui.Editor.fn.options.formats,\n        getTouches = kendo.getTouches;\n    var template = kendo.template;\n\n    var columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\n    var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\n    var TableCommand = InsertHtmlCommand.extend({\n        init: function(options) {\n            var o = $.extend({\n                postProcess: this.postProcess,\n                skipCleaners: true\n            }, options || {});\n\n            InsertHtmlCommand.fn.init.call(this, o);\n        },\n        _tableHtml: function(rows, columns) {\n            rows = rows || 1;\n            columns = columns || 1;\n            var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n            var rowHeight = 100 / rows;\n\n            return \"<table class='k-table' data-last>\" +\n                        new Array(rows + 1).join(\n                        \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                            new Array(columns + 1).join(columnHtml) +\n                        \"</tr>\") +\n                   \"</table>\";\n        },\n\n        postProcess: function(editor, range) {\n            var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n            range.setStart(insertedTable.find(TD)[0], 0);\n            range.collapse(true);\n\n            editor.selectRange(range);\n        },\n\n        exec: function() {\n            var options = this.options;\n            options.html = this._tableHtml(options.rows, options.columns);\n\n            InsertHtmlCommand.fn.exec.call(this);\n        }\n    });\n\n    var PopupTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var that = this;\n            var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n            var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                copyAnchorStyles: false,\n                open: this._open.bind(this),\n                activate: this._activate.bind(this),\n                close: this._close.bind(this)\n            }).data(\"kendoPopup\");\n\n            ui.on(\"click\", this._toggle.bind(this))\n              .on(\"keydown\", this._keydown.bind(this));\n\n            this._editor = editor;\n            this._popup = popup;\n\n            editor.tablePopup = this._popup;\n\n            var tableWizard = new Editor.TableWizardTool({\n                command: Editor.TableWizardCommand,\n                insertNewTable: true\n            });\n\n            registerTool(\"tableWizardInsert\", tableWizard);\n\n            btn.appendTo(popup.element);\n            btn.kendoButton({\n                icon: \"table-wizard\"\n            });\n\n            btn.on(\"click\", () => {\n                that._editor.exec(\"tableWizardInsert\");\n            });\n        },\n\n        popup: function() {\n            return this._popup;\n        },\n\n        _activate: $.noop,\n\n        _open: function() {\n            this._popup.options.anchor.addClass(ACTIVESTATE);\n        },\n\n        _close: function() {\n            this._popup.options.anchor.removeClass(ACTIVESTATE);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                keys = kendo.keys,\n                key = e.keyCode;\n\n            if (key == keys.ESC) {\n                that._popup.close();\n            } else if (key == keys.DOWN && e.altKey) {\n                that._popup.open();\n                that._setTableSize({ row: 1, col: 1 });\n            } else if (key === keys.ENTER) {\n                setTimeout(() => {\n                    that._setTableSize({ row: 1, col: 1 });\n                });\n            }\n        },\n\n        _toggle: function(e) {\n            var button = $(e.target).closest(\".k-tool\");\n\n            if (!button.hasClass(\"k-disabled\")) {\n                this.popup().toggle();\n            }\n        },\n\n        update: function(ui) {\n            var popup = this.popup();\n\n            if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n                popup.close();\n            }\n\n            ui.removeClass(\"k-hover\");\n        },\n\n        destroy: function() {\n            if (this._popup) {\n                this._popup.destroy();\n            }\n        }\n    });\n\n    var InsertTableTool = PopupTool.extend({\n        init: function(options) {\n            this.cols = 8;\n            this.rows = 6;\n\n            PopupTool.fn.init.call(this, $.extend(options, {\n                command: TableCommand,\n                popupTemplate:\n                    \"<div class='k-ct-popup'>\" +\n                        \"<div>\" +\n                            new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                        \"</div>\" +\n                        \"<div class='k-status'></div>\" +\n                    \"</div>\"\n            }));\n        },\n\n        _activate: function() {\n            var that = this,\n                element = that._popup.element,\n                cells = element.find(\".k-ct-cell\"),\n                firstCell = cells.eq(0),\n                lastCell = cells.eq(cells.length - 1),\n                start = kendo.getOffset(firstCell),\n                end = kendo.getOffset(lastCell),\n                cols = that.cols,\n                rows = that.rows,\n                cellWidth, cellHeight;\n\n            element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            end.left += lastCell[0].offsetWidth;\n            end.top += lastCell[0].offsetHeight;\n\n            cellWidth = (end.left - start.left) / cols;\n            cellHeight = (end.top - start.top) / rows;\n\n            function tableFromLocation(e) {\n                var w = $(window);\n                return {\n                    row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                    col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                };\n            }\n\n            element.autoApplyNS(NS)\n                .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                    that._setTableSize(tableFromLocation(e));\n                })\n                .on(\"mouseleave\", \".k-ct-cell\", function() {\n                    that._setTableSize();\n                })\n                .on(\"down\", \".k-ct-cell\", function(e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n        },\n\n        _valid: function(size) {\n            return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n        },\n\n        _exec: function(size) {\n            if (this._valid(size)) {\n                this._editor.exec(\"createTable\", {\n                    rows: size.row,\n                    columns: size.col\n                });\n                this._popup.close();\n            }\n        },\n\n        _setTableSize: function(size) {\n            var element = this._popup.element;\n            var status = element.find(\".k-status\");\n            var cells = element.find(\".k-ct-cell\");\n            var cols = this.cols;\n            var messages = this._editor.options.messages;\n\n            if (this._valid(size)) {\n                status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n                cells.each(function(i) {\n                    $(this).toggleClass(\n                        SELECTEDSTATE,\n                        i % cols < size.col && i / cols < size.row\n                    );\n                });\n            } else {\n                status.text(messages.createTable);\n                cells.removeClass(SELECTEDSTATE);\n            }\n        },\n\n        _keydown: function(e) {\n            var initiallyVisible = this._popup.visible();\n\n            PopupTool.fn._keydown.call(this, e);\n\n            if (!this._popup.visible()) {\n                return;\n            }\n\n            var keys = kendo.keys;\n            var key = e.keyCode;\n            var cells = this._popup.element.find(\".k-ct-cell\");\n            var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n            var selectedRows = Math.floor(focus / this.cols);\n            var selectedColumns = focus % this.cols;\n\n            var changed = false,\n                button;\n\n            if (key == keys.DOWN && !e.altKey) {\n                changed = true;\n                selectedRows++;\n            } else if (key == keys.UP) {\n                changed = true;\n                selectedRows--;\n            } else if (key == keys.RIGHT) {\n                changed = true;\n                selectedColumns++;\n            } else if (key == keys.LEFT) {\n                changed = true;\n                selectedColumns--;\n            } else if (key == keys.TAB) {\n                button = this._popup.element.find(\".k-button\");\n\n                if (button.length > 0) {\n                    changed = true;\n                    button.trigger(\"focus\");\n                }\n            }\n\n            var tableSize = {\n                row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n            };\n\n            if (key == keys.ENTER && initiallyVisible) {\n                this._exec(tableSize);\n            } else {\n                this._setTableSize(tableSize);\n            }\n\n            if (changed) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _open: function() {\n            var messages = this._editor.options.messages;\n\n            PopupTool.fn._open.call(this);\n\n            this.popup().element\n                .find(\".k-status\").text(messages.createTable).end()\n                .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n        },\n\n        _close: function() {\n            PopupTool.fn._close.call(this);\n            this.popup().element.off(\".\" + NS);\n        }\n    });\n\n    var TableModificationCommand = Command.extend({\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n\n            $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n                .each(function(index,el) {\n                    el.remove();\n                });\n\n            this.editor.selectRange(point.toRange());\n        },\n        _clearColIndexAttr: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n        },\n        _mapColIndices: function(table) {\n            dom.reMapTableColumns(table, \"col-index\");\n        },\n        _findRowSpanCell: function(parent, rowIndex, colIndex) {\n            var row, cell;\n\n            for (var i = rowIndex; i >= 0; i--) {\n                row = parent.rows[i];\n                cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n                if (cell.length) {\n                    return cell;\n                }\n            }\n        },\n        _resetElementResizing: function(editor) {\n            editor._destroyResizings();\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n        _findNextTdInRow: function(row, colIndex) {\n            var lastTd = row.find(\"td:last-child\"),\n                lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n                td;\n\n            for (var i = colIndex; i <= lastIndex; i++) {\n                td = row.find(\"[col-index=\" + i + \"]\");\n                if (td.length) {\n                    return td;\n                }\n            }\n        },\n        _adjustColgroups: function(row, table) {\n            var colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                cells = row.cells,\n                numberOfCells = cells.length,\n                i, colgroup, cell;\n\n            while (colElements.length > 0) {\n                colElements[0].remove();\n            }\n            while (colgroupElements.length > 0) {\n                colgroupElements[0].remove();\n            }\n\n            for (i = numberOfCells - 1; i >= 0; i--) {\n                cell = cells[i];\n                if (cell.getAttribute(SCOPE) === COLGROUP) {\n                    colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                    colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                    table.prepend(colgroup);\n                } else {\n                    table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                }\n            }\n        },\n        _associateHeaderIds: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n            dom.reMapTableColumns(table, \"col-index\");\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n            dom.associateWithIds(table);\n        },\n        _getNumberOfColumns: function(table) {\n            return dom._getNumberOfColumns(table, \"td, th\");\n        }\n    });\n\n    var InsertRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                position = this.options.position || \"after\",\n                cellCount, row, cell,\n                newRow, rowIndex, rowSpanIndex, createdCell;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            row = td.parentNode;\n            rowIndex = dom.findNodeIndex(row, true);\n\n            if (td.rowSpan > 1 && position === \"after\") {\n                row = table.rows[rowIndex + td.rowSpan - 1];\n            }\n\n            cellCount = this._getNumberOfColumns(table);\n            newRow = row.cloneNode(true);\n            $(newRow).empty();\n\n            for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    } else {\n                        this._appendCell(newRow, cell);\n                    }\n                } else {\n                    rowIndex = dom.findNodeIndex(row, true);\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                    rowSpanIndex = cell.closest(TR).index();\n\n                    if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                        this._appendCell(newRow, cell);\n                    } else {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    }\n                }\n\n                createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n                if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                    createdCell.attr(SCOPE, ROW);\n                }\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newRow, row);\n            } else {\n                dom.insertAfter(newRow, row);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _appendCell: function(row, cell) {\n            var newCell;\n\n            newCell = cell.clone();\n            newCell.html(Editor.emptyTableCellContent);\n            newCell.removeAttr(ROWSPAN);\n            newCell.appendTo(row);\n        }\n    });\n\n    var InsertColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                columnIndex,\n                i,\n                rows = table && table.rows,\n                cell,\n                newCell,\n                position = this.options.position || \"after\";\n\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n            if (td.colSpan > 1 && position === \"after\") {\n                td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n                columnIndex = columnIndex + td.colSpan - 1;\n            }\n\n            for (i = 0; i < rows.length; i++) {\n                cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n                if (!cell) {\n                    continue;\n                }\n\n                newCell = cell.cloneNode();\n                newCell.innerHTML = Editor.emptyTableCellContent;\n                newCell.removeAttribute(COLSPAN);\n\n                if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                    newCell.setAttribute(SCOPE, COL);\n                }\n\n                if (position == \"before\") {\n                    dom.insertBefore(newCell, cell);\n                } else {\n                    dom.insertAfter(newCell, cell);\n                }\n\n                this._resizeCells(newCell, cell);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _processForColSpan: function(row, columnIndex, position, selectedCell) {\n            var cell,\n                colSpanEffect,\n                index = columnIndex - 1;\n\n            cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n            if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n                cell.colSpan += 1;\n                return;\n            }\n\n            if (cell) {\n                return cell;\n            }\n\n            for (index; index >= 0; index--) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n                if (cell && cell.colSpan > 1) {\n                    break;\n                }\n            }\n\n            if (!cell) {\n                return;\n            }\n\n            colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n            if (colSpanEffect === columnIndex && position === \"after\") {\n                return cell;\n            } else if (columnIndex <= colSpanEffect) {\n                cell.setAttribute(COLSPAN, cell.colSpan + 1);\n            }\n        },\n        _resizeCells: function(newCell, cell) {\n            var width = newCell.style.width,\n            parsedWidth, unit, calculatedWidth;\n\n            if (!width) {\n                return;\n            }\n\n            parsedWidth = parseFloat(width);\n            unit = width.slice(parsedWidth.toString().length);\n            calculatedWidth = (parsedWidth / 2) + unit;\n\n            newCell.style.width = calculatedWidth;\n            cell.style.width = calculatedWidth;\n        }\n    });\n\n    var DeleteRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange();\n            var rows = RangeUtils.mapAll(range, function(node) {\n                return $(node).closest(TR)[0];\n            });\n            var td = dom.closest(range.endContainer, [TD, TH]);\n            var row = rows[0];\n            var rowSpan = td ? td.rowSpan : 1;\n            var rowIndex = $(rows[0]).index();\n            var table = dom.closest(row, TABLE);\n            var rowParent = row.parentElement;\n            var focusElement;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            for (var x = 0; x < rowSpan; x++) {\n                if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                    rows.push(rowParent.rows[rowIndex + x]);\n                }\n            }\n\n            if (table.rows.length <= rows.length) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else if (rowParent.rows.length <= rows.length) {\n                focusElement = rowParent.nextSibling;\n\n                if (!focusElement) {\n                    focusElement = rowParent.previousSibling;\n                }\n\n                dom.remove(rowParent);\n            } else {\n                this._mapColIndices(table);\n\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    dom.removeTextSiblings(row);\n                    focusElement = dom.next(row) || dom.prev(row);\n                    focusElement = focusElement.cells[0];\n\n                    // IE needs to focus the new row before removing the old one\n                    this._focusElement(range, focusElement);\n                    focusElement = null;\n\n                    this._handleRowSpanCells(table, row);\n\n                    dom.remove(row);\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n                this._adjustColgroups(rowParent.rows[0], table);\n            }\n\n            if (focusElement) {\n                this._focusElement(range, focusElement);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _focusElement: function(range, node) {\n            range.setStart(node, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        },\n        _handleRowSpanCells: function(table, row) {\n            var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n                firstRow = table.rows[0],\n                lastCell = firstRow.cells[firstRow.cells.length - 1],\n                lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n            for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n                if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                    nextRow = table.rows[rowIndex + 1];\n                    adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                    if (adjacentCell.length) {\n                        adjacentCell.before(cell);\n                    } else {\n                        $(nextRow).append(cell);\n                    }\n                    this._reduceRowSpan(cell);\n                }\n\n                if (!cell.length) {\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                    this._reduceRowSpan(cell);\n                }\n            }\n        },\n        _reduceRowSpan: function(td) {\n            var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n            if (rowSpanValue <= 1) {\n                td.removeAttr(ROWSPAN);\n                if (td.attr(SCOPE) === ROWGROUP) {\n                    td.attr(SCOPE, ROW);\n                }\n            } else {\n                td.attr(ROWSPAN, rowSpanValue);\n            }\n        }\n    });\n\n    var DeleteColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                rows = table && table.rows,\n                columnIndex = dom.findNodeIndex(td, true),\n                columnCount = rows && rows[0].cells.length,\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                focusElement, i, cell, x;\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            if (columnCount == 1 || td.colSpan == columnCount) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else {\n                dom.removeTextSiblings(td);\n\n                focusElement = dom.next(td) || dom.prev(td);\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n                for (x = 0; x < td.colSpan; x++) {\n                    for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                        cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                        if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                            cell.remove();\n                        } else {\n                            this._handleColSpanCells(rows[i], columnIndex + x);\n                        }\n                    }\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            if (focusElement) {\n                range.setStart(focusElement, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _handleColSpanCells: function(row, colIndex) {\n            var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length && cell.prop(\"colSpan\") > 1) {\n                var clone = cell.clone(true);\n                cell.after(clone);\n                this._reduceColSpan(clone);\n                clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                cell.remove();\n                return;\n            }\n\n            for (var i = colIndex; i >= 0; i--) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    this._reduceColSpan(cell);\n                    cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                    return;\n                }\n            }\n        },\n        _reduceColSpan: function(td) {\n            var colSpanValue = td.prop(\"colSpan\") - 1;\n\n            if (colSpanValue <= 1) {\n                td.removeAttr(COLSPAN);\n                if (td.attr(SCOPE) === COLGROUP) {\n                    td.attr(SCOPE, COL);\n                }\n            } else {\n                td.attr(COLSPAN, colSpanValue);\n            }\n        }\n    });\n\n    var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table, row, columnIndex, nextTd, colspan;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n                nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n                $(td).prop(COLSPAN, colspan)\n                     .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n        },\n        _getColspan: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n        }\n    });\n\n    var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [THEAD, TBODY]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = $(td).attr(\"col-index\");\n                bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                     .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n\n                $(bottomTd).remove();\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n        },\n        _getRowspan: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n        }\n    });\n\n    var SplitCellCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                type = this.options.type,\n                attr = type === \"row\" ? COLSPAN : ROWSPAN,\n                td = dom.closest(range.endContainer, [TD, TH]),\n                parent = dom.closest(td, [THEAD, TBODY]),\n                table = dom.closest(td, TABLE),\n                emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellHorizontally(td, parent, attr, emptyTd);\n            } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellVertically(td, parent, attr, emptyTd);\n            }\n\n            if ($(td).prop(attr.toLowerCase()) <= 1) {\n                $(td).removeAttr(attr);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n        },\n        _getRowspanValue: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10);\n        },\n        _getColspanValue: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10);\n        },\n        _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n            var rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                tdToAdd = $(emptyTd),\n                colSpanResult = Math.floor(colSpan / 2);\n\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n\n                $(td).prop(attr, colSpan - colSpanResult)\n                    .after(tdToAdd);\n\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, COL);\n                        }\n\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        },\n        _splitCellVertically: function(td, parent, attr, emptyTd) {\n            var tr = dom.closest(td,TR),\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n                rowIndex = dom.findNodeIndex(tr, true),\n                rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                rowSpanResult = Math.floor(rowSpan / 2),\n                targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n                nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n                tdToAdd = $(emptyTd);\n\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n\n                $(td).prop(attr, rowSpan - rowSpanResult);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        }\n    });\n\n    var TableModificationTool = Tool.extend({\n        command: function(options) {\n            var commandsMap = {\n                row: {\n                    insert: InsertRowCommand,\n                    \"delete\": DeleteRowCommand,\n                    merge: MergeCellsHorizontallyCommand,\n                    split: SplitCellCommand\n                },\n                column: {\n                    insert: InsertColumnCommand,\n                    \"delete\": DeleteColumnCommand,\n                    merge: MergeCellsVerticallyCommand,\n                    split: SplitCellCommand\n                }\n            };\n\n            options = extend(options, this.options);\n            options.action = options.action || \"insert\";\n\n            return new commandsMap[options.type][options.action](options);\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableFormatCommand = FormatCommand.extend({\n        exec: function() {\n            var that = this;\n            var editor = that.editor;\n\n            FormatCommand.fn.exec.call(this);\n\n            if (editor.elementResizing) {\n                editor.elementResizing._showResizeHandles();\n            }\n        }\n    });\n\n    // var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n    // });\n\n    var TableFormatTool = BlockFormatTool.extend({\n        update: function(ui, nodes) {\n            var isTable = !tableFormatFinder.isFormatted(nodes),\n                isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar) {\n                toolbar.toggle(ui, isFormatted);\n            }\n\n            if (isTable === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        },\n        command: function(commandArguments) {\n            var that = this;\n\n            return new TableFormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n        isTable: function(node) {\n            return dom.is(node, \"table\");\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        PopupTool: PopupTool,\n        TableCommand: TableCommand,\n        InsertTableTool: InsertTableTool,\n        TableFormatTool: TableFormatTool,\n        TableFormatCommand: TableFormatCommand,\n        TableModificationTool: TableModificationTool,\n        InsertRowCommand: InsertRowCommand,\n        InsertColumnCommand: InsertColumnCommand,\n        DeleteRowCommand: DeleteRowCommand,\n        DeleteColumnCommand: DeleteColumnCommand,\n        MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n        MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n        SplitCellCommand: SplitCellCommand\n    });\n\n\n    registerTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\n    registerTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\n    registerTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\n    registerTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\n    registerTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\n    registerTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\n    registerTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\n    registerTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\n    registerTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\n    registerTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\n    registerTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\n    registerFormat(\"tableAlignLeft\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"left\" } }\n    ]);\n    registerTool(\"tableAlignLeft\", new TableFormatTool({\n        format: formats.tableAlignLeft,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignCenter\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"center\" } }\n    ]);\n    registerTool(\"tableAlignCenter\", new TableFormatTool({\n        format: formats.tableAlignCenter,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignRight\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n        { tags: [\"table\"], attr: { align: \"right\" } }\n    ]);\n    registerTool(\"tableAlignRight\", new TableFormatTool({\n        format: formats.tableAlignRight,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            RangeUtils = editorNS.RangeUtils,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            browser = kendo.support.browser,\n            extend = $.extend;\n\n    var Clipboard = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            var pasteCleanup = editor.options.pasteCleanup;\n            this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n            this.cleaners = [\n                new ScriptCleaner(pasteCleanup),\n                new TabCleaner(pasteCleanup),\n                new MSWordFormatCleaner(pasteCleanup),\n                new WebkitFormatCleaner(pasteCleanup),\n                new HtmlTagsCleaner(pasteCleanup),\n                new HtmlAttrCleaner(pasteCleanup),\n                new HtmlContentCleaner(pasteCleanup),\n                new CustomCleaner(pasteCleanup) //always keep at end\n            ];\n        },\n\n        htmlToFragment: function(html) {\n            var editor = this.editor,\n                doc = editor.document,\n                container = dom.create(doc, 'div'),\n                fragment = doc.createDocumentFragment();\n\n            container.innerHTML = html;\n\n            while (container.firstChild) {\n                fragment.appendChild(container.firstChild);\n            }\n\n            return fragment;\n        },\n\n        isBlock: function(html) {\n            return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n        },\n\n        _startModification: function() {\n            var range;\n            var restorePoint;\n            var editor = this.editor;\n\n            if (this._inProgress) {\n                return;\n            }\n\n            this._inProgress = true;\n\n            range = editor.getRange();\n            restorePoint = new RestorePoint(range, editor.body);\n\n            dom.persistScrollTop(editor.document);\n\n            return { range: range, restorePoint: restorePoint };\n        },\n\n        _endModification: function(modificationInfo) {\n            editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n            this.editor._selectionChange();\n\n            this._inProgress = false;\n        },\n\n        _contentModification: function(before, after) {\n            var that = this;\n            var editor = that.editor;\n            var modificationInfo = that._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            before.call(that, editor, modificationInfo.range);\n\n            setTimeout(function() {\n                after.call(that, editor, modificationInfo.range);\n\n                that._endModification(modificationInfo);\n            });\n        },\n\n        _removeBomNodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n\n            for (var i = 0; i < nodes.length; i++) {\n                nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n            }\n        },\n\n        _onBeforeCopy: function(range) {\n            var marker = new Marker();\n            marker.add(range);\n\n            this._removeBomNodes(range);\n\n            marker.remove(range);\n\n            this.editor.selectRange(range);\n        },\n\n        oncopy: function() {\n            this._onBeforeCopy(this.editor.getRange());\n        },\n\n        oncut: function() {\n            this._onBeforeCopy(this.editor.getRange());\n            this._contentModification($.noop, $.noop);\n        },\n\n        _fileToDataURL: function(blob) {\n            var deferred = $.Deferred();\n\n            var reader = new FileReader();\n\n            if (!(blob instanceof window.File) && blob.getAsFile) {\n                blob = blob.getAsFile();\n            }\n\n            reader.onload = deferred.resolve.bind(deferred);\n\n            reader.readAsDataURL(blob);\n\n            return deferred.promise();\n        },\n\n        _triggerPaste: function(html, options) {\n            var args = { html: html || \"\" };\n\n            args.html = args.html.replace(/\\ufeff/g, \"\");\n\n            this.editor.trigger(\"paste\", args);\n\n            this.paste(args.html, options || {});\n        },\n\n        _handleImagePaste: function(e) {\n            if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n                return;\n            }\n\n            var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                        window.clipboardData || {};\n\n            var items = clipboardData.items || clipboardData.files;\n\n            return this._insertImages(items);\n        },\n\n        _insertImages: function(items) {\n            if (!items) {\n                return;\n            }\n\n            var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n            var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n            if (html.length || !images.length) {\n                return;\n            }\n\n            var modificationInfo = this._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            $.when.apply($, $.map(images, this._fileToDataURL))\n                .done((function() {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function(e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join(\"\");\n\n                    this._triggerPaste(html);\n\n                    this._endModification(modificationInfo);\n                }).bind(this));\n\n            return true;\n        },\n\n        onpaste: function(e) {\n            if (this.editor.body.contentEditable === \"false\") {\n                return;\n            }\n\n            if (this._handleImagePaste(e)) {\n                e.preventDefault();\n                return;\n            }\n\n            this.expandImmutablesIn();\n\n            this._contentModification(\n                function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                            className: 'k-paste-container',\n                            innerHTML: \"\\ufeff\"\n                        });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n\n                    this._decoreateClipboardNode(clipboardNode, body);\n\n                    body.appendChild(clipboardNode);\n\n                    //Browser scrolls to clipboardNode\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n\n                    // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', this.onpaste.bind(this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n\n                    range.deleteContents();\n                },\n                function afterPaste(editor, range) {\n                    var html = \"\", containers;\n\n                    editor.selectRange(range);\n\n                    containers = $(editor.body).children(\".k-paste-container\");\n\n                    containers.each(function() {\n                        var lastChild = this.lastChild;\n\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n\n                        html += this.innerHTML;\n                    });\n\n                    containers.remove();\n\n                    this._triggerPaste(html, { clean: true });\n                }\n            );\n        },\n        ondragover: function(e) {\n            if (browser.msie || browser.edge) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        },\n        ondrop: function(e) {\n            if (!('FileReader' in window)) {\n                return;\n            }\n\n            var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n            var items = dataTransfer.items || dataTransfer.files;\n\n            if (this._insertImages(items)) {\n                e.preventDefault();\n            }\n        },\n        _decoreateClipboardNode: function(node, body) {\n            if (!browser.msie && !browser.webkit) {\n                return;\n            }\n\n            node = $(node);\n            node.css({\n                borderWidth: \"0px\",\n                width: \"0px\",\n                height: \"0px\",\n                overflow: \"hidden\",\n                margin: \"0\",\n                padding: \"0\"\n            });\n\n            if (browser.msie) {\n                //node inherits BODY styles and this causes the browser to add additional\n                var documentElement = $(body.ownerDocument.documentElement);\n\n                node.css({\n                    fontVariant: \"normal\",\n                    fontWeight: \"normal\",\n                    lineSpacing: \"normal\",\n                    lineHeight: \"normal\",\n                    textDecoration: \"none\"\n                });\n                var color = documentElement.css(\"color\");\n                if (color) {\n                    node.css(\"color\", color);\n                }\n                var fontFamily = documentElement.css(\"fontFamily\");\n                if (fontFamily) {\n                    node.css(\"fontFamily\", fontFamily);\n                }\n                var fontSize = documentElement.css(\"fontSize\");\n                if (fontSize) {\n                    node.css(\"fontSize\", fontSize);\n                }\n            }\n        },\n        _moveToCaretPosition: function(node, range) {\n            var that = this;\n            var body = that.editor.body;\n            var nodeOffset = dom.offset(node, body);\n            var caretOffset = that._caretOffset(range, body);\n            var translateX = caretOffset.left - nodeOffset.left;\n            var translateY = caretOffset.top - nodeOffset.top;\n            var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n            $(node).css({\n                \"-webkit-transform\": translate,\n                \"transform\": translate\n            });\n        },\n        _caretOffset: function(range, body) {\n            var editor = this.editor;\n            var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n            var startContainer = range.startContainer;\n            var rangeChanged;\n\n            if (range.collapsed) {\n                var isStartTextNode = dom.isDataNode(startContainer);\n                if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                    dom.insertBefore(caret, startContainer);\n                } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                    dom.insertAfter(caret, startContainer);\n                } else {\n                    range.insertNode(caret);\n                    rangeChanged = true;\n                }\n            } else {\n                startContainer = startContainer === body ?\n                    startContainer.childNodes[range.startOffset] : startContainer;\n                dom.insertBefore(caret, startContainer);\n            }\n\n            var offset = dom.offset(caret, body);\n            var prev = caret.previousSibling;\n            var next = caret.nextSibling;\n\n            dom.remove(caret);\n\n            if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                var prevLength = prev.length;\n                next.data = prev.data + next.data;\n                range.setStart(next, prevLength);\n                dom.remove(prev);\n\n                range.collapse(true);\n                editor.selectRange(range);\n            }\n\n            return offset;\n        },\n\n        expandImmutablesIn: function(range) {\n            var editor = this.editor;\n            if (editor && editor.options.immutables) {\n                var body = editor.body;\n                range = range || editor.getRange();\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                if (range.startContainer === body && range.startOffset === 0) {\n                    var doc = body.ownerDocument;\n                    var bomNode = doc.createTextNode(\"\\ufeff\");\n                    body.insertBefore(bomNode, body.childNodes[0]);\n                    range.setStartBefore(bomNode);\n                }\n                editor.selectRange(range);\n            }\n        },\n\n        splittableParent: function(block, node) {\n            var parentNode, body;\n\n            if (block) {\n                return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n            }\n\n            parentNode = node.parentNode;\n            body = node.ownerDocument.body;\n\n            if (dom.isInline(parentNode)) {\n                while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                    parentNode = parentNode.parentNode;\n                }\n            }\n\n            return parentNode;\n        },\n\n        paste: function(html, options) {\n            var editor = this.editor,\n                nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n                preventSplit = false,\n                unwrapPasted = false,\n                i, l, childNodes, isList;\n\n            this.expandImmutablesIn();\n\n            options = extend({ clean: false, split: true }, options);\n\n            if (!options.skipCleaners) {\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n            }\n\n            if (options.clean) {\n                // remove br elements which immediately precede block elements\n                html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n                // remove empty inline elements\n                html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n            }\n\n            html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n            // It is possible in IE to copy just <li> tags\n            html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n            var block = this.isBlock(html);\n\n            editor.focus();\n            var range = editor.getRange();\n            range.deleteContents();\n\n            if (range.startContainer == editor.document) {\n                range.selectNodeContents(editor.body);\n            }\n\n            var marker = new Marker();\n            var caret = marker.addCaret(range);\n\n            var parent = this.splittableParent(block, caret);\n            var unwrap = false;\n\n            for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n                const splitter = nonSplittableTagsOnPaste[i],\n                    tag = splitter.tag || splitter;\n\n                if (dom.is(parent, tag)) {\n                    preventSplit = true;\n                    unwrapPasted = splitter.unwrap !== false;\n                    break;\n                }\n            }\n\n            var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n            if (options.split && splittable && (block || dom.isInline(parent))) {\n                range.selectNode(caret);\n                RangeUtils.split(range, parent, true);\n                unwrap = true;\n            }\n\n            var fragment = this.htmlToFragment(html);\n\n            if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n                var fragmentsHtml = [];\n                for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                    fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                }\n\n                fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n            }\n\n            childNodes = fragment.childNodes;\n\n            if (unwrapPasted) {\n                isList = dom.list(childNodes[0]);\n                dom.unwrap(childNodes[0]);\n\n                if (isList) {\n                    range.selectNode(caret.parentNode);\n                }\n            }\n\n            $(childNodes)\n                .filter(\"table\").addClass(\"k-table\").end()\n                .find(\"table\").addClass(\"k-table\");\n\n            $(childNodes).each(function(index, elm) {\n               if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                    elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n               }\n            });\n\n            range.insertNode(fragment);\n\n            parent = this.splittableParent(block, caret);\n            if (unwrap) {\n                while (caret.parentNode != parent) {\n                    dom.unwrap(caret.parentNode);\n                }\n\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.normalize(range.commonAncestorContainer);\n            caret.style.display = 'inline';\n            dom.restoreScrollTop(editor.document);\n            dom.scrollTo(caret);\n            marker.removeCaret(range);\n\n            var rangeEnd = range.commonAncestorContainer.parentNode;\n            if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n                range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n                range.collapse(true);\n            }\n\n            var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n            if (focusedTable.get(0)) {\n                var siblingNodes = focusedTable.parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n\n                if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                    dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n                }\n            }\n\n            editor._handleSpaceAndNewLines();\n            editor.selectRange(range);\n        }\n    });\n\n    var Cleaner = Class.extend({\n        init: function(options) {\n            this.options = options || {};\n            this.replacements = [];\n        },\n\n        clean: function(html, customReplacements) {\n            var that = this,\n                replacements = customReplacements || that.replacements,\n                i, l;\n\n            for (i = 0, l = replacements.length; i < l; i += 2) {\n                html = html.replace(replacements[i], replacements[i + 1]);\n            }\n\n            return html;\n        }\n    });\n\n    var ScriptCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n            ];\n        },\n\n        applicable: function(html) {\n            return !this.options.none && (/<script[^>]*>/i).test(html);\n        }\n    });\n\n    var TabCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            var replacement = ' ';\n            this.replacements = [\n                /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n                /\\t/gi, replacement,\n                /&nbsp;&nbsp; &nbsp;/gi, replacement\n            ];\n        },\n\n        applicable: function(html) {\n            return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n        }\n    });\n\n    var MSWordFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.junkReplacements = [\n                /<\\?xml[^>]*>/gi, '',\n                /<!--(.|\\n)*?-->/g, '', /* comments */\n                /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n                /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n                /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n                /<\\/o>/g, ''\n            ];\n            this.replacements = this.junkReplacements.concat([\n                /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n                /<br><br>/g, '<BR><BR>',\n                /<br>\\n/g, '<br/>',\n                /<br>(?!\\n)/g, ' ',\n                /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n                /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n                /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n                /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n                /<BR><BR>/g, '<br>',\n                /^\\s*(&nbsp;)+/gi, '',\n                /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n                /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n                /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n                /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n                /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n                /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n                /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n            ]);\n        },\n\n        convertFontMatch: function(match, closing, args) {\n            var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n            var face = faceRe.exec(args);\n            var family = args && face && face[1];\n\n            if (closing) {\n                return '</span>';\n            } else if (family) {\n                return '<span style=\"font-family:' + family + '\">';\n            } else {\n                return '<span>';\n            }\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Mso/i).test(html) ||\n                   (/style=\"[^\"]*mso-/i).test(html) ||\n                   (/urn:schemas-microsoft-com:office/).test(html);\n        },\n\n        stripEmptyAnchors: function(html) {\n            return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n                if (!attributes || attributes.indexOf(\"href\") < 0) {\n                    return \"\";\n                }\n\n                return a;\n            });\n        },\n\n        listType: function(p, listData) {\n            var html = p.innerHTML;\n            var text = dom.innerText(p);\n\n            var startingSymbol;\n            var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n            var symbol = matchSymbol && matchSymbol[1];\n            var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n            var trimStartText = function(text) {\n                return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n            };\n\n            if (matchSymbol) {\n                startingSymbol = true;\n            }\n\n            html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n            if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n                (startingSymbol && /^.\\u00a0+/.test(html)) ||\n                (symbol && !isNumber && listData)) {\n                return {\n                    tag: 'ul',\n                    style: this._guessUnorderedListStyle(trimStartText(text))\n                };\n            }\n\n            if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                return {\n                    tag: 'ol',\n                    style: this._guessOrderedListStyle(trimStartText(text))\n                };\n            }\n        },\n\n        _convertToLi: function(p) {\n            var content;\n\n            if (p.childNodes.length == 1) {\n                content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n                content = this._checkForBullet(content);\n            } else {\n                content = this._getHtmlNoBullet(p);\n            }\n\n            dom.remove(p);\n\n            return dom.create(document, 'li', { innerHTML: content });\n        },\n\n        _checkForBullet: function(html) {\n            var p = dom.create(document, 'p', { innerHTML: html });\n            var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n            if (bulletRgx.test(p.innerText)) {\n                return this._getHtmlNoBullet(p);\n            }\n\n            return html;\n        },\n\n        _getHtmlNoBullet: function(element) {\n            var content,\n                name = dom.name(element);\n\n            dom.remove(element.firstChild);\n\n            // check for roman numerals\n            if (element.firstChild.nodeType == 3) {\n                if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                    dom.remove(element.firstChild);\n                }\n            }\n\n            if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                dom.remove(element.firstChild);\n            }\n\n            if (name != \"p\") {\n                content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n            } else {\n                content = element.innerHTML;\n            }\n\n            return content;\n        },\n\n        _guessUnorderedListStyle: function(symbol) {\n            if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                return null;//return \"disc\"; //default CSS value\n            } else if (/^o/.test(symbol)) {\n                return \"circle\";\n            } else {\n                return \"square\";\n            }\n        },\n        _guessOrderedListStyle: function(symbol) {\n            var listType = null;\n            if (!/^\\d/.test(symbol)) {\n                listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                           (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n            }\n\n            return listType;\n        },\n\n        extractListLevels: function(html) {\n            var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n            html = html.replace(msoListRegExp, function(match, list, level) {\n                return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n            });\n\n            return html;\n        },\n\n        _createList: function(type, styleType) {\n            return dom.create(document, type, {\n                style: { listStyleType: styleType }\n            });\n        },\n\n        lists: function(placeholder) {\n            var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n                lastMargin = -1,\n                name,\n                levels = {},\n                li,\n                rootMargin,\n                rootIndex,\n                lastRootLi,\n                isLastRootLi,\n                rootList,\n                i, p, type, margin, list, listData,\n                acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n                isParentTable = false;\n\n            for (i = 0; i < blockChildren.length; i++) {\n                p = blockChildren[i];\n                listData = $(p).data();\n                var listIndex = listData.list;\n                name = dom.name(p);\n                isParentTable = !!$(p).parents(\"table\").length;\n\n                if (isParentTable) {\n                    continue;\n                }\n\n                var listType = this.listType(p, listData);\n                type = listType && listType.tag;\n\n                if (!type || acceptedNameTags.indexOf(name) < 0) {\n                    if (!p.innerHTML) {\n                        dom.remove(p);\n                    } else if (li && !isLastRootLi) {\n                        li.appendChild(p);\n                    }\n                    continue;\n                }\n\n                // not supported list levels in ie\n                if (browser.msie) {\n                    continue;\n                }\n\n                margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n                var levelType = type + listIndex;\n                if (!levels[margin]) {\n                    levels[margin] = {};\n                }\n\n                if (!rootMargin || rootMargin < 0) {\n                    rootMargin = margin;\n                    rootIndex = listIndex;\n                    lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                    rootList = this._createList(type, listType.style);\n                    dom.insertBefore(rootList, p);\n                    lastMargin = margin;\n                    levels[margin][levelType] = rootList;\n                }\n\n                isLastRootLi = lastRootLi === p;\n\n                list = levels[margin][levelType];\n\n                if (margin > lastMargin || !list) {\n                    list = this._createList(type, listType.style);\n                    levels[margin][levelType] = list;\n                    li.appendChild(list);\n                }\n\n                li = this._convertToLi(p);\n                list.appendChild(li);\n\n                if (isLastRootLi) {\n                    rootMargin = lastMargin = -1;\n                } else {\n                    lastMargin = margin;\n                }\n            }\n        },\n\n        removeAttributes: function(element) {\n            var attributes = element.attributes,\n                i = attributes.length,\n                significantStyles = [],\n                isSignificantCss = function(val) {\n                    var significantCss = [\"border\", \"background\", \"padding\"];\n\n                    return significantCss.filter(function(cssAttr) {\n                        return val.trim().indexOf(cssAttr) === 0;\n                    }).length > 0;\n                },\n                addSignificantStyles = function(val) {\n                    if (isSignificantCss(val)) {\n                        significantStyles.push(val.trim());\n                    }\n                },\n                attr, attributeName, attributeValues;\n\n            while (i--) {\n                if (dom.name(attributes[i]) != \"colspan\") {\n                    attr = attributes[i];\n                    attributeName = attr.name;\n\n                    if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                        attributeValues = attr.value.split(\";\");\n                        attributeValues.forEach(addSignificantStyles);\n                    }\n\n                    element.removeAttributeNode(attributes[i]);\n                }\n            }\n\n            if (significantStyles.length > 0) {\n                element.setAttribute(\"style\", significantStyles.join(\";\"));\n            }\n        },\n\n        createColGroup: function(row) {\n            var cells = row.cells;\n            var table = $(row).closest(\"table\");\n            var colgroup = table.children(\"colgroup\");\n\n            if (cells.length < 2) {\n                return;\n            } else if (colgroup.length) {\n                cells = colgroup.children();\n                colgroup[0].parentNode.removeChild(colgroup[0]);\n            }\n\n            colgroup = $($.map(cells, function(cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n\n                    return \"<col />\";\n                }).join(\"\"));\n\n            // jquery 1.9/2.0 discrepancy\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            colgroup.prependTo(table);\n        },\n\n        convertHeaders: function(row) {\n            var cells = row.cells,\n                i,\n                boldedCells = $.map(cells, function(cell) {\n                    var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                    if (child && dom.name(child) == \"strong\") {\n                        return child;\n                    }\n                });\n\n            if (boldedCells.length == cells.length) {\n                for (i = 0; i < boldedCells.length; i++) {\n                    dom.unwrap(boldedCells[i]);\n                }\n\n                $(row).closest(\"table\")\n                    .find(\"colgroup\").after(\"<thead></thead>\").end()\n                    .find(\"thead\").append(row);\n\n                for (i = 0; i < cells.length; i++) {\n                    dom.changeTag(cells[i], \"th\");\n                }\n            }\n        },\n\n        removeParagraphs: function(cells) {\n            var i, j, len, cell, paragraphs;\n\n            for (i = 0; i < cells.length; i++) {\n                this.removeAttributes(cells[i]);\n\n                // remove paragraphs and insert line breaks between them\n                cell = $(cells[i]);\n                paragraphs = cell.children(\"p\");\n\n                for (j = 0, len = paragraphs.length; j < len; j++) {\n                    if (j < len - 1) {\n                        dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                    }\n\n                    dom.unwrap(paragraphs[j]);\n                }\n            }\n        },\n\n        removeTextNodes: function(trs) {\n            var i, j, childNodes, currentNode, row;\n\n            for (i = 0; i < trs.length; i++) {\n                row = trs[i];\n                childNodes = row.childNodes;\n\n                for (j = 0; j < childNodes.length; j++) {\n                    currentNode = childNodes[j];\n\n                    if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                        row.removeChild(currentNode);\n                    }\n                }\n            }\n        },\n\n        tables: function(placeholder) {\n            var tables = $(placeholder).find(\"table\"),\n                that = this,\n                rows,\n                firstRow, longestRow, i, j;\n\n            for (i = 0; i < tables.length; i++) {\n                rows = tables[i].rows;\n                longestRow = firstRow = rows[0];\n\n                for (j = 1; j < rows.length; j++) {\n                    if (rows[j].cells.length > longestRow.cells.length) {\n                        longestRow = rows[j];\n                    }\n                }\n\n                that.createColGroup(longestRow);\n                that.convertHeaders(firstRow);\n\n                that.removeAttributes(tables[i]);\n\n                that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n                that.removeTextNodes(tables.eq(i).find(\"tr\"));\n            }\n        },\n\n        headers: function(placeholder) {\n            var titles = $(placeholder).find(\"p.MsoTitle\");\n\n            for (var i = 0; i < titles.length; i++) {\n                dom.changeTag(titles[i], \"h1\");\n            }\n        },\n\n        removeFormatting: function(placeholder) {\n            $(placeholder).find(\"*\").each(function() {\n                $(this).css({\n                    fontSize: \"\",\n                    fontFamily: \"\"\n                });\n\n                if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                    this.removeAttribute(\"style\");\n                }\n            });\n        },\n\n        clean: function(html) {\n            var that = this, placeholder;\n            var filters = this.options;\n\n            if (filters.none) {\n                html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                html = that.stripEmptyAnchors(html);\n            } else {\n\n                html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n\n                if (filters.msConvertLists) {\n                    that.lists(placeholder);\n                }\n                that.tables(placeholder);\n\n                if (filters.msAllFormatting) {\n                    that.removeFormatting(placeholder);\n                }\n\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n            }\n\n            return html;\n        }\n    });\n\n    var WebkitFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n                /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n                /^<div>(.*)<\\/div>$/, '$1'\n            ];\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n        }\n    });\n\n    var DomCleaner = Cleaner.extend({\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n            container = this.cleanDom(container);\n            return container.innerHTML;\n        },\n\n        cleanDom: function(container) {\n            return container;\n        }\n    });\n\n    var HtmlTagsCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var tags = this.collectTags();\n\n            $(container).find(tags).each(function() {\n                dom.unwrap(this);\n            });\n\n            return container;\n        },\n\n        collectTags: function() {\n            if (this.options.span) {\n                return \"span\";\n            }\n        },\n\n        applicable: function() {\n            return this.options.span;\n        }\n    });\n\n    var HtmlAttrCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var attributes = this.collectAttr();\n            var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n            nodes.removeAttr(attributes.join(\" \"));\n\n            return container;\n        },\n\n        collectAttr: function() {\n            if (this.options.css) {\n                return [\"class\", \"style\"];\n            }\n\n            return [];\n        },\n\n        applicable: function() {\n            return this.options.css;\n        }\n    });\n\n    var TextContainer = function() {\n        this.text = \"\";\n        this.add = function(text) {\n            this.text += text;\n        };\n    };\n\n    var HtmlTextLines = Class.extend({\n        init: function(separators) {\n            this.separators = separators || {\n                    text: \" \",\n                    line: \"<br/>\"\n                };\n            this.lines = [];\n            this.inlineBlockText = [];\n            this.resetLine();\n        },\n\n        appendText: function(text) {\n            if (text.nodeType === 3) {\n                text = text.nodeValue;\n            }\n\n            this.textContainer.add(text);\n        },\n\n        appendInlineBlockText: function(text) {\n            this.inlineBlockText.push(text);\n        },\n\n        flashInlineBlockText: function() {\n            if (this.inlineBlockText.length) {\n                this.appendText(this.inlineBlockText.join(\" \"));\n                this.inlineBlockText = [];\n            }\n        },\n\n        endLine: function() {\n            this.flashInlineBlockText();\n            this.resetLine();\n        },\n\n        html: function() {\n            var separators = this.separators;\n            var result = \"\";\n            var lines = this.lines;\n\n            this.flashInlineBlockText();\n\n            for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                var line = lines[i];\n                for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                    var text = line[j].text;\n                    result += text;\n                    if (j !== jl1) {\n                        result += separators.text;\n                    }\n                }\n                if (i !== il1) {\n                    result += separators.line;\n                }\n            }\n\n            return result;\n        },\n\n        resetLine: function() {\n            this.textContainer = new TextContainer();\n            this.line = [];\n            this.line.push(this.textContainer);\n            this.lines.push(this.line);\n        }\n    });\n\n    var DomEnumerator = Class.extend({\n        init: function(callback) {\n            this.callback = callback;\n        },\n        enumerate: function(node) {\n            if (!node) {\n                return;\n            }\n\n            var preventDown = this.callback(node);\n\n            var child = node.firstChild;\n            if (!preventDown && child) {\n                this.enumerate(child);\n            }\n\n            this.enumerate(node.nextSibling);\n        }\n    });\n\n    var HtmlContentCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n            this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n            this.enumerator = new DomEnumerator(this.buildText.bind(this));\n        },\n\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n\n            return this.cleanDom(container);\n        },\n\n        cleanDom: function(container) {\n            this.separators = this.getDefaultSeparators();\n            this.htmlLines = new HtmlTextLines(this.separators);\n            this.enumerator.enumerate(container.firstChild);\n            this.hasText = false;\n\n            return this.htmlLines.html();\n        },\n\n        buildText: function(node) {\n            if (dom.isDataNode(node)) {\n                if (dom.isEmptyspace(node)) {\n                    return;\n                }\n                this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                this.hasText = true;\n            } else if (dom.isBlock(node) && this.hasText) {\n                var action = this.actions[dom.name(node)] || this.actions.block;\n                return action(this, node);\n            } else if (dom.isBr(node)) {\n                this.htmlLines.appendText(this.separators.line);\n            }\n        },\n\n        applicable: function() {\n            var o = this.options;\n            return o.all || o.keepNewLines;\n        },\n\n        getDefaultSeparators: function() {\n            if (this.options.all) {\n                return { text: \" \", line: \" \" };\n            } else {\n                return { text: \" \", line: \"<br/>\" };\n            }\n        },\n\n        actions: {\n            ul: $.noop,\n            ol: $.noop,\n            table: $.noop,\n            thead: $.noop,\n            tbody: $.noop,\n            td: function(cleaner, node) {\n                var tdCleaner = new HtmlContentCleaner({ all: true });\n\n                var cellText = tdCleaner.cleanDom(node);\n                cleaner.htmlLines.appendInlineBlockText(cellText);\n\n                return true;\n            },\n\n            block: function(cleaner) {\n                cleaner.htmlLines.endLine();\n            }\n        }\n    });\n\n    var CustomCleaner = Cleaner.extend({\n        clean: function(html) {\n            return this.options.custom(html);\n        },\n\n        applicable: function() {\n            return typeof(this.options.custom) === \"function\";\n        }\n    });\n\n    extend(editorNS, {\n        Clipboard: Clipboard,\n        Cleaner: Cleaner,\n        ScriptCleaner: ScriptCleaner,\n        TabCleaner: TabCleaner,\n        MSWordFormatCleaner: MSWordFormatCleaner,\n        WebkitFormatCleaner: WebkitFormatCleaner,\n        HtmlTagsCleaner: HtmlTagsCleaner,\n        HtmlAttrCleaner: HtmlAttrCleaner,\n        HtmlContentCleaner: HtmlContentCleaner,\n        HtmlTextLines: HtmlTextLines,\n        CustomCleaner: CustomCleaner\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n        extend = $.extend;\n    var nodeTypes = dom.nodeTypes;\n    var PREVIOUS_SIBLING = \"previousSibling\";\n\n    function selected(node, range) {\n        return range.startContainer === node && range.endContainer === node &&\n            range.startOffset === 0 && range.endOffset == node.childNodes.length;\n    }\n\n    function getSibling(node, direction, condition) {\n        var sibling = node ? node[direction] : null;\n\n        while (sibling && !condition(sibling)) {\n            sibling = sibling[direction];\n        }\n\n        return sibling;\n    }\n\n    var tableCells = \"td,th,caption\";\n    var tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\n    var tableElements = tableCellsWrappers + \",\" + tableCells;\n    var inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\n    var RemoveTableContent = Class.extend({\n        remove: function(range) {\n            var that = this;\n            var marker = new Marker();\n            marker.add(range, false);\n\n            var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n            var doc = RangeUtils.documentFromRange(range);\n            var start = marker.start;\n            var end = marker.end;\n            var cellsTypes = tableCells.split(\",\");\n            var startCell = dom.parentOfType(start, cellsTypes);\n            var endCell = dom.parentOfType(end, cellsTypes);\n            that._removeContent(start, startCell, true);\n            that._removeContent(end, endCell, false);\n            $(nodes).each(function(i, node) {\n                node = $(node);\n                (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                    cell.innerHTML = \"&#65279;\";\n                });\n            });\n            if (startCell && !start.previousSibling) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n            }\n            if (endCell && !end.nextSibling) {\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n            }\n            if (startCell) {\n                range.setStartBefore(start);\n            } else if (nodes[0]) {\n                startCell = $(nodes[0]);\n                startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                if (startCell.length) {\n                    range.setStart(startCell.get(0), 0);\n                }\n            }\n\n            range.collapse(true);\n\n            dom.remove(start);\n            dom.remove(end);\n        },\n        _removeContent: function(start, top, forwards) {\n            if (top) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                    next,\n                    getNext = function(node) {\n                        while (node && !node[sibling]) {\n                            node = node.parentNode;\n                        }\n                        return node && $.contains(top, node) ? node[sibling] : null;\n                    };\n                start = getNext(start);\n                while (start) {\n                    next = getNext(start);\n                    dom.remove(start);\n                    start = next;\n                }\n            }\n        }\n    });\n\n    var TypingHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard,\n                isTypingKey = keyboard.isTypingKey(e),\n                evt = extend($.Event(), e);\n\n            that.editor.trigger(\"keydown\", evt);\n\n            if (evt.isDefaultPrevented()) {\n                e.preventDefault();\n                return true;\n            }\n\n            if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                var range = editor.getRange();\n                var body = editor.body;\n                that.startRestorePoint = new RestorePoint(range, body);\n\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                }\n\n                if (browser.webkit && !range.collapsed && selected(body, range)) {\n                    body.innerHTML = \"\";\n                }\n\n                if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                    var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                    backspaceHandler.deleteSelection(range);\n                }\n\n                keyboard.startTyping(function() {\n                    that._removeBomSpan();\n                    that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function(e) {\n            var keyboard = this.editor.keyboard;\n\n            this.editor.trigger(\"keyup\", e);\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping();\n                return true;\n            }\n\n            return false;\n        },\n\n        _removeBomSpan: function() {\n            var node = this.editor.getRange().commonAncestorContainer;\n\n            if (!dom.emptyNode(node)) {\n                if (node.nodeType === 3) {\n                    node = node.parentNode;\n                }\n\n                if (dom.insignificant(node)) {\n                    // typing in an insignificant node\n                    // make it significant\n                    node.textContent = dom.stripBom(node.textContent);\n                    dom.unwrap(node);\n                }\n            }\n        }\n    });\n\n    var BackspaceHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n        _addCaret: function(container) {\n            var caret = dom.create(this.editor.document, \"a\");\n\n            // Only if not Chrome: Make sure to include cared in the formatted inline node\n            if (!kendo.support.browser.chrome && container.firstChild &&\n                container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n                container = container.firstChild;\n            }\n\n            dom.insertAt(container, caret, 0);\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n            return caret;\n        },\n        _restoreCaret: function(caret) {\n            var range = this.editor.createRange();\n\n            if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                range.setStart(caret.previousSibling, caret.previousSibling.length);\n            } else {\n                range.setStartAfter(caret);\n            }\n\n            range.collapse(true);\n            this.editor.selectRange(range);\n            dom.remove(caret);\n        },\n        _handleDelete: function(range) {\n            var node = range.endContainer;\n            var block = dom.closestEditableOfType(node, dom.blockElements);\n\n            if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                // join with next sibling\n                var next = dom.next(block);\n                if (!next || dom.name(next) != \"p\") {\n                    return false;\n                }\n\n                var caretPlaceholder = dom.significantChildNodes(next)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n                var caret = this._addCaret(caretPlaceholder);\n\n                this._merge(block, next);\n\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            return false;\n        },\n        _cleanBomBefore: function(range) {\n            var offset = range.startOffset;\n            var node = range.startContainer;\n            var text = node.nodeValue;\n            var count = 0;\n            while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n                count++;\n            }\n\n            if (count > 0) {\n                node.deleteData(offset - count, count);\n\n                range.setStart(node, Math.max(0, offset - count));\n                range.collapse(true);\n\n                this.editor.selectRange(range);\n            }\n        },\n        _handleBackspace: function(range) {\n            var node = range.startContainer;\n            var li = dom.closestEditableOfType(node, ['li']);\n            var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n            var editor = this.editor;\n            var previousSibling;\n\n            if (dom.isDataNode(node)) {\n                if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                    range.setStart(node, 0);\n                    range.setEnd(node, node.length);\n                    editor.selectRange(range);\n                    return false;\n                }\n                this._cleanBomBefore(range);\n            }\n\n            previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.htmlIndentSpace(sibling);\n            });\n\n            //deleting the first list item with empty content in IE results in invalid range\n            if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                range.startOffset = 0;\n                range.endOffset = 0;\n                editor.selectRange(range);\n            }\n\n            var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n            var liIndex = li && $(li).index();\n            var startAtNonFirstLi = startAtLi && liIndex > 0;\n            if (startAtNonFirstLi) {\n                block = li;\n                previousSibling = dom.prev(li);\n            }\n\n            if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                if (block.innerText === '') {\n                    block.innerHTML = '\\ufeff';\n                }\n                return true;\n            }\n\n            // outdent\n            if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n                editor.exec(\"outdent\");\n                return true;\n            }\n\n            // unwrap block\n            if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n                var caretPlaceholder = dom.significantChildNodes(block)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n                var caret = this._addCaret(caretPlaceholder);\n                this._merge(previousSibling, block);\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            // unwrap li element\n            if (startAtLi && liIndex === 0) {\n                var child = li.firstChild;\n                if (!child) {\n                    li.innerHTML = editorNS.emptyElementContent;\n                    child = li.firstChild;\n                }\n\n                var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n                range.selectNodeContents(li);\n                formatter.toggle(range);\n\n                if (dom.insignificant(child)) {\n                    range.setStartBefore(child);\n                } else {\n                    range.setStart(child, 0);\n                }\n\n                editor.selectRange(range);\n\n                return true;\n            }\n\n            var rangeStartNode = node.childNodes[range.startOffset - 1];\n            var linkRange = range;\n            var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n            var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n            });\n            if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n                anchor = anchor || previousNode;\n                linkRange = editor.createRange();\n                linkRange.setStart(anchor, anchor.childNodes.length);\n                linkRange.collapse(true);\n            }\n\n            anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n            var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n            if (isEndOfLink) {\n                var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n                editor.execCommand(command);\n                editor._selectionChange();\n            }\n            return false;\n        },\n        _handleSelection: function(range) {\n            var ancestor = range.commonAncestorContainer;\n            var table = dom.closest(ancestor, \"table\");\n            var emptyParagraphContent = editorNS.emptyElementContent;\n            var editor = this.editor;\n            var parentElementOrNode;\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n                return true;\n            }\n\n            var marker = new Marker();\n            marker.add(range, false);\n\n            if (range.commonAncestorContainer === editor.body) {\n                this._surroundFullyContent(marker, range);\n            }\n\n            if (editor.immutables) {\n                this._handleImmutables(marker);\n            }\n\n            this._surroundFullySelectedAnchor(marker, range);\n\n            range.setStartAfter(marker.start);\n            range.setEndBefore(marker.end);\n\n            var start = range.startContainer;\n            var end = range.endContainer;\n\n            range.deleteContents();\n\n            if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n                range.selectNode(end);\n                range.deleteContents();\n            }\n\n            if (table && $(table).text() === \"\") {\n                range.selectNode(table);\n                range.deleteContents();\n            }\n\n            ancestor = range.commonAncestorContainer;\n\n            if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n                ancestor.innerHTML = emptyParagraphContent;\n                range.setStart(ancestor, 0);\n            }\n\n            this._join(start, end);\n\n            dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n            marker.remove(range);\n\n            start = range.startContainer;\n            if (dom.name(start) == \"tr\") {\n                start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                range.setStart(start, dom.getNodeLength(start));\n            }\n\n            range.collapse(true);\n\n            editor.selectRange(range);\n\n            parentElementOrNode = start.parentElement || start.parentNode;\n\n            if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                this._cleanBomBefore(range);\n            }\n\n            return true;\n        },\n        _handleImmutables: function(marker) {\n            var immutableParent = editorNS.Immutables.immutableParent;\n            var startImmutable = immutableParent(marker.start);\n            var endImmutable = immutableParent(marker.start);\n            if (startImmutable) {\n                dom.insertBefore(marker.start, startImmutable);\n            }\n            if (endImmutable) {\n                dom.insertAfter(marker.end, endImmutable);\n            }\n            if (startImmutable) {\n                dom.remove(startImmutable);\n            }\n            if (endImmutable && endImmutable.parentNode) {\n                dom.remove(endImmutable);\n            }\n        },\n        _surroundFullyContent: function(marker, range) {\n            var children = range.commonAncestorContainer.children,\n                startParent = children[0],\n                endParent = children[children.length - 1];\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _surroundFullySelectedAnchor: function(marker, range) {\n            var start = marker.start,\n                startParent = $(start).closest(\"a\").get(0),\n                end = marker.end,\n                endParent = $(end).closest(\"a\").get(0);\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _moveMarker: function(marker, range, startParent, endParent) {\n            var start = marker.start,\n                end = marker.end;\n\n            if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                dom.insertBefore(start, startParent);\n            }\n\n            if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                dom.insertAfter(end, endParent);\n            }\n        },\n        _root: function(node) {\n            while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n        _join: function(start, end) {\n            start = this._root(start);\n            end = this._root(end);\n\n            if (start != end && dom.is(end, \"p\")) {\n                this._merge(start, end);\n            }\n        },\n        _merge: function(dest, src) {\n            dom.removeTrailingBreak(dest);\n\n            while (dest && src.firstChild) {\n                if (dest.nodeType == 1) {\n                    dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                    if (dest) {\n                        dest.appendChild(src.firstChild);\n                    }\n                } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                    this._mergeWithTextNode(dest, src.firstChild);\n                } else {\n                    dest.parentNode.appendChild(src.firstChild);\n                }\n            }\n\n            dom.remove(src);\n        },\n\n        _mergeWithTextNode: function(textNode, appendedNode) {\n            if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                    dom.insertAfter(appendedNode, textNode.nextSibling);\n                }\n                else {\n                    dom.insertAfter(appendedNode, textNode);\n                }\n            }\n        },\n\n        _isCaret: function(element) {\n            return $(element).is(\"a\");\n        },\n\n        keydown: function(e) {\n            var method, startRestorePoint;\n            var editor = this.editor;\n            var range = editor.getRange();\n            var keyCode = e.keyCode;\n            var keys = kendo.keys;\n            var backspace = keyCode === keys.BACKSPACE;\n            var del = keyCode == keys.DELETE;\n\n            if (editor.immutables && editor.immutables.keydown(e, range)) {\n                return;\n            }\n\n            if ((backspace || del) && !range.collapsed) {\n                method = \"_handleSelection\";\n            } else if (backspace) {\n                method = \"_handleBackspace\";\n            } else if (del) {\n                method = \"_handleDelete\";\n            }\n\n            if (!method) {\n                return;\n            }\n\n            startRestorePoint = new RestorePoint(range, editor.body);\n\n            if (this[method](range)) {\n                e.preventDefault();\n\n                editorNS._finishUpdate(editor, startRestorePoint);\n            }\n        },\n        deleteSelection: function(range) {\n            this._handleSelection(range);\n        },\n        keyup: $.noop\n    });\n\n    var SystemHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.systemCommandIsInProgress = false;\n        },\n\n        createUndoCommand: function() {\n            this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n        },\n\n        changed: function() {\n            if (this.startRestorePoint) {\n                return this.startRestorePoint.html != this.editor.body.innerHTML;\n            }\n\n            return false;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard;\n\n            if (keyboard.isModifierKey(e)) {\n\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                }\n\n                that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                return true;\n            }\n\n            if (keyboard.isSystem(e)) {\n                that.systemCommandIsInProgress = true;\n\n                if (that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                }\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function() {\n            var that = this;\n\n            if (that.systemCommandIsInProgress && that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n                return true;\n            }\n\n            return false;\n        }\n    });\n\n    var SelectAllHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            if (!browser.webkit || e.isDefaultPrevented() ||\n                !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                return;\n            }\n            if (this.editor.options.immutables) {\n                this._toSelectableImmutables();\n            }\n            this._selectEditorBody();\n        },\n\n        _selectEditorBody: function() {\n            var editor = this.editor;\n            var range = editor.getRange();\n            range.selectNodeContents(editor.body);\n\n            setTimeout(function() {\n                editor.selectRange(range);\n            });\n        },\n\n        _toSelectableImmutables: function() {\n            var editor = this.editor,\n                body = editor.body,\n                immutable = editorNS.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        keyup: $.noop\n    });\n\n    var Keyboard = Class.extend({\n        init: function(handlers) {\n            this.handlers = handlers;\n            this.typingInProgress = false;\n        },\n\n        isCharacter: function(keyCode) {\n            return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n                   (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n                   keyCode == 229;\n        },\n\n        toolFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                toolOptions,\n                modifier = this._getShortcutModifier(e, navigator.platform);\n\n            for (toolName in tools) {\n                toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                    toolOptions.ctrl == modifier &&\n                    toolOptions.alt == e.altKey &&\n                    toolOptions.shift == e.shiftKey) {\n                    return toolName;\n                }\n            }\n        },\n\n        _getShortcutModifier: function(e, platform) {\n            var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n            return mac ? e.metaKey : e.ctrlKey;\n        },\n\n        toolsFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                o,\n                matchesKey,\n                found = [];\n            var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n            for (toolName in tools) {\n                o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                if (matchesKey &&\n                    o.ctrl == e.ctrlKey &&\n                    o.alt == e.altKey &&\n                    o.shift == e.shiftKey) {\n                    found.push(tools[toolName]);\n                }\n            }\n\n            return found;\n        },\n\n        isTypingKey: function(e) {\n            var keyCode = e.keyCode;\n            return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n                   keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n                   (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n        },\n\n        isModifierKey: function(e) {\n            var keyCode = e.keyCode;\n            return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n                   (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n                   (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n        },\n\n        isSystem: function(e) {\n            return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n        },\n\n        startTyping: function(callback) {\n            this.onEndTyping = callback;\n            this.typingInProgress = true;\n        },\n\n        stopTyping: function() {\n            if (this.typingInProgress && this.onEndTyping) {\n                this.onEndTyping();\n            }\n            this.typingInProgress = false;\n        },\n\n        endTyping: function(force) {\n            var that = this;\n            that.clearTimeout();\n            if (force) {\n                that.stopTyping();\n            } else {\n                that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n            }\n        },\n\n        isTypingInProgress: function() {\n            return this.typingInProgress;\n        },\n\n        clearTimeout: function() {\n            window.clearTimeout(this.timeout);\n        },\n\n        notify: function(e, what) {\n            var i, handlers = this.handlers;\n\n            for (i = 0; i < handlers.length; i++) {\n                if (handlers[i][what](e)) {\n                    break;\n                }\n            }\n        },\n\n        keydown: function(e) {\n            this.notify(e, 'keydown');\n        },\n\n        keyup: function(e) {\n            this.notify(e, 'keyup');\n        }\n    });\n\n    extend(editorNS, {\n        TypingHandler: TypingHandler,\n        SystemHandler: SystemHandler,\n        BackspaceHandler: BackspaceHandler,\n        SelectAllHandler: SelectAllHandler,\n        Keyboard: Keyboard\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var ExportPdfCommand = Command.extend({\n        init: function(options) {\n            this.async = true;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var that = this;\n            var range = that.lockRange(true);\n            var editor = that.editor;\n\n            editor._destroyResizings();\n\n            editor.saveAsPDF().then(function() {\n                that.releaseRange(range);\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            });\n        }\n    });\n\n    extend(editorNS, {\n        ExportPdfCommand: ExportPdfCommand\n    });\n\n    registerTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n\n            if (kendo.support.browser.msie) {\n                editor.document.execCommand(\"print\", false, null);\n            } else if (editor.window.print) {\n                editor.window.print();\n            }\n        }\n    });\n\n    extend(editorNS, {\n        PrintCommand: PrintCommand\n    });\n\n    registerTool(\"print\", new Tool({ command: PrintCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n    var CopyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.inlineStyles = [];\n            this.blockStyles = [];\n            this.collectStyles(range);\n            this.editor.inlineStyles = this.inlineStyles;\n            this.editor.blockStyles = this.blockStyles;\n            this.releaseRange(range);\n        },\n\n        collectStyles: function(range) {\n            var rangeNodes = RangeUtils.nodes(range);\n            var node;\n\n            if (rangeNodes.length === 1) {\n                node = rangeNodes[0].parentNode;\n            } else {\n                node = range.startContainer;\n            }\n\n            while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n                if (dom.isBlock(node)) {\n                    this.populateStyles(node, \"blockStyles\");\n                    if (dom.is(node, \"li\")) {\n                        node = node.parentNode;\n                    } else {\n                        node = null;\n                    }\n                } else {\n                    this.populateStyles(node, \"inlineStyles\");\n                    node = node.parentNode;\n                }\n            }\n        },\n\n        populateStyles: function(node, destination) {\n            var styles = node.style;\n            var attributes = node.attributes;\n            var nodeStyles = {\n                tags: [ node.tagName ],\n                attr: {\n                    style: {}\n                }\n            };\n            var styleValue, styleKey, attributeKey, attributeValue, i;\n\n            for (i = 0; styles && i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n\n            for (i = 0; attributes && i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n\n            this[destination].push(nodeStyles);\n        }\n    });\n\n    var ApplyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            var markers = RangeUtils.getMarkers(range);\n            var editor = this.editor;\n            var inlineStyles = editor.inlineStyles;\n            var blockStyles = editor.blockStyles;\n            var nodes;\n\n            if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                return;\n            }\n\n            if (markers.length === 3) {\n                this.marker.removeCaret(range);\n                this.marker.caret = null;\n            }\n\n            this.removeEmptyElementsFromRange(range);\n            nodes = RangeUtils.nodes(range);\n            this.cleanInlineParents(nodes);\n            dom.normalize(range.commonAncestorContainer);\n\n            if (markers.length === 2) {\n                range.setStartAfter(markers[0]);\n                range.setEndBefore(markers[1]);\n            } else {\n                range.setStartBefore(nodes[0]);\n                range.setEndAfter(nodes[0]);\n            }\n\n            nodes = RangeUtils.nodes(range);\n\n            if (nodes && blockStyles && blockStyles.length) {\n                this.applyBlockStyles(nodes, blockStyles);\n            }\n\n            if (nodes && inlineStyles && inlineStyles.length) {\n                this.applyInlineStyles(nodes, inlineStyles);\n            }\n\n            this.releaseRange(range);\n        },\n\n        removeEmptyElementsFromRange: function(range) {\n            var isEmptyInline = function(node) {\n                return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n            };\n            var emptyElements, i;\n\n            emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n            if (emptyElements && emptyElements.length > 0) {\n                for (i = 0; i < emptyElements.length; i++) {\n                    emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                }\n            }\n        },\n\n        cleanInlineParents: function(nodes) {\n            var i, node, parent, children, j, child, newNode;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                parent = node.parentNode;\n\n                if (this.immutableParent(node)) {\n                    continue;\n                }\n\n                while (parent && dom.isInline(parent)) {\n                    children = parent.childNodes;\n\n                    for (j = 0; j < children.length; j++) {\n                        child = children[j];\n\n                        if (!dom.isMarker(child) && child !== node) {\n                            newNode = parent.cloneNode(true);\n                            newNode.innerHTML = \"\";\n                            dom.wrap(child, newNode);\n                        }\n                    }\n\n                    dom.unwrap(parent);\n                    parent = node.parentNode;\n                }\n            }\n        },\n\n        applyBlockStyles: function(nodes, blockStyles) {\n            var formatTag = blockStyles[0].tags[0];\n            var attr = blockStyles[0].attr;\n            var document = this.editor.document;\n            var i, len, node, wrapper, blockParent, outerWrapper;\n            var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                node = nodes[i];\n\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n\n                blockParent = dom.blockParentOrBody(node);\n\n                if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                    if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                        previousNodes = [];\n                        nextNodes = [];\n                        previous = node.previousSibling;\n                        next = node.nextSibling;\n\n                        while (previous) {\n                            if (!dom.isMarker(previous)) {\n                                previousNodes.push(previous);\n                            }\n\n                            previous = previous.previousSibling;\n                        }\n\n                        if (previousNodes.length) {\n                            prevWrapper = blockParent.cloneNode(true);\n                            prevWrapper.innerHTML = \"\";\n                            dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                            for (j = 0; j < previousNodes.length; j++) {\n                                child = previousNodes[j];\n                                dom.insertAt(prevWrapper, child, 0);\n                            }\n                        }\n\n                        while (next) {\n                            if (!dom.isMarker(next)) {\n                                nextNodes.push(next);\n                            }\n\n                            next = next.nextSibling;\n                        }\n\n                        if (nextNodes.length) {\n                            nextWrapper = blockParent.cloneNode(true);\n                            nextWrapper.innerHTML = \"\";\n                            dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                            for (j = 0; j < nextNodes.length; j++) {\n                                child = nextNodes[j];\n                                nextWrapper.appendChild(child);\n                            }\n                        }\n\n                        dom.unwrap(blockParent);\n                    }\n\n                    wrapper = dom.create(document, formatTag, attr);\n                    dom.wrap(node, wrapper);\n                } else if (blockParent.tagName === formatTag) {\n                    dom.attr(blockParent, attr);\n                }\n            }\n\n            if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n                listItems = [];\n\n                while (dom.is(wrapper, \"li\")) {\n                    listItems.push(wrapper);\n                    wrapper = dom.prev(wrapper);\n                }\n\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                outerWrapper.appendChild(listItems[0]);\n\n                for (i = 1, len = listItems.length; i < len; i++) {\n                    dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                }\n            } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.wrap(wrapper, outerWrapper);\n            }\n        },\n\n        applyInlineStyles: function(nodes, inlineStyles) {\n            var document = this.editor.document;\n            var currentStyle, createdNode, topNode, i, newNode, node;\n\n            for (i = 0; i < inlineStyles.length; i++) {\n                currentStyle = inlineStyles[i];\n                createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n                if (topNode) {\n                    createdNode.appendChild(topNode);\n                }\n\n                topNode = createdNode;\n            }\n\n            if (topNode) {\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    newNode = topNode.cloneNode(true);\n                    dom.insertBefore(newNode, node);\n\n                    while (newNode.children && newNode.children.length) {\n                        newNode = newNode.children[0];\n                    }\n\n                    newNode.appendChild(node);\n                }\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n    var CopyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new CopyFormatCommand(commandArguments);\n        }\n    });\n\n    var ApplyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new ApplyFormatCommand(commandArguments);\n        }\n    });\n\n    $.extend(Editor, {\n        CopyFormatCommand: CopyFormatCommand,\n        ApplyFormatCommand: ApplyFormatCommand,\n        CopyFormatTool: CopyFormatTool,\n        ApplyFormatTool: ApplyFormatTool\n    });\n\n    registerTool(\"copyFormat\", new CopyFormatTool({ }));\n    registerTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        const kendo = window.kendo,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            formats = kendo.ui.Editor.fn.options.formats,\n            dom = Editor.Dom,\n            Tool = Editor.Tool,\n            DelayedExecutionTool = Editor.DelayedExecutionTool,\n            BlockFormatter = Editor.BlockFormatter,\n            FormatCommand = Editor.FormatCommand,\n            GreedyInlineFormatFinder = Editor.GreedyInlineFormatFinder,\n            EditorUtils = Editor.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            registerFormat = EditorUtils.registerFormat,\n            RangeUtils = Editor.RangeUtils;\n\n        const LineHeightCommand = FormatCommand.extend({\n            exec: function() {\n                const cmd = this,\n                    range = cmd.lockRange(true),\n                    nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n                cmd.formatter.format[0].attr.style.lineHeight = cmd.options.value.lineHeight;\n                cmd.formatter.apply(nodes);\n                cmd.releaseRange(range);\n            }\n        });\n\n        const LineHeightFormatTool = DelayedExecutionTool.extend({\n            init: function(options) {\n                Tool.fn.init.call(this, options);\n\n                this.type = \"kendoComboBox\";\n                this.format = [{ tags: [\"p\", \"lineHeight\"] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr, options.defaultValue);\n            },\n\n            command: function(commandArguments) {\n                var that = this;\n\n                return new LineHeightCommand(extend(commandArguments, {\n                    formatter: function() {\n                        return new BlockFormatter(that.options.format);\n                    }\n                }));\n            },\n\n            initialize: function(ui, editor) {\n                var tool = this,\n                    component = ui.getKendoComboBox();\n\n                tool.editor = editor;\n\n                component.bind(\"change\", this.changeHandler.bind(this));\n            },\n\n            changeHandler: function(e) {\n                this._exec(e.sender.value());\n            },\n\n            _exec: function(value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { lineHeight: value });\n                }\n            },\n        });\n\n        $.extend(Editor, {\n            LineHeightCommand: LineHeightCommand,\n            LineHeightFormatTool: LineHeightFormatTool\n        });\n\n        registerFormat(\"lineHeight\", [\n            { tags: dom.blockElements, attr: { style: { lineHeight: \"normal\" } } }\n        ]);\n\n        registerTool(\"lineHeight\", new LineHeightFormatTool({\n            cssAttr: \"line-height\",\n            format: formats.lineHeight,\n            defaultValue: 1.15,\n            ui: {\n                type: \"component\",\n                component: \"ComboBox\",\n                componentOptions: {\n                    value: 1.15,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    prefixOptions: {\n                        icon: \"lineHeight\" // Replace with icon \"paragraphHeight\" once it is added to kendo-icons.\n                    },\n                    autoSize: true,\n                    highlightFirst: false,\n                    dataSource: [\n                        { text: \"1\", value: \"10pt\" },\n                        { text: \"1.15\", value: \"11.5pt\" },\n                        { text: \"1.5\", value: \"15pt\" },\n                        { text: \"2\", value: \"20pt\" },\n                        { text: \"2.5\", value: \"25pt\" },\n                    ]\n                }\n            }\n        }));\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        const kendo = window.kendo,\n            Editor = kendo.ui.editor,\n            Tool = Editor.Tool,\n            Command = Editor.Command,\n            EditorUtils = Editor.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            DOM = Editor.Dom,\n            SPACE_UNICODE = \"\\u00B7\",\n            NEW_LINE_UNICODE = \"\\u21B5\";\n\n        const createMark = function(range, document, character, scrollTop, index) {\n            const clonedRange = range.cloneRange(),\n                  container = clonedRange.startContainer;\n\n            let domRect, x, y, textNode;\n\n            if (index !== undefined) {\n                clonedRange.setStart(container, index);\n                clonedRange.setEnd(container, index + 1);\n            }\n\n            domRect = clonedRange.getBoundingClientRect();\n\n            if (character === SPACE_UNICODE) {\n                x = domRect.x - domRect.width / 4;\n                y = domRect.y + domRect.height + scrollTop;\n            } else if (character === NEW_LINE_UNICODE) {\n                x = domRect.x;\n                y = domRect.y + domRect.height + scrollTop;\n            }\n\n            textNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            textNode.setAttributeNS(null, \"x\", x);\n            textNode.setAttributeNS(null, \"y\", y);\n            textNode.setAttributeNS(null, \"fill\", \"#6098f2\");\n            textNode.setAttributeNS(null, \"font-size\", `${Math.ceil(domRect.height + domRect.width)}px`);\n            textNode.textContent = character;\n\n            return textNode;\n        };\n\n        const appendSvgMarks = function() {\n            const that = this,\n                range = that.getRange().cloneRange(),\n                svgNodes = [],\n                overlay = that._formattingMarksOverlay[0],\n                fragment = that.document.createDocumentFragment(),\n                document = that.document,\n                scrollTop = document.documentElement.scrollTop;\n\n            range.setStart(that.body.firstChild, 0);\n            range.setEnd(that.body.lastChild, 0);\n\n            const nodes = DOM.getTextNodes(that.body).concat($(that.body).find(\"br\").toArray());\n\n            nodes.forEach((node) => {\n                if (node.nodeType === DOM.nodeTypes.TEXT_NODE) {\n                    range.selectNodeContents(node);\n\n                    for (let i = range.startOffset; i < range.endOffset; i++) {\n                        if ((range.startContainer.textContent.charCodeAt(i) === 32 || range.startContainer.textContent.charCodeAt(i) === 160)) {\n                            fragment.appendChild(createMark(range, document, SPACE_UNICODE, scrollTop, i));\n                        }\n                    }\n                } else {\n                    range.selectNode(node);\n                    fragment.appendChild(createMark(range, document, NEW_LINE_UNICODE, scrollTop));\n                }\n            });\n\n            overlay.appendChild(fragment);\n        };\n\n        const clearFormattingMarksOverlay = function(editor) {\n            editor._formattingMarksOverlay.empty();\n        };\n\n        const applyFormattingMarks = function(editor) {\n            appendSvgMarks.call(editor);\n        };\n\n        const FormattingMarksCommand = Command.extend({\n            exec: function() {\n                const cmd = this,\n                    range = cmd.lockRange(true),\n                    editor = cmd.editor;\n\n                if (!editor._toggledFormattingMarks) {\n                    editor._toggledFormattingMarks = true;\n                    editor._appendFormattingMarksOverlay();\n                    editor._appendFormattingMarksStyles();\n                    clearFormattingMarksOverlay(editor);\n                    applyFormattingMarks(editor);\n                } else {\n                    editor._toggledFormattingMarks = false;\n                    editor._destroyFormattingMarksOverlay();\n                }\n\n                cmd.releaseRange(range);\n            }\n        });\n\n        $.extend(Editor, {\n            FormattingMarksCommand: FormattingMarksCommand,\n            applyFormattingMarks: applyFormattingMarks,\n            clearFormattingMarksOverlay: clearFormattingMarksOverlay\n        });\n\n        registerTool(\"formattingMarks\", new Tool({ command: FormattingMarksCommand, icon: \"paragraph-add\" /* Replace with corresponding icon once kendo-icons is updated */, ui: { togglable: true } }));\n    })(window.kendo.jQuery);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n\n        var PERCENTAGE = \"%\";\n        var PIXEL = \"px\";\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = \"string\";\n\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n\n            return 0;\n        }\n\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            }\n            else {\n                return ((parseFloat(value) / total) * 100);\n            }\n        }\n\n        function inPercentages(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n        }\n\n        function inPixels(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n        }\n\n        function toPercentages(value) {\n            return (parseFloat(value) + PERCENTAGE);\n        }\n\n        function toPixels(value) {\n            return (parseFloat(value) + PIXEL);\n        }\n\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n\n        extend(Editor, {\n            ResizingUtils: ResizingUtils\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var MOUSE_ENTER = \"mouseenter\";\n        var MOUSE_LEAVE = \"mouseleave\";\n        var MOUSE_MOVE = \"mousemove\";\n        var MOUSE_UP = \"mouseup\";\n\n        var COMMA = \",\";\n        var DOT = \".\";\n        var LAST_CHILD = \":last-child\";\n\n        var TABLE = \"table\";\n\n        var TableElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n                that._destroyResizeHandle();\n            },\n\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: \"\",\n                rtl: false,\n                handle: {\n                    dataAttribute: \"\",\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: \"\"\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n            },\n\n            resizingInProgress: function() {\n                var that = this;\n                var resizable = that._resizable;\n\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n\n                return false;\n            },\n\n            resize: noop,\n\n            detectElementBorderHovering: function(e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        }\n                        else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n\n            elementBorderHovered: noop,\n\n            showResizeHandle: function(tableElement, e) {\n                var that = this;\n\n                if (e.buttons !== 0) {\n                    //prevent showing when a mouse button is still being pressed\n                    return;\n                }\n\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n\n                that._initResizable(tableElement);\n\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n\n            _initResizeHandle: function() {\n                var that = this;\n                var options = that.options;\n\n                that._destroyResizeHandle();\n\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n\n            setResizeHandlePosition: noop,\n\n            setResizeHandleDimensions: noop,\n\n            setResizeHandleDataAttributes: function(tableElement) {\n                var that = this;\n\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n\n            _attachResizeHandleEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n\n                that.resizeHandle\n                    .on(MOUSE_DOWN + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).show();\n                    })\n                    .on(MOUSE_UP + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).hide();\n                    });\n            },\n\n            _hideResizeMarker: function() {\n                var that = this;\n\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n\n            _destroyResizeHandle: function() {\n                var that = this;\n\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n\n            _initResizable: function(tableElement) {\n                var that = this;\n\n                if (!that.resizeHandle) {\n                    return;\n                }\n\n                that._destroyResizable();\n\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: that.onResizeStart.bind(that),\n                    resize: that.onResize.bind(that),\n                    resizeend: that.onResizeEnd.bind(that)\n                });\n            },\n\n            _destroyResizable: function() {\n                var that = this;\n\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n\n            onResizeStart: function() {\n                this._disableKeyboard();\n            },\n\n            onResize: function(e) {\n                this.setResizeHandleDragPosition(e);\n            },\n\n            setResizeHandleDragPosition: noop,\n\n            onResizeEnd: function(e) {\n                var that = this;\n\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n\n            _disableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                    e.preventDefault();\n                });\n            },\n\n            _forceResizing: function(e) {\n                var resizable = this._resizable;\n\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n\n        var ResizingFactory = Class.extend({\n            create: function(editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n\n                $(editor.body)\n                    .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                        var table = e.currentTarget;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing) {\n                            if (resizing.element !== table && !resizing.resizingInProgress()) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, table, options);\n                            }\n                        }\n                        else {\n                            that._initResizing(editor, table, options);\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                        var parentTable;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                            parentTable = $(resizing.element).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, function() {\n                        var resizing = editor[resizingName];\n\n                        if (resizing && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                        }\n                    })\n                    .on(MOUSE_UP + NS, function(e) {\n                        var resizing = editor[resizingName];\n                        var parentTable;\n\n                        if (resizing && resizing.resizingInProgress()) {\n                            parentTable = $(e.target).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                resizing._forceResizing(e);\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    });\n            },\n\n            dispose: function(editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n\n            _initResizing: function(editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n\n            _destroyResizing: function(editor, options) {\n                var resizingName = options.name;\n\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n\n        TableElementResizing.create = function(editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n\n        TableElementResizing.dispose = function(editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n\n        extend(Editor, {\n            TableElementResizing: TableElementResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n\n        var NS = \".kendoEditorColumnResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n        var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n        var BODY = \"body\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TD = \"td\";\n        var TH = \"th\";\n        var TR = \"tr\";\n\n        var COLATTR = \"col-index\";\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [TD, TH],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"column\",\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n                if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var innerElementOffsetTop = tableInnerElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(tableInnerElement.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                                (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                                parseFloat(resizeHandle.css(\"marginLeft\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n\n                resizeHandle.css({ left: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? (-1) : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n\n                dom.reMapTableColumns(that.element, COLATTR);\n\n                colIndex = parseInt(column.attr(COLATTR), 10);\n\n                if (column.prop(\"colSpan\") > 1) {\n                    column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n\n                nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n\n            _setTableComputedWidth: function() {\n                var element = this.element;\n\n                if (element.style[WIDTH] === \"\") {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n\n            _setColumnsComputedWidth: function() {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function() {\n                    return outerWidth($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    }\n                    else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n\n            _resizeTopAndBottomColumns: function(column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        var cell = this;\n                        return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                    });\n                var length = topAndBottomColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n\n            _resizeColumn: function(column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                }\n                else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n\n            _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                    });\n                var length = adjacentColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n\n            _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n\n        ColumnResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"columnResizing\",\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n\n        ColumnResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            ColumnResizing: ColumnResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var math = window.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorRowResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n        var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n        var BODY = \"body\";\n        var TR = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n\n        var COMMA = \",\";\n        var HEIGHT = \"height\";\n\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"row\",\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                    '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n                if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n                var rowOffsetLeft = row.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(row.css(\"marginLeft\"));\n                var rowOffsetTop = row.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(row.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n                var rowOffsetTop = $row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat($row.css(\"marginTop\"));\n\n                var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                    (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(resizeHandle.css(\"marginTop\"));\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n\n                resizeHandle.css({ top: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n                if (inPercentages(initialStyleHeight)) {\n                    //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                    that._setRowsHeightInPercentages();\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setTableHeight: function(newHeight) {\n                var element = this.element;\n\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                }\n                else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n\n        RowResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"rowResizing\",\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n\n        RowResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            RowResizing: RowResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorElementResizeHandle\";\n        var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var HALF_INSIDE = \"halfInside\";\n        var MOUSE_OVER = \"mouseover\";\n        var MOUSE_OUT = \"mouseout\";\n\n        var BODY = \"body\";\n        var TABLE = \"table\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        var ElementResizeHandle = Observable.extend({\n            init: function(options) {\n                var that = this;\n\n                Observable.fn.init.call(that);\n\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS).remove();\n                that.element = null;\n\n                that._destroyDraggable();\n\n                that.unbind();\n            },\n\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template:\n                    \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                        \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                    \"</div>\"\n            },\n\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n\n            show: function() {\n                this._setPosition();\n            },\n\n            _setPosition: function() {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: \"absolute\"\n                });\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                $(that.element)\n                    .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                    .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n            },\n\n            _onMouseOver: function() {\n                this.trigger(MOUSE_OVER);\n            },\n\n            _onMouseOut: function() {\n                this.trigger(MOUSE_OUT);\n            },\n\n            _addStyles: function() {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n            },\n\n            _initPositioningStrategy: function() {\n                var that = this;\n                var options = that.options;\n\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n\n            _initDraggable: function() {\n                var that = this;\n                var element = that.element;\n\n                if (that._draggable || !element) {\n                    return;\n                }\n\n                that._draggable = new Draggable(element, {\n                    dragstart: that._onDragStart.bind(that),\n                    drag: that._onDrag.bind(that),\n                    dragend: that._onDragEnd.bind(that)\n                });\n            },\n\n            _onDragStart: function() {\n                this.trigger(DRAG_START);\n            },\n\n            _onDrag: function(e) {\n                var that = this;\n\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n\n            _onDragEnd: function() {\n                this.trigger(DRAG_END);\n            },\n\n            _destroyDraggable: function() {\n                var that = this;\n\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n\n            _initDraggingStrategy: function() {\n                var that = this;\n\n                that._draggingStrategy = HandleDraggingStrategy.create({\n                    name: that.options.direction\n                });\n            }\n        });\n\n        var StrategyFactory = Class.extend({\n            init: function() {\n                this._items = [];\n            },\n\n            register: function(name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n\n            create: function(options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : \"\";\n                var match;\n                var item;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n        var HandlePositioningStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n\n            getPosition: function() {\n                var that = this;\n\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n                return scrollOffsetPosition;\n            },\n\n            calculatePosition: noop,\n\n            applyHandleOffset: function(position) {\n                var options = this.options;\n                var handle = $(options.handle);\n\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - (outerHeight(handle) / 2),\n                        left: position.left - (outerWidth(handle) / 2)\n                    };\n                }\n\n                return position;\n            },\n\n            applyScrollOffset: function(position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                    if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                        rootLeft = rootLeft * -1;\n                    }\n\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n\n                return position;\n            }\n        });\n\n        HandlePositioningStrategy.create = function(options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n        var HandleDraggingStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n\n            adjustDragDelta: function(deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n\n        HandleDraggingStrategy.create = function(options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n        extend(Editor, {\n            ElementResizeHandle: ElementResizeHandle\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n\n        var NS = \".kendoEditorElementResizing\";\n        var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n        var TABLE_CLASS = \"k-table\";\n        var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var SELECT = \"select\";\n        var DROP = \"drop\";\n\n        var COLUMN = \"td\";\n        var ROW = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TABLE = \"table\";\n        var IMG = \"img\";\n        var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n        var HEIGHT = \"height\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        var ElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n\n                // Check whether the element is TABLE or IMG\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS);\n                that.element = null;\n\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n\n                that._destroyResizeHandles();\n            },\n\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [{\n                    direction: NORTHWEST\n                }, {\n                    direction: NORTH\n                }, {\n                    direction: NORTHEAST\n                }, {\n                    direction: EAST\n                }, {\n                    direction: SOUTHEAST\n                }, {\n                    direction: SOUTH\n                }, {\n                    direction: SOUTHWEST\n                }, {\n                    direction: WEST\n                }]\n            },\n\n            resize: function(args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                that.showResizeHandles();\n            },\n\n            _resizeWidth: function() {\n                return false;\n            },\n\n            _resizeHeight: function() {\n                return false;\n            },\n\n            _getMaxDimensionValue: function(dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? (-1) : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    }\n                    else {\n                        return (parentDimension + parentScrollOffset);\n                    }\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            },\n\n            showResizeHandles: function() {\n                var that = this;\n\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n\n            _initResizeHandles: function() {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n\n                if (handles && handles.length > 0) {\n                    return;\n                }\n\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n\n                that._bindToResizeHandlesEvents();\n            },\n\n            _destroyResizeHandles: function() {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n\n                that.handles = [];\n            },\n\n            _showResizeHandles: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n\n            _bindToResizeHandlesEvents: function() {\n                return false;\n            },\n\n            _onResizeHandleDragStart: function() {\n                var that = this;\n                var element = $(that.element);\n\n                element.addClass(ELEMENT_RESIZING_CLASS);\n\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n\n            _onResizeHandleDrag: function(e) {\n                this.resize(e);\n            },\n\n            _onResizeHandleDragEnd: function() {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n\n            _disableKeyboard: function() {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                    e.preventDefault();\n                });\n            }\n        });\n\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                    handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _hasRowsInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n\n                if (inPercentages(styleWidth)) {\n                    //detect resizing greater than 100%\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    }\n                    else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n\n                that._setColumnsWidth();\n\n                element[0].style[WIDTH] = newWidth;\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n\n                if (hasRowsInPixels && delta < 0) {\n                    //decreasing table height when rows are sized in pixels is not possible\n                    that._setRowsHeightInPercentages();\n                }\n\n                if (inPercentages(styleHeight)) {\n                    //detect resizing greater than 100%\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    }\n                    else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n\n                element[0].style[HEIGHT] = newHeight;\n\n                if (hasRowsInPixels && delta < 0) {\n                    //restore original rows height unit\n                    that._setRowsHeightInPixels();\n                }\n            },\n\n            _setColumnsWidth: function() {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n\n                    if (styleWidth !== \"\") {\n                        return inPercentages(styleWidth) ? true : false;\n                    }\n                    else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                    if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                        handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                    } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                        handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                    } else {\n                        handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                    }\n\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _getDeltas: function(args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n\n            _onResizeHandleDragVertical: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragHorizontal: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragLocked: function(args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                    initialWidth = this._initialElementWidth,\n                    initialHeight = this._initialElementHeight,\n                    deltas;\n\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n\n                deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                this.showResizeHandles();\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n\n        var ElementResizingFactory = Class.extend({\n            create: function(editor) {\n                var factory = this;\n\n                $(editor.body)\n                    .on(\"dragstart\" + NS, function() {\n                        var nodes = RangeUtils.nodes(editor.getRange()),\n                            hasImg = false;\n\n                        nodes.forEach(function(node) {\n                            if (node.nodeName === \"IMG\") {\n                                hasImg = true;\n                            }\n                        });\n\n                        if (hasImg && nodes.length > 1) {\n                            editor.elementResizing._destroyResizeHandles();\n                        }\n                    })\n                    .on(DROP + NS, function() {\n                        setTimeout(function() {\n                            var image = RangeUtils.image(editor.getRange());\n\n                            if (image) {\n                                editor.elementResizing._destroyResizeHandles();\n                                editor.elementResizing.element = image;\n                                editor.elementResizing.showResizeHandles();\n                            }\n                        });\n                    })\n                    .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                        var eventTarget = e.target;\n                        var eventCurrentTarget = e.currentTarget;\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n\n                        if (elementResizing) {\n                            if (element && eventCurrentTarget !== element) {\n                                if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                    //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                    //instead of stopping event propagation\n                                    return;\n                                }\n                                else {\n                                    if (element !== eventTarget) {\n                                        editor._destroyElementResizing();\n                                        factory._initResizing(editor, eventCurrentTarget);\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            factory._initResizing(editor, eventCurrentTarget);\n                        }\n\n                        editor._showElementResizeHandles();\n                    })\n                    .on(MOUSE_DOWN + NS, function(e) {\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n                        var target = e.target;\n                        var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                        if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                            editor._destroyElementResizing();\n                        }\n                    });\n            },\n\n            dispose: function(editor) {\n                $(editor.body).off(NS);\n            },\n\n            _initResizing: function(editor, element) {\n                // table and image resizing is natively supported in IE\n                // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n                // Enable custom resize handlers for FF too\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    }\n\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n\n        ElementResizingFactory.current = new ElementResizingFactory();\n\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n\n    })(window.kendo);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command;\n\n    var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\n    var cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\n    var reUnit = /([a-z]+|%)$/i;\n\n    var COL = \"col\";\n    var ROW = \"row\";\n    var COLGROUP = \"colgroup\";\n    var SCOPE = \"scope\";\n    var COL_INDEX = \"col-index\";\n    var TH = \"th\";\n    var TD = \"td\";\n    var THEAD = \"thead\";\n    var HEADERS = \"headers\";\n    var TABLE = \"table\";\n\n    var TableWizardCommand = Command.extend({\n        exec: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var range = cmd.range = cmd.lockRange();\n            var isTableCellWizard = cmd.options.tableCellWizard;\n            var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n            var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n            var options = {\n                visible: false,\n                messages: editor.options.messages,\n                closeCallback: cmd.onDialogClose.bind(cmd),\n                table: cmd.parseTable(selectedTable, selectedCells),\n                dialogOptions: editor.options.dialogOptions,\n                isRtl: kendo.support.isRtl(editor.wrapper)\n            };\n\n            var dialog = new Editor.TableWizardDialog(options);\n            dialog.open(isTableCellWizard);\n        },\n\n        onDialogClose: function(data) {\n            var cmd = this;\n            cmd.releaseRange(cmd.range);\n\n            if (data) { //Ok button pressed\n                if (cmd.options.insertNewTable) {\n                    cmd.insertTable(cmd.createNewTable(data));\n                } else {\n                    cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                }\n            }\n        },\n        releaseRange: function(range) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            dom.windowFromDocument(doc).focus();\n            Command.fn.releaseRange.call(cmd, range);\n        },\n        insertTable: function(table) {\n            var range = this.range;\n\n            range.insertNode(table);\n            range.collapse(true);\n            this.editor.selectRange(range);\n\n            this._ensureFocusableAfterTable(table);\n        },\n        _ensureFocusableAfterTable: function(table) {\n            var siblingNodes = $(table).parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === table) {\n                dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n            }\n        },\n        updateTable: function(data, table, selectedCells) {\n            var cmd = this;\n            var tableRows = $(table.rows).toArray();\n            var tableProp = data.tableProperties;\n            var rows = tableProp.rows;\n            var tHead = table.tHead;\n            var last = cmd._lastInCollection;\n            var lastSelectedRow, cellProp;\n\n            //Leave only first selected cell\n            while (selectedCells.length > 1) {\n                selectedCells.pop();\n            }\n\n            lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n            cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n            if (tableRows.length < rows) {\n                cmd._addRows(lastSelectedRow, rows, tableRows);\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n            cmd._updateTableProperties(table, tableProp);\n\n            cellProp = data.cellProperties;\n            if (selectedCells[0]) {\n                dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n            }\n            if (cellProp) {\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                    cmd._updateCellProperties(cell, cellProp, tableProp);\n                });\n            }\n\n            cmd._updateCaption(table, tableProp);\n\n            if (tHead) {\n                cmd._updateHeadersWithThead(table, data);\n            } else {\n                cmd._updateHeadersNoThead(table, data);\n            }\n\n            cmd._updateHeaderAssociates(table, tableProp);\n            dom.clearTableMappings(table, COL_INDEX);\n        },\n        _isHeadingRow: function(row) {\n            return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n        },\n        _isHeadingCell: function(cell) {\n            return dom.is(cell, TH);\n        },\n        cellsWithHeadersAssociated: function(table) {\n            var cells = $(table.rows).children();\n            var headingIds = [];\n            var checkHeader = function(header) {\n                return headingIds.indexOf(header) > -1;\n            };\n\n            cells.each(function(c, cell) {\n                if (cell.id && dom.is(cell, TH)) {\n                    headingIds.push(cell.id);\n                }\n            });\n\n            var associatedCells = cells.filter(function(c, cell) {\n                var headersAttr = cell.getAttribute(HEADERS);\n                var headersArray;\n\n                if (headersAttr && !dom.is(cell, TH)) {\n                    headersArray = headersAttr.split(\" \");\n\n                    if (headersArray && headersArray.length > 0) {\n                        return headersArray.some(checkHeader);\n                    }\n                }\n\n                return false;\n            });\n\n            return !!associatedCells.length;\n        },\n        _insertCells: function(count, row, index) {\n            index = isNaN(index) ? -1 : index;\n            for (var i = 0, cell; i < count; i++) {\n                cell = row.insertCell(index);\n                cell.innerHTML = \"&nbsp;\";\n            }\n        },\n        _deleteTableRows: function(rows, count) {\n            for (var i = 0, row, rowParent; i < count; i++) {\n                row = rows.pop();\n                rowParent = row.parentNode;\n                rowParent.removeChild(row);\n                if (!rowParent.rows.length) {\n                    dom.remove(rowParent);\n                }\n            }\n        },\n        createNewTable: function(data) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            var tableProp = data.tableProperties;\n            var table = dom.create(doc, TABLE);\n            var rowIndex = 0;\n            var thead;\n\n            cmd._updateTableProperties(table, tableProp);\n            cmd._updateCaption(table, tableProp);\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                thead = table.createTHead();\n                cmd._createTableRows(data, thead, rowIndex, true);\n                rowIndex += tableProp.headerRows;\n            }\n\n            var tbody = table.createTBody();\n            cmd._createTableRows(data, tbody, rowIndex, false);\n\n            dom.reMapTableColumns(table, COL_INDEX);\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            }\n\n            dom.clearTableMappings(table, COL_INDEX);\n\n            return table;\n        },\n        _createTableRows: function(data, container, initialIndex, headerRows) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var cellProp = data.cellProperties;\n            var columns = tableProp.columns;\n            var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n            var headerColumns = tableProp.headerColumns;\n\n            for (var r = initialIndex, row; r < rows; r++) {\n                row = container.insertRow();\n\n                for (var c = 0, cell; c < columns; c++) {\n                    if (headerRows || headerColumns > c) {\n                        cell = document.createElement(TH);\n                    } else {\n                        cell = document.createElement(TD);\n                    }\n\n                    row.appendChild(cell);\n                    cell.innerHTML = \"&nbsp;\";\n                    if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                        cell.id = cellProp.id;\n                    }\n\n                    cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {}, tableProp);\n                }\n            }\n        },\n        _addRows: function(lastSelectedRow, rows, tableRows) {\n            var cmd = this;\n            var rowIndex = $(lastSelectedRow).index();\n            var cellsLength = lastSelectedRow.cells.length;\n            var newRowsCount = rows - tableRows.length;\n            var parent = lastSelectedRow.parentNode;\n            var row;\n\n            while (newRowsCount) {\n                row = parent.insertRow(rowIndex + 1);\n                cmd._insertCells(cellsLength - row.cells.length, row);\n                newRowsCount--;\n            }\n        },\n        _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n            var cmd = this;\n            var last = cmd._lastInCollection;\n            var firstRowLastCell = last(tableRows[0].cells);\n            var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n            if (numberOfColumns > columns) {\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                    while (rowColumns > columns) {\n                        if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                            lastCurrentCell.colSpan -= 1;\n                        } else {\n                            row.deleteCell(-1);\n                        }\n\n                        lastCurrentCell = last(row.cells);\n                        rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                    }\n                });\n            }\n\n            if (numberOfColumns < columns) {\n                var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                });\n            }\n        },\n        _updateTableProperties: function(table, data) {\n            var style = this._getStylesData(data);\n            dom.attr(table, {\n                cellSpacing: data.cellSpacing || null,\n                topCellPadding: data.topCellPadding || null,\n                leftCellPadding: data.leftCellPadding || null,\n                bottomCellPadding: data.bottomCellPadding || null,\n                rightCellPadding: data.rightCellPadding || null,\n                className: data.className || null,\n                id: data.id || null,\n                summary: data.summary || null,\n                style: style || null\n            });\n            $(table).addClass(\"k-table\");\n        },\n        _updateCellProperties: function(cell, data, tableData) {\n            var style = this._getStylesData(data);\n            style.paddingTop = data.topCellPadding || tableData?.topCellPadding || null;\n            style.paddingLeft = data.leftCellPadding || tableData?.leftCellPadding || null;\n            style.paddingBottom = data.bottomCellPadding || tableData?.bottomCellPadding || null;\n            style.paddingRight = data.rightCellPadding || tableData?.rightCellPadding || null;\n            style.margin = data.cellMargin || null;\n            dom.attr(cell, {\n                style: style || null,\n                className: data.className || null\n            });\n        },\n        _updateCaption: function(table, data) {\n            if (table.caption && !data.captionContent) {\n                table.deleteCaption();\n            } else if (data.captionContent) {\n                var caption = table.createCaption();\n                caption.innerHTML = data.captionContent;\n                var alignment = this._getAlignmentData(data.captionAlignment);\n                dom.attr(caption, {\n                    style: {\n                        textAlign: alignment.textAlign,\n                        verticalAlign: alignment.verticalAlign\n                    }\n                });\n            }\n        },\n        _updateHeadersNoThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var rows = table.rows;\n            var row, cells, cell, i, j;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n                cells = row.cells;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                        dom.changeTag(cell, TH, false);\n                    } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    }\n                }\n            }\n        },\n        _updateHeadersWithThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var thead = table.tHead;\n            var rowIndex = 0;\n            var tbody = table.tBodies[0];\n            var row, cell, i;\n\n            if (!tbody) {\n                tbody = table.createTBody();\n            }\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                if (!thead) {\n                    thead = table.createTHead();\n                }\n\n                while (thead.rows.length < tableProp.headerRows) {\n                    thead.appendChild(tbody.rows[0]);\n                }\n\n                while (thead.rows.length > tableProp.headerRows) {\n                    tbody.appendChild(thead.rows[0]);\n                }\n\n                cmd._swapToHeaderCells(thead);\n            } else if (thead) {\n                while (thead.rows.length > 0) {\n                    tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                }\n\n                table.deleteTHead();\n            }\n\n            while (tbody.rows.length > rowIndex) {\n                row = tbody.rows[rowIndex];\n                for (i = 0; i < row.cells.length; i++) {\n                    cell = row.cells[i];\n                    if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TH, false);\n                    }\n                }\n                rowIndex += 1;\n            }\n        },\n        _updateHeaderAssociates: function(table, tableProp) {\n            var cmd = this;\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                if (!cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeScopes(table);\n                }\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                }\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            } else {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                } else {\n                    cmd._removeScopes(table);\n                }\n            }\n        },\n        _addScopes: function(table, headerRows, headerCols) {\n            var rows = table.rows;\n            var i, j, row, cell;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (i < headerRows) {\n                        cell.setAttribute(SCOPE, COL);\n                    } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                        cell.setAttribute(SCOPE, ROW);\n                    }\n                }\n            }\n        },\n        _removeScopes: function(table) {\n            $(table).find(TH).removeAttr(SCOPE);\n            $(table).find(COL).remove();\n            $(table).find(COLGROUP).remove();\n        },\n        _removeAssociates: function(table) {\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n        },\n        _swapToHeaderCells: function(thead) {\n            var tds = $(thead).find(\"td\");\n            var swapCell = function(index, cell) {\n                dom.changeTag(cell, TH, false);\n            };\n            tds.each(swapCell);\n        },\n        _getStylesData: function(data) {\n            var that = this;\n            var alignment = this._getAlignmentData(data.alignment);\n            var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n            return $.extend({\n                width: data.width ? data.width + data.widthUnit : null,\n                height: data.height ? data.height + data.heightUnit : null,\n                textAlign: alignment.textAlign,\n                verticalAlign: alignment.verticalAlign,\n                backgroundColor: data.bgColor || \"\",\n                borderWidth: data.borderWidth,\n                borderStyle: data.borderStyle,\n                borderColor: data.borderColor || \"\",\n                borderCollapse: data.collapseBorders ? \"collapse\" : null,\n                whiteSpace: whiteSpace\n            }, that._getTablePositionData(data.position));\n        },\n        _getAlignmentData: function(alignment) {\n            var textAlign = \"\";\n            var verticalAlign = textAlign;\n\n            if (alignment) {\n                if (alignment.indexOf(\" \") != -1) {\n                    var align = alignment.split(\" \");\n                    textAlign = align[0];\n                    verticalAlign = align[1];\n                } else {\n                    textAlign = alignment;\n                }\n            }\n            return { textAlign: textAlign, verticalAlign: verticalAlign };\n        },\n        _getTablePositionData: function(position) {\n            if (!position) {\n                return {};\n            }\n\n            return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n        },\n        parseTable: function(table, selectedCells) {\n            if (!table) {\n                return { tableProperties: {}, selectedCells: [] };\n            }\n\n            var cmd = this;\n            var tStyle = table.style;\n            var rows = table.rows;\n            var caption = table.caption;\n            var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n            captionClone.find(\".k-marker\").remove();\n\n            var cssClass = table.className;\n            cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n            cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n            cssClass = cssClass.replace(/^k-table$/, \"\");\n\n            var tableAlignment = cmd._getAlignment(table, true);\n            var tablePosition = cmd._getTablePosition(table);\n            var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n            var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n            var cellsWithHeaders;\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cellsWithHeaders = \"ids\";\n            } else if ($(table).find(\"th[scope]\").length > 0) {\n                cellsWithHeaders = \"scope\";\n            } else {\n                cellsWithHeaders = \"none\";\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            var numberOfColumns = dom._getNumberOfColumns(table);\n            var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n            dom.clearTableMappings(table, COL_INDEX);\n\n            var tableJson = {\n                tableProperties: {\n                    width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                    height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                    columns: numberOfColumns,\n                    rows: rows.length,\n                    widthUnit: cmd._getUnit(tStyle.width),\n                    heightUnit: cmd._getUnit(tStyle.height),\n                    cellSpacing: table.cellSpacing,\n                    topCellPadding: table.topCellPadding,\n                    leftCellPadding: table.leftCellPadding,\n                    bottomCellPadding: table.bottomCellPadding,\n                    rightCellPadding: table.rightCellPadding,\n                    alignment: tableAlignment.textAlign,\n                    position: tablePosition,\n                    bgColor: tStyle.backgroundColor || table.bgColor,\n                    className: cssClass,\n                    id: table.id,\n                    borderWidth: tStyle.borderWidth || table.border,\n                    borderColor: tStyle.borderColor,\n                    borderStyle: tStyle.borderStyle || \"\",\n                    collapseBorders: !!tStyle.borderCollapse,\n                    summary: table.summary,\n                    captionContent: caption ? captionClone.html() : \"\",\n                    captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                    headerRows: numberOfHeaderRows,\n                    headerColumns: numberOfHeaderColumns,\n                    cellsWithHeaders: cellsWithHeaders\n                },\n                selectedCells: []\n            };\n\n            tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n            return tableJson;\n        },\n        parseTableRows: function(rows, selectedCells, tableJson) {\n            var cmd = this;\n            var data = [], row, rowData, cells, cell, cellData;\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                rowData = { cells: [] };\n                cells = row.cells;\n                data.push(rowData);\n                for (var j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    cellData = cmd.parseCell(cell);\n                    if ($.inArray(cell, selectedCells) != -1) {\n                        tableJson.selectedCells.push(cellData);\n                    }\n                    rowData.cells.push(cellData);\n                }\n            }\n            return data;\n        },\n        parseCell: function(cell) {\n            var cmd = this;\n            var cStyle = cell.style;\n            var alignment = cmd._getAlignment(cell);\n            alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n            var data = {\n                width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                widthUnit: cmd._getUnit(cStyle.width),\n                heightUnit: cmd._getUnit(cStyle.height),\n                cellMargin: cStyle.margin,\n                topCellPadding: cStyle.paddingTop,\n                leftCellPadding: cStyle.paddingLeft,\n                bottomCellPadding: cStyle.paddingBottom,\n                rightCellPadding: cStyle.paddingRight,\n                alignment: alignment,\n                bgColor: cStyle.backgroundColor || cell.bgColor,\n                className: cell.className,\n                id: cell.id,\n                borderWidth: cStyle.borderWidth || cell.border,\n                borderColor: cStyle.borderColor,\n                borderStyle: cStyle.borderStyle,\n                wrapText: cStyle.whiteSpace != \"nowrap\"\n            };\n\n            return data;\n        },\n        _getTablePosition: function(element) {\n            var style = element.style;\n            if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n                return \"center\";\n            }\n\n            if (style.marginLeft == \"auto\") {\n                return \"right\";\n            }\n\n            return \"left\";\n        },\n        _getAlignment: function(element, horizontalOnly) {\n            var style = element.style;\n            var hAlign = style.textAlign || element.align || \"\";\n            if (horizontalOnly) {\n                return { textAlign: hAlign };\n            }\n            var vAlign = style.verticalAlign || element.vAlign || \"\";\n            if (hAlign && vAlign) {\n                return { textAlign: hAlign, verticalAlign: vAlign };\n            }\n            if (!hAlign && vAlign) {\n                return { textAlign: \"left\", verticalAlign: vAlign };\n            }\n            if (hAlign && !vAlign) {\n                return { textAlign: hAlign, verticalAlign: \"top\" };\n            }\n            return { textAlign: \"\", verticalAlign: \"\" };\n        },\n        _getUnit: function(value) {\n            var unit = (value || \"\").match(reUnit);\n            return unit ? unit[0] : \"px\";\n        },\n        _selectedTable: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return tableFormatFinder.findSuitable(nodes)[0];\n        },\n        _selectedCells: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return cellsFormatFinder.findSuitable(nodes);\n        },\n        _lastInCollection: function(collection) {\n            return collection[collection.length - 1];\n        }\n    });\n\n    var TableWizardTool = Editor.Tool.extend({\n        command: function(options) {\n            options.insertNewTable = this.options.insertNewTable;\n            options.tableCellWizard = !!this.options.tableCellWizard;\n            return new TableWizardCommand(options);\n        }\n    });\n\n    var TableWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableCellWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    kendo.ui.editor.TableWizardTool = TableWizardTool;\n    kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\n    registerTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\n    registerTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    const FORM_FIELD_CLASS = \"k-form-field\",\n          INVISIBLE_CLASS = \"k-visibility-invisible\",\n          DOT = \".\";\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        numericTextBoxSettings = { format: \"0\", min: 0 },\n        units = [\"px\", \"em\"],\n        borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\n    var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\n    var textWrapDropDownSettings = {\n        dataSource: [{\n            className: \"text-wrap\",\n            value: \"wrap\"\n        }, {\n            className: \"parameter-string\",\n            value: \"nowrap\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip)\n    };\n\n    var tablePositionDropDownSettings = {\n        dataSource: [{\n            className: \"table-position-start\",\n            value: \"left\"\n        }, {\n            className: \"table-position-center\",\n            value: \"center\"\n        }, {\n            className: \"table-position-end\",\n            value: \"right\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var tableAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-middle-left\",\n            value: \"left\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var cellAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-middle-left\",\n            value: \"left middle\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center middle\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right middle\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n    };\n\n    var accessibilityAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n        valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n    };\n\n    var tablePropertiesDialogTemplate = ({ messages }) =>\n        '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                    `<li>${ messages.accessibilityTab }</li>` +\n                '</ul>' +\n                '<div id=\"k-table-properties\"></div>' +\n                '<div id=\"k-accessibility-properties\"></div>' +\n            '</div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n        var cellPropertiesDialogTemplate = ({ messages }) =>\n        '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-cell-properties\"></div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n\n    var TableWizardDialog = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n        _openTablePropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectTableDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 700;\n            dialogOptions.width = 700;\n            dialogOptions.title = messages.tableProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            this.components = {};\n            that._initTabStripComponent(element);\n            that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n            that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        _openCellPropertiesDialog: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectCellDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 400;\n            dialogOptions.title = messages.tableCellProperties;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n        open: function(isCellProperties) {\n            if (!isCellProperties) {\n                this._openTablePropertiesDialog();\n            } else {\n                this._openCellPropertiesDialog();\n            }\n        },\n\n        _initTabStripComponent: function(element) {\n            var components = this.components = {};\n            components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n                animation: false\n            }).data(\"kendoTabStrip\");\n        },\n\n        collectTableDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectTableViewValues(data);\n            that._collectAccessibilityViewValues(data);\n        },\n\n        collectCellDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectCellViewValues(data);\n        },\n\n        _collectTableViewValues: function(tableData) {\n            var tableView = this.components.tableView;\n            var tableProperties = tableData.tableProperties;\n            var cellData = tableData.cellProperties = tableData.cellProperties || {};\n            tableProperties.width = tableView.width.value();\n            tableProperties.widthUnit = tableView.widthUnit.value();\n            tableProperties.height = tableView.height.value();\n            tableProperties.columns = tableView.columns.value();\n            tableProperties.rows = tableView.rows.value();\n            tableProperties.heightUnit = tableView.heightUnit.value();\n            tableProperties.cellSpacing = tableView.cellSpacing.value();\n            tableProperties.topCellPadding = tableView.topCellPadding.value();\n            tableProperties.leftCellPadding = tableView.leftCellPadding.value();\n            tableProperties.bottomCellPadding = tableView.bottomCellPadding.value();\n            tableProperties.rightCellPadding = tableView.rightCellPadding.value();\n            tableProperties.alignment = tableView.alignment.value();\n            tableProperties.position = tableView.position.value();\n            tableProperties.bgColor = tableView.bgColor.value();\n            tableProperties.borderWidth = tableView.borderWidth.value();\n            tableProperties.borderColor = tableView.borderColor.value();\n            tableProperties.borderStyle = tableView.borderStyle.value();\n            tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / tableData.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n        _collectCellViewValues: function(table) {\n            var cellData = table.cellProperties = table.cellProperties || {};\n            var cellView = this.components.cellView;\n\n            cellData.selectAllCells = cellView.selectAllCells.check();\n            cellData.width = cellView.width.value();\n            cellData.widthUnit = cellView.widthUnit.value();\n            cellData.height = cellView.height.value();\n            cellData.heightUnit = cellView.heightUnit.value();\n            cellData.independentCellPaddings = cellView.independentCellPaddings.check();\n            cellData.topCellPadding = cellView.topCellPadding.value();\n            cellData.leftCellPadding = cellView.leftCellPadding.value();\n            cellData.bottomCellPadding = cellView.bottomCellPadding.value();\n            cellData.rightCellPadding = cellView.rightCellPadding.value();\n            cellData.cellMargin = cellView.cellMargin.value();\n            cellData.alignment = cellView.alignment.value();\n            cellData.bgColor = cellView.bgColor.value();\n            cellData.className = cellView.className.value();\n            cellData.id = cellView.id.value();\n            cellData.borderWidth = cellView.borderWidth.value();\n            cellData.borderColor = cellView.borderColor.value();\n            cellData.borderStyle = cellView.borderStyle.value();\n            cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / table.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n       _collectAccessibilityViewValues: function(table) {\n            var tableProperties = table.tableProperties;\n            var accessibilityView = this.components.accessibilityView;\n            tableProperties.captionContent = accessibilityView.captionContent.value();\n            tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n            tableProperties.summary = accessibilityView.summary.value();\n            tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n            tableProperties.className = accessibilityView.className.value();\n            tableProperties.id = accessibilityView.id.value();\n            tableProperties.headerRows = accessibilityView.headerRows.value();\n            tableProperties.headerColumns = accessibilityView.headerColumns.value();\n        },\n        _addUnit: function(units, value) {\n            if (value && $.inArray(value, units) == -1) {\n                units.push(value);\n            }\n        },\n\n        _initNumericTextbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoNumericTextBox(\n                    settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n                ).data(\"kendoNumericTextBox\");\n            if (property in data) {\n                component.value(parseInt(data[property], 10));\n            }\n        },\n\n        _initDropDownList: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource,\n                optionLabel: this.options.messages.borderNone\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initTablePositionDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tablePositionDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.tableAlignLeft;\n            dataSource[1].tooltip = messages.tableAlignCenter;\n            dataSource[2].tooltip = messages.tableAlignRight;\n\n            this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n        },\n\n        _initTableAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tableAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeft;\n            dataSource[1].tooltip = messages.alignCenter;\n            dataSource[2].tooltip = messages.alignRight;\n            dataSource[3].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n        },\n\n        _initCellAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var cellView = this.components.cellView;\n            var dataSource = cellAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftMiddle;\n            dataSource[4].tooltip = messages.alignCenterMiddle;\n            dataSource[5].tooltip = messages.alignRightMiddle;\n            dataSource[6].tooltip = messages.alignLeftBottom;\n            dataSource[7].tooltip = messages.alignCenterBottom;\n            dataSource[8].tooltip = messages.alignRightBottom;\n            dataSource[9].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n        },\n\n        _initAccessibilityAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var accessibilityView = this.components.accessibilityView;\n            var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftBottom;\n            dataSource[4].tooltip = messages.alignCenterBottom;\n            dataSource[5].tooltip = messages.alignRightBottom;\n            dataSource[6].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n        },\n        _initTextWrapDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var name = \"wrapTextValue\";\n            data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n            var cellView = this.components.cellView;\n            var dataSource = textWrapDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.wrapText;\n            dataSource[1].tooltip = messages.fitToCell;\n            var component = cellView[name] =\n                element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-text-wrap');\n            this._setComponentValue(component, data, name);\n        },\n        _initPositionDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-position');\n            this._setComponentValue(component, data, name);\n        },\n        _initAlignmentDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-align');\n            this._setComponentValue(component, data, name);\n        },\n        _initAssociationDropDown: function(element, name, settings, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            this._setComponentValue(component, data, name);\n        },\n        _setComponentValue: function(component, data, property) {\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initColorPicker: function(element, property, data, storage) {\n            var component = storage[property] =\n                element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n            if (data[property]) {\n                component.value(data[property]);\n            }\n        },\n        _initInput: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initCheckbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n            if (property in data) {\n                component.check(data[property]);\n            }\n        },\n\n        _initTextArea: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            that._destroyComponents(this.components);\n\n            delete that.components;\n        },\n        _destroyComponents: function(components) {\n            for (var widget in components) {\n                if (components[widget].destroy) {\n                    components[widget].destroy();\n                }\n                delete components[widget];\n            }\n        },\n\n        _dialogTemplate: function(messages, dialogTemplate) {\n            return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n        },\n\n        _onPaddingTopChange: function(e) {\n            let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n                view = this.components[viewType],\n                independentCellPaddings = !view.independentCellPaddings.check(),\n                topCellPaddingValue = view.topCellPadding.value(),\n                leftCellPaddingNumeric = view.leftCellPadding,\n                bottomCellPaddingNumeric = view.bottomCellPadding,\n                rightCellPaddingNumeric = view.rightCellPadding;\n\n            if (independentCellPaddings) {\n                leftCellPaddingNumeric.value(topCellPaddingValue);\n                bottomCellPaddingNumeric.value(topCellPaddingValue);\n                rightCellPaddingNumeric.value(topCellPaddingValue);\n            }\n        },\n\n        _onPaddingCheckChange: function(e) {\n            let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n                messages = this.options.messages,\n                checked = e.sender.check(),\n                view = this.components[viewType],\n                topCellPadding = view.topCellPadding,\n                leftCellPaddingNumeric = view.leftCellPadding,\n                bottomCellPaddingNumeric = view.bottomCellPadding,\n                rightCellPaddingNumeric = view.rightCellPadding,\n                topCellPaddingValue = topCellPadding.value();\n\n            if (!checked) {\n                leftCellPaddingNumeric.value(topCellPaddingValue);\n                bottomCellPaddingNumeric.value(topCellPaddingValue);\n                rightCellPaddingNumeric.value(topCellPaddingValue);\n\n                leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n                bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n                rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n\n                topCellPadding.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.cellPadding);\n            } else {\n                leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n                bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n                rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n\n                topCellPadding.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.topPadding);\n            }\n        },\n\n        _onColumnsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        },\n\n        _onRowsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        },\n\n        _createTablePropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-table-properties\");\n            var components = that.components;\n            var tableView = components.tableView = {};\n            var tableProperties = table.tableProperties = table.tableProperties || {};\n            var form;\n\n            that._addUnit(units, tableProperties.widthUnit);\n            that._addUnit(units, tableProperties.heightUnit);\n            tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-columns\",\n                        label: encode(messages.columns),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                                \"columns\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onColumnsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-rows\",\n                        label: encode(messages.rows),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                                \"rows\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onRowsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width\",\n                        label: encode(messages.width),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"widthUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height\",\n                        label: encode(messages.height),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-table-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"heightUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-position\",\n                        label: encode(messages.position),\n                        editor: function(container, options) {\n                            that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                        }\n                    },\n                    {\n                        colSpan: 2,\n                        field: \"k-editor-table-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-spacing\",\n                        label: encode(messages.cellSpacing),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        type: \"group\",\n                        label: \"Cell Paddings\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 20\n                        },\n                        items: [\n                            {\n                                colSpan: \"full\",\n                                field: \"k-editor-padding-all-sides\",\n                                label: \"\",\n                                editor: function(container, options) {\n                                    that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", tableProperties, tableView,\n                                    {\n                                        checked: true,\n                                        label: encode(messages.independentCellPaddings),\n                                        change: that._onPaddingCheckChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-top\",\n                                label: encode(messages.topPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-top\" />').appendTo(container), \"topCellPadding\", tableProperties, tableView,\n                                    {\n                                        placeholder: encode(messages.auto),\n                                        change: that._onPaddingTopChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-right\",\n                                label: encode(messages.rightPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-right\" />').appendTo(container), \"rightCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-bottom\",\n                                label: encode(messages.bottomPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cell-padding-left\",\n                                label: encode(messages.leftPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-left\" />').appendTo(container), \"leftCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                                }\n                            }\n                        ]\n                    }, {\n                        type: \"group\",\n                        label: \"Borders\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 10\n                        },\n                        items: [{\n                            colSpan: \"full\",\n                            field: \"k-editor-table-bg\",\n                            label: encode(messages.tableBackground),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-border-width\",\n                            label: encode(messages.borderWidth),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-border-color\",\n                            label: encode(messages.borderColor),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-border-style\",\n                            label: encode(messages.borderStyle),\n                            editor: function(container, options) {\n                                that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                    \"borderStyle\",\n                                    tableProperties,\n                                    tableView,\n                                    borderStyles);\n                            }\n                        },{\n                            colSpan: \"full\",\n                            field: \"k-editor-collapse-borders\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                            }\n                        }]\n                    }\n                ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createCellPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-cell-properties\");\n            var components = that.components = that.components || {};\n            var cellView = components.cellView = {};\n            var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n            var form;\n\n            that._addUnit(units, cellProperties.widthUnit);\n            that._addUnit(units, cellProperties.heightUnit);\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-selectAllCells\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width\",\n                        label: encode(messages.width),\n                        hint: encode(messages.applyToColumn),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-width-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"widthUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height\",\n                        label: encode(messages.height),\n                        hint: encode(messages.applyToRow),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-height-type\",\n                        label: {\n                            encoded: false,\n                            text: '&nbsp;'\n                        },\n                        editor: function(container, options) {\n                            that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                                \"heightUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-wrap-text\",\n                        label: \"Text control\",\n                        editor: function(container, options) {\n                            that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                            cellProperties);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-bg\",\n                        label: encode(messages.background),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-table-cell-margin\",\n                        label: encode(messages.cellMargin),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        type: \"group\",\n                        label: \"Cell Paddings\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 20\n                        },\n                        items: [\n                            {\n                                colSpan: \"full\",\n                                field: \"k-editor-padding-all-sides\",\n                                label: \"\",\n                                editor: function(container, options) {\n                                    that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", table.tableProperties, cellView,\n                                    {\n                                        checked: true,\n                                        label: encode(messages.independentCellPaddings),\n                                        change: that._onPaddingCheckChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-top\",\n                                label: encode(messages.topPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-top\" />').appendTo(container), \"topCellPadding\", cellProperties, cellView,\n                                    {\n                                        placeholder: encode(messages.auto),\n                                        change: that._onPaddingTopChange.bind(that)\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-right\",\n                                label: encode(messages.rightPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-right\" />').appendTo(container), \"rightCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-bottom\",\n                                label: encode(messages.bottomPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-cells-padding-left\",\n                                label: encode(messages.leftPadding),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-left\" />').appendTo(container), \"leftCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                                }\n                            }\n                        ]\n                    },{\n                        type: \"group\",\n                        label: \"Borders\",\n                        layout: \"grid\",\n                        colSpan: 4,\n                        grid: {\n                            cols: 4,\n                            gutter: 10\n                        },\n                        items: [{\n                            colSpan: 1,\n                            field: \"k-editor-cell-border-width\",\n                            label: encode(messages.borderWidth),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-cell-border-color\",\n                            label: encode(messages.borderColor),\n                            editor: function(container, options) {\n                                that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-cell-border-style\",\n                            label: encode(messages.borderStyle),\n                            editor: function(container, options) {\n                                that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                    \"borderStyle\",\n                                    cellProperties,\n                                    cellView,\n                                    borderStyles);\n                            }\n                        }]\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-cell-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        },\n\n        _createAccessibilityPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-accessibility-properties\");\n            var components = that.components;\n            var accessibilityView = components.accessibilityView = {};\n            var tableProperties = table.tableProperties;\n            var form;\n\n            form = formElement.kendoForm({\n                renderButtons: false,\n                layout: \"grid\",\n                grid: {\n                    cols: 4\n                },\n                items: [\n                    {\n                        colSpan: \"full\",\n                        field: \"k-editor-id\",\n                        label: {\n                            text: encode(messages.id),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-css-class\",\n                        label: {\n                            text: encode(messages.cssClass),\n                            optional: true\n                        },\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                        }\n                    },\n                    {\n                        layout: \"grid\",\n                        grid: {\n                            cols: 4,\n                            gutter: 16\n                        },\n                        colSpan: \"full\",\n                        type: \"group\",\n                        label: \"Accessibility\",\n                        items: [\n                            {\n                                colSpan: 2,\n                                field: \"k-editor-table-caption\",\n                                label: {\n                                    text: encode(messages.caption),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-accessibility-alignment\",\n                                label: encode(messages.captionAlignment),\n                                editor: function(container, options) {\n                                    that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-rows\",\n                                label: encode(messages.headerRows),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                    \"headerRows\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 1,\n                                field: \"k-editor-table-header-columns\",\n                                label: encode(messages.headerColumns),\n                                editor: function(container, options) {\n                                    that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                    \"headerColumns\",\n                                    tableProperties,\n                                    accessibilityView,\n                                    {\n                                        max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                    });\n                                }\n                            },{\n                                colSpan: 2,\n                                field: \"k-editor-cells-headers\",\n                                label: encode(messages.associateCellsWithHeaders),\n                                editor: function(container, options) {\n                                    var element = $(`<select id=\"k-editor-cells-headers\">\n                                    <option value=\"none\">${ messages.associateNone }</option>\n                                    <option value=\"scope\">${ messages.associateScope }</option>\n                                    <option value=\"ids\">${ messages.associateIds }</option>\n                                </select>`).appendTo(container);\n\n                                    that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                                }\n                            },{\n                                colSpan: \"full\",\n                                field: \"k-editor-accessibility-summary\",\n                                label: {\n                                    text: encode(messages.summary),\n                                    optional: true\n                                },\n                                editor: function(container, options) {\n                                    that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                        rows: 5,\n                                        placeholder: messages.tableSummaryPlaceholder\n                                    });\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n            return form;\n        }\n    });\n\n    kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"editor\",\n            name: \"Editor\",\n            category: \"web\",\n            description: \"Rich text editor component\",\n            depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n            features: [ {\n                id: \"editor-imagebrowser\",\n                name: \"Image Browser\",\n                description: \"Support for uploading and inserting images\",\n                depends: [ \"imagebrowser\" ]\n            }, {\n                id: \"editor-resizable\",\n                name: \"Resize handle\",\n                description: \"Support for resizing the content area via a resize handle\",\n                depends: [ \"resizable\" ]\n            }, {\n                id: \"editor-tablewizard\",\n                name: \"Table wizard dialog\",\n                description: \"Support for table properties configuration\",\n                depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n            }, {\n                id: \"editor-pdf-export\",\n                name: \"PDF export\",\n                description: \"Export Editor content as PDF\",\n                depends: [ \"pdf\", \"drawing\" ]\n            }]\n        };\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}